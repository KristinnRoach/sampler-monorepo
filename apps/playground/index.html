<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="./favicon.ico" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Hljóð-Smali</title>

    <meta
      name="description"
      content="Playground for prototyping a sampler instrument "
    />

    <!-- Injected by Vite PWA Plugin, no need for: <link rel="manifest" href="./manifest.webmanifest" /> -->
    <link rel="stylesheet" href="./src/style.css" />

    <script type="module" src="./src/main.ts" defer></script>
  </head>
  <body>
    <div id="page-wrapper" class="page-wrapper">
      <div class="control-grid" id="sampler-container">
        <!-- Sampler Audio Engine -->
        <sampler-element
          node-id="test-sampler"
          debug-mode="false"
        ></sampler-element>

        <!-- Controls -->

        <fieldset class="control-group env-group">
          <legend class="expandable-legend">Envelopes</legend>
          <div class="expandable-content">
            <envelope-switcher
              height="225px"
              target-node-id="test-sampler"
            ></envelope-switcher>
          </div>
        </fieldset>

        <fieldset class="control-group sample-group">
          <legend class="expandable-legend">Sample</legend>
          <div class="expandable-content">
            <record-button
              target-node-id="test-sampler"
              show-status="false"
            ></record-button>
            <load-button
              target-node-id="test-sampler"
              show-status="false"
            ></load-button>
          </div>
        </fieldset>

        <fieldset class="control-group mix-group">
          <legend class="expandable-legend">Mix</legend>
          <div class="expandable-content">
            <volume-knob target-node-id="test-sampler"></volume-knob>
            <dry-wet-knob target-node-id="test-sampler"></dry-wet-knob>
          </div>
        </fieldset>

        <fieldset class="control-group loop-group">
          <legend class="expandable-legend">Loop</legend>
          <div class="expandable-content">
            <loop-start-knob
              target-node-id="test-sampler"
              label="Start"
            ></loop-start-knob>

            <loop-duration-knob
              target-node-id="test-sampler"
              label="Duration"
            ></loop-duration-knob>

            <div class="flex-col">
              <loop-duration-drift-knob
                target-node-id="test-sampler"
                label="Drift"
              ></loop-duration-drift-knob>

              <pan-drift-toggle
                target-node-id="test-sampler"
              ></pan-drift-toggle>
            </div>
          </div>
        </fieldset>

        <fieldset class="control-group filter-group">
          <legend class="expandable-legend">Filters</legend>
          <div class="expandable-content">
            <lowpass-filter-knob
              target-node-id="test-sampler"
            ></lowpass-filter-knob>
            <highpass-filter-knob
              target-node-id="test-sampler"
            ></highpass-filter-knob>
          </div>
        </fieldset>

        <fieldset class="control-group reverb-group">
          <legend class="expandable-legend">Reverb</legend>
          <div class="expandable-content">
            <reverb-send-knob
              label="Send"
              target-node-id="test-sampler"
            ></reverb-send-knob>
            <reverb-size-knob
              label="Size"
              target-node-id="test-sampler"
            ></reverb-size-knob>
          </div>
        </fieldset>

        <fieldset class="control-group distortion-group">
          <legend class="expandable-legend">Distortion</legend>
          <div class="expandable-content">
            <drive-knob target-node-id="test-sampler"></drive-knob>
            <clipping-knob
              target-node-id="test-sampler"
              label="Clip"
            ></clipping-knob>
          </div>
        </fieldset>

        <!-- Feedback controls -->
        <fieldset class="control-group feedback-group">
          <legend class="expandable-legend">Feedback</legend>

          <div class="expandable-content">
            <div class="flex-col">
              <feedback-knob
                target-node-id="test-sampler"
                label="Amount"
              ></feedback-knob>

              <feedback-mode-toggle
                target-node-id="test-sampler"
                label=""
              ></feedback-mode-toggle>
            </div>

            <div class="flex-row">
              <feedback-pitch-knob
                target-node-id="test-sampler"
                label="Pitch"
              ></feedback-pitch-knob>

              <feedback-decay-knob
                target-node-id="test-sampler"
                label="Decay"
              ></feedback-decay-knob>
            </div>
          </div>
        </fieldset>

        <fieldset class="control-group trim-group">
          <legend class="expandable-legend">Trim</legend>
          <div class="expandable-content">
            <trim-start-knob target-node-id="test-sampler"></trim-start-knob>
            <trim-end-knob target-node-id="test-sampler"></trim-end-knob>
          </div>
        </fieldset>

        <fieldset class="control-group mod-group">
          <legend class="expandable-legend">Mod</legend>
          <div class="expandable-content">
            <am-modulation target-node-id="test-sampler"></am-modulation>
          </div>
        </fieldset>

        <fieldset class="control-group amp-lfo-group">
          <legend class="expandable-legend">Amp LFO</legend>
          <div class="expandable-content">
            <div class="flex-col">
              <gain-lfo-rate-knob
                target-node-id="test-sampler"
                label="Rate"
              ></gain-lfo-rate-knob>

              <gain-lfo-sync-toggle
                target-node-id="test-sampler"
                label=""
              ></gain-lfo-sync-toggle>
            </div>

            <gain-lfo-depth-knob
              target-node-id="test-sampler"
              label="Depth"
            ></gain-lfo-depth-knob>
          </div>
        </fieldset>

        <fieldset class="control-group pitch-lfo-group">
          <legend class="expandable-legend">Pitch LFO</legend>
          <div class="expandable-content">
            <div class="flex-col">
              <pitch-lfo-rate-knob
                target-node-id="test-sampler"
                label="Rate"
              ></pitch-lfo-rate-knob>

              <pitch-lfo-sync-toggle
                target-node-id="test-sampler"
                label=""
              ></pitch-lfo-sync-toggle>
            </div>

            <pitch-lfo-depth-knob
              target-node-id="test-sampler"
              label="Depth"
            ></pitch-lfo-depth-knob>
          </div>
        </fieldset>

        <fieldset class="control-group toggle-group">
          <legend class="expandable-legend">Toggles</legend>

          <div class="expandable-content">
            <midi-toggle target-node-id="test-sampler"></midi-toggle>
            <playback-direction-toggle
              target-node-id="test-sampler"
            ></playback-direction-toggle>

            <loop-lock-toggle target-node-id="test-sampler"></loop-lock-toggle>
            <hold-lock-toggle target-node-id="test-sampler"></hold-lock-toggle>
            <pitch-toggle target-node-id="test-sampler"></pitch-toggle>

            <sampler-status target-node-id="test-sampler"></sampler-status>
          </div>
        </fieldset>

        <fieldset class="control-group keyboard-group">
          <legend class="expandable-legend">Keyboard</legend>
          <!-- Computer keyboard just attaches keyhandlers (invisible by default) -->
          <computer-keyboard target-node-id="test-sampler"></computer-keyboard>

          <div class="expandable-content">
            <piano-keyboard
              id="piano-keyboard"
              class="piano-keyboard"
              target-node-id="test-sampler"
              width="800"
              height="80"
            ></piano-keyboard>

            <div class="keyboard-controls">
              <keymap-select target-node-id="test-sampler"></keymap-select>
              <glide-knob target-node-id="test-sampler"></glide-knob>
            </div>
          </div>
        </fieldset>

        <!-- Row collapse icons -->
        <div
          class="row-collapse-icon"
          data-row="1"
          style="grid-area: distortion"
        ></div>
        <div
          class="row-collapse-icon"
          data-row="2"
          style="grid-area: mod"
        ></div>
        <div
          class="row-collapse-icon"
          data-row="3"
          style="grid-area: pitch-lfo"
        ></div>
        <div
          class="row-collapse-icon"
          data-row="4"
          style="grid-area: keyboard"
        ></div>
      </div>
    </div>
  </body>
</html>
