# Color Palette & Theme System Implementation Plan

## Current State Analysis

- **Framework**: SolidJS with Vite
- **Styling**: CSS with custom properties (some hardcoded colors)
- **PWA**: Already configured with VitePWA plugin
- **Current Colors**: Green/yellow theme (`#c0c44fa1`, `rgb(7, 57, 9)`, etc.)

## Implementation Strategy

### Phase 1: CSS Custom Properties Foundation

**Goal**: Replace all hardcoded colors with CSS custom properties for easy theming

#### 1.1 Create Theme Variables System

- Create `src/styles/themes.css` with CSS custom properties
- Define semantic color tokens (primary, secondary, background, surface, etc.)
- Support both light/dark modes using `prefers-color-scheme`

#### 1.2 Update Existing Styles

- Replace hardcoded colors in `style-org-layout.css` with custom properties
- Ensure all colors are themeable

### Phase 2: Theme Management

**Goal**: Allow users to switch between predefined color palettes and light/dark modes

#### 2.1 Theme Context/Store

- Create SolidJS store for theme state management
- Support theme persistence in localStorage
- Theme options: multiple color palettes Ã— light/dark variants

#### 2.2 Theme Switcher Component

- Create UI component for theme selection
- Dropdown/button for color palette selection
- Toggle for light/dark mode
- Live preview capability

### Phase 3: PWA Integration

**Goal**: Ensure themes work properly with PWA features

#### 3.1 Meta Theme Color

- Dynamic `theme-color` meta tag updates via JavaScript
- Match PWA chrome with selected theme

#### 3.2 Vite PWA Plugin Integration

- Leverage existing VitePWA plugin configuration
- Update `vite.config.ts` manifest colors to match default theme
- No manual manifest.json needed (auto-generated by plugin)

### Phase 4: Developer Experience

**Goal**: Make it easy to add new themes and maintain consistency

#### 4.1 Theme Definition System

- Structured theme object format
- Type safety with TypeScript interfaces
- Easy theme addition process

#### 4.2 Documentation

- Theme creation guide
- Color token reference

## Proposed Color Palettes

### 1. Current (Green/Yellow)

- **Light**: Current colors with lighter backgrounds
- **Dark**: Current implementation

### 2. Classic (Blue/Gray)

- **Light**: White/light gray backgrounds, blue accents
- **Dark**: Dark gray/black backgrounds, light blue accents

### 3. Warm (Orange/Red)

- **Light**: Cream backgrounds, warm orange/red accents
- **Dark**: Dark brown backgrounds, warm orange accents

### 4. Monochrome

- **Light**: Pure black/white high contrast
- **Dark**: Pure white/black high contrast

## Implementation Details

### CSS Architecture

```css
:root {
  /* Semantic tokens */
  --color-primary: var(--palette-primary);
  --color-secondary: var(--palette-secondary);
  --color-background: var(--palette-background);
  --color-surface: var(--palette-surface);
  --color-text: var(--palette-text);
  /* ... more tokens */
}

[data-theme='green'][data-mode='dark'] {
  --palette-primary: #357d3f;
  --palette-background: #c0c44fa1;
  /* ... */
}
```

### Theme Management

```typescript
type ColorPalette = 'green' | 'blue' | 'warm' | 'mono';
type ThemeMode = 'light' | 'dark' | 'auto';

interface ThemeStore {
  palette: ColorPalette;
  mode: ThemeMode;
}
```

### Component Integration

- Theme switcher in sidebar or header
- Persist user preference
- Respect system preference when set to 'auto'

## Files to Modify/Create

### New Files

- `src/styles/themes.css` - Theme definitions
- `src/components/ThemeSwatcher.tsx` - Theme selection UI
- `src/stores/themeStore.ts` - Theme state management
- `src/types/theme.ts` - TypeScript interfaces

### Modified Files

- `src/style-org-layout.css` - Replace hardcoded colors
- `src/App.tsx` - Add theme provider/context
- `src/main.tsx` - Initialize theme system
- `index.html` - Dynamic meta theme-color
- `vite.config.ts` - Build optimizations if needed

## Modern Best Practices Compliance

### Accessibility

- WCAG contrast ratios for all themes
- Respect `prefers-color-scheme`
- Respect `prefers-reduced-motion`
- High contrast theme option

### Performance

- CSS custom properties for minimal repaints
- Lazy loading of theme definitions
- Minimal JavaScript for theme switching

### PWA Standards

- Dynamic theme-color meta tag via JavaScript
- Consistent branding across all surfaces
- Work with Vite PWA plugin's auto-generated manifest
- Update plugin configuration for theme-aware defaults

### User Experience

- Smooth transitions between themes
- Immediate visual feedback
- Persistent user preferences
- System preference detection

## Priority Order

1. **High**: CSS custom properties foundation
2. **High**: Basic light/dark mode switching
3. **Medium**: Multiple color palette support
4. **Medium**: Theme switcher UI
5. **Low**: Advanced features (transitions, preview)

Would you like me to proceed with implementing this plan? I can start with Phase 1 (CSS custom properties foundation) or would you prefer to modify the plan first?
