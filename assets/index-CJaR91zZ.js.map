{"version":3,"file":"index-CJaR91zZ.js","sources":["../../src/utils/dom-utils.ts","../../src/utils/expandCollapse.ts","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["export const qs = (classOrId: string, container?: Element) =>\n  (container || document).querySelector(classOrId);\n\nexport const qsa = (classOrId: string, container?: Element) =>\n  (container || document).querySelectorAll(classOrId);\n","import { qsa } from './dom-utils';\n\nexport const toggleRow = (rowNumber: number) => {\n  const rowSelectors = [\n    '.env-group, .sample-group, .mix-group',\n    '.filter-group,  .feedback-group',\n    '.loop-group, .trim-group, .misc-group, .lfo-group',\n    '.toggle-group, .keyboard-group',\n  ];\n\n  const selector = rowSelectors[rowNumber - 1];\n  if (!selector) return;\n  const groups = qsa(selector);\n\n  if (groups.length === 0) return;\n  const allCollapsed = Array.from(groups).every((g) =>\n    g.classList.contains('collapsed')\n  );\n\n  groups.forEach((group) => group.classList.toggle('collapsed', !allCollapsed));\n};\n\nexport function addExpandCollapseListeners() {\n  document.addEventListener('click', (e: MouseEvent) => {\n    const target = e.target as EventTarget | null;\n    if (!(target instanceof Element)) return;\n\n    // Toggle a single group's collapse by legend\n    const legend = target.closest('.expandable-legend');\n    if (legend) {\n      legend.closest('.control-group')?.classList.toggle('collapsed');\n    }\n\n    // Toggle an entire row\n    const rowIcon = target.closest('.row-collapse-icon');\n    if (rowIcon) {\n      const rowAttr = rowIcon.getAttribute('data-row');\n      const row = Number.parseInt(rowAttr ?? '', 10);\n      if (Number.isFinite(row) && row > 0) {\n        toggleRow(row);\n      }\n    }\n  });\n}\n","import { Component, onMount, createSignal } from 'solid-js';\nimport type { SamplerElement } from '@repo/audio-components';\nimport { addExpandCollapseListeners } from './utils/expandCollapse';\n\nconst App: Component = () => {\n  let samplerRef: SamplerElement | undefined;\n  const [sampleLoaded, setSampleLoaded] = createSignal(false);\n  const [layout, setLayout] = createSignal<'desktop' | 'tablet' | 'mobile'>(\n    'desktop'\n  );\n\n  onMount(() => {\n    const handleSampleLoaded = () => {\n      if (samplerRef) {\n        const samplePlayer = samplerRef.getSamplePlayer();\n        setSampleLoaded(true);\n      }\n    };\n\n    // Simple responsive layout detection\n    const updateLayout = () => {\n      const width = window.innerWidth;\n\n      if (width < 800) {\n        setLayout('mobile');\n      } else if (width < 1200) {\n        setLayout('tablet');\n      } else {\n        setLayout('desktop');\n      }\n    };\n\n    document.addEventListener('sample-loaded', handleSampleLoaded);\n    window.addEventListener('resize', updateLayout);\n\n    updateLayout(); // Initial check\n\n    // Add expand/collapse listeners\n    addExpandCollapseListeners();\n\n    return () => {\n      document.removeEventListener('sample-loaded', handleSampleLoaded);\n      window.removeEventListener('resize', updateLayout);\n    };\n  });\n\n  return (\n    <div id='page-wrapper' class='page-wrapper'>\n      <div class={`control-grid layout-${layout()}`} id='sampler-container'>\n        {/* Sampler Audio Engine */}\n        <sampler-element\n          ref={samplerRef}\n          node-id='test-sampler'\n          debug-mode='false'\n        />\n\n        {/* Controls */}\n        <fieldset class='control-group env-group'>\n          <legend class='expandable-legend'>Envelopes</legend>\n          <div class='expandable-content'>\n            <envelope-switcher height='225px' target-node-id='test-sampler' />\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group sample-group'>\n          <legend class='expandable-legend'>Sample</legend>\n          <div class='expandable-content'>\n            <div class='flex-col'>\n              <record-button\n                target-node-id='test-sampler'\n                show-status='false'\n              />\n              <input-select target-node-id='test-sampler' />\n            </div>\n            <load-button target-node-id='test-sampler' show-status='false' />\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group mix-group'>\n          <legend class='expandable-legend'>Mix</legend>\n          <div class='expandable-content'>\n            <volume-knob target-node-id='test-sampler' />\n            <dry-wet-knob target-node-id='test-sampler' />\n            <reverb-send-knob label='RevSend' target-node-id='test-sampler' />\n            <reverb-size-knob label='RevSize' target-node-id='test-sampler' />\n          </div>\n        </fieldset>\n\n        {/* <fieldset class='control-group space-group'>\n          <legend class='expandable-legend'>Space</legend>\n          <div class='expandable-content'>\n            <reverb-send-knob label='RevSend' target-node-id='test-sampler' />\n            <reverb-size-knob label='RevSize' target-node-id='test-sampler' />\n          </div>\n        </fieldset> */}\n\n        <fieldset class='control-group filter-group'>\n          <legend class='expandable-legend'>Filters</legend>\n          <div class='expandable-content'>\n            <highpass-filter-knob target-node-id='test-sampler' />\n            <lowpass-filter-knob target-node-id='test-sampler' />\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group misc-group'>\n          <legend class='expandable-legend'>Misc</legend>\n          <div class='expandable-content'>\n            <distortion-knob target-node-id='test-sampler' />\n            <am-modulation label='AM' target-node-id='test-sampler' />\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group loop-group'>\n          <legend class='expandable-legend'>Loop</legend>\n          <div class='expandable-content'>\n            <loop-start-knob target-node-id='test-sampler' label='Start' />\n            <loop-duration-knob\n              target-node-id='test-sampler'\n              label='Duration'\n            />\n            <div class='flex-col'>\n              <loop-duration-drift-knob\n                target-node-id='test-sampler'\n                label='Drift'\n              />\n              <pan-drift-toggle target-node-id='test-sampler' />\n            </div>\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group trim-group'>\n          <legend class='expandable-legend'>Trim</legend>\n          <div class='expandable-content'>\n            <trim-start-knob target-node-id='test-sampler' />\n            <trim-end-knob target-node-id='test-sampler' />\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group feedback-group'>\n          <legend class='expandable-legend'>Feedback</legend>\n          <div class='expandable-content'>\n            <div class='flex-col'>\n              <feedback-knob target-node-id='test-sampler' label='Amount' />\n              <feedback-mode-toggle target-node-id='test-sampler' label='' />\n            </div>\n            <div class='flex-row'>\n              <div class='flex-col'>\n                <feedback-pitch-knob\n                  target-node-id='test-sampler'\n                  label='Pitch'\n                />\n                <feedback-lpf-knob\n                  label='Lowpass'\n                  class='fb-lpf-knob'\n                  target-node-id='test-sampler'\n                />\n              </div>\n              <feedback-decay-knob\n                target-node-id='test-sampler'\n                label='Decay'\n              />\n            </div>\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group lfo-group'>\n          <legend class='expandable-legend'>LFO's</legend>\n          <div class='expandable-content'>\n            <div class='flex-col'>\n              <gain-lfo-rate-knob target-node-id='test-sampler' label='Rate' />\n              <gain-lfo-sync-toggle target-node-id='test-sampler' label='' />\n            </div>\n            <gain-lfo-depth-knob target-node-id='test-sampler' label='Depth' />\n            <div class='flex-col'>\n              <pitch-lfo-rate-knob target-node-id='test-sampler' label='Rate' />\n              <pitch-lfo-sync-toggle target-node-id='test-sampler' label='' />\n            </div>\n            <pitch-lfo-depth-knob target-node-id='test-sampler' label='Depth' />\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group toggle-group'>\n          <legend class='expandable-legend'>Toggles</legend>\n          <div class='expandable-content'>\n            <midi-toggle target-node-id='test-sampler' />\n            <playback-direction-toggle target-node-id='test-sampler' />\n            <loop-lock-toggle target-node-id='test-sampler' />\n            <hold-lock-toggle target-node-id='test-sampler' />\n            <pitch-toggle target-node-id='test-sampler' />\n            <sampler-status target-node-id='test-sampler' />\n          </div>\n        </fieldset>\n\n        <fieldset class='control-group keyboard-group'>\n          <legend class='expandable-legend'>Keyboard</legend>\n          <computer-keyboard target-node-id='test-sampler' />\n          <div class='expandable-content'>\n            <piano-keyboard\n              id='piano-keyboard'\n              class='piano-keyboard'\n              target-node-id='test-sampler'\n              width='700'\n              height='80'\n            />\n            <div class='keyboard-controls'>\n              <keymap-select show-label='false' target-node-id='test-sampler' />\n              <glide-knob target-node-id='test-sampler' />\n            </div>\n          </div>\n        </fieldset>\n\n        {/* Row collapse icons */}\n        <div class='row-collapse-icon' data-row='1' style='grid-area: mix' />\n        <div\n          class='row-collapse-icon'\n          data-row='2'\n          style='grid-area: feedback'\n        />\n        <div class='row-collapse-icon' data-row='3' style='grid-area: lfo' />\n        <div\n          class='row-collapse-icon'\n          data-row='4'\n          style='grid-area: keyboard'\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","/* @refresh reload */\nimport { render } from 'solid-js/web';\nimport { defineSampler } from '@repo/audio-components';\nimport App from './App';\nimport './style.css';\n\ndefineSampler(); // Define all web components for the sampler\n\nconst root = document.getElementById('root');\n\nif (import.meta.env.DEV && !(root instanceof HTMLElement)) {\n  throw new Error(\n    'Root element not found. Did you forget to add it to your index.html? Or maybe the id attribute got misspelled?'\n  );\n}\n\nrender(() => <App />, root!);\n"],"names":["qsa","classOrId","container","toggleRow","rowNumber","selector","groups","allCollapsed","g","group","addExpandCollapseListeners","e","target","legend","_a","rowIcon","rowAttr","row","App","samplerRef","sampleLoaded","setSampleLoaded","createSignal","layout","setLayout","onMount","handleSampleLoaded","getSamplePlayer","updateLayout","width","window","innerWidth","document","addEventListener","removeEventListener","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$6","_el$7","_el$8","_el$9","_el$0","_el$1","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","_el$23","_el$24","_el$25","_el$26","_el$27","_el$28","_el$29","_el$30","_el$31","_el$32","_el$33","_el$34","_el$35","_el$36","_el$37","_el$38","_el$39","_el$40","_el$41","_el$42","_el$43","_el$44","_el$45","_el$46","_el$47","_el$48","_el$49","_el$50","_el$51","_el$52","_el$53","_el$54","_el$55","_el$56","_el$57","_el$58","_el$59","_el$60","_el$61","_el$62","_el$63","_el$64","_el$65","_el$66","_el$67","_el$68","_el$69","_el$70","_el$71","_el$72","_el$73","_el$74","_el$75","_el$76","_el$77","_el$78","_el$79","_el$80","_el$81","_ref$","_$use","_$owner","_$getOwner","_$effect","_$className","defineSampler","root","getElementById","render","_$createComponent"],"mappings":"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"}