{"version":3,"file":"index-Dp-AOdVk.js","sources":["../../src/utils/dom-utils.ts","../../src/utils/makeDraggable.ts","../../src/main.ts"],"sourcesContent":["export const qs = (classOrId: string, container?: Element) =>\n  (container || document).querySelector(classOrId);\n\nexport const qsa = (classOrId: string, container?: Element) =>\n  (container || document).querySelectorAll(classOrId);\n","import { qs } from './dom-utils';\nimport { gsap } from 'gsap';\nimport { Draggable } from 'gsap/Draggable';\n\ngsap.registerPlugin(Draggable);\n\nexport const makeDraggable = (\n  elementOptions: {\n    element?: Element | null;\n    handleElement?: Element | null;\n    className?: string;\n    handleClassName?: string;\n  } = {},\n  gsapOptions: any = {}\n) => {\n  const {\n    element,\n    handleElement,\n    className = '',\n    handleClassName = '',\n  } = elementOptions;\n  const { axis } = gsapOptions || null;\n\n  let el: Element | null = null;\n  if (element) el = element;\n  else if (className) el = qs(className);\n\n  if (!(el instanceof Element)) {\n    console.warn(`makeDraggable: Invalid Element.`);\n    return;\n  }\n\n  return Draggable.create(el, {\n    type: axis || 'x,y',\n    trigger:\n      handleElement ??\n      el.querySelector(handleClassName || '.drag-handle') ??\n      el,\n    ...gsapOptions,\n  });\n};\n","import { qs, qsa } from './utils';\nimport gsap from 'gsap';\nimport { makeDraggable } from './utils/makeDraggable';\n\nimport { defineSampler } from '@repo/audio-components';\n\ndefineSampler(); // Define all sampler components\n\n// Function to animate sampler components entry\nconst animateSamplerEntry = () => {\n  // Set initial state - target inner divs instead of custom elements\n  gsap.set(\n    '[target-node-id=\"test-sampler\"] > div, computer-keyboard > *, piano-keyboard > *',\n    {\n      opacity: 0,\n      scale: 0.75,\n      y: 25,\n      x: 0,\n      // force3D: true, // Forces hardware acceleration\n    }\n  );\n\n  // Create timeline for staggered animation\n  const tl = gsap.timeline();\n\n  // Animate main sampler element first\n  tl.to('sampler-element > div', {\n    opacity: 1,\n    scale: 1,\n    y: 0,\n    x: 0,\n    duration: 0.6,\n    ease: 'back.out(1.7)',\n  });\n\n  // Animate control groups with stagger\n  tl.to(\n    '[target-node-id=\"test-sampler\"] > div',\n    {\n      opacity: 1,\n      scale: 1,\n      y: 0,\n      x: 0,\n      duration: 0.4,\n      ease: 'back.out(1.7)',\n      stagger: 0.05,\n    },\n    '-=0.3'\n  );\n\n  // Animate keyboards last\n  tl.to(\n    'computer-keyboard > *, piano-keyboard > *',\n    {\n      opacity: 1,\n      scale: 1,\n      y: 0,\n      x: 0,\n      duration: 0.5,\n      ease: 'back.out(1.7)',\n      stagger: 0.2,\n    },\n    '-=0.1'\n  );\n};\n\nfunction createAndAppendHandle(element: Element | null) {\n  if (!element || element.querySelector('.drag-handle')) return;\n  const handle = document.createElement('div');\n  handle.className = 'drag-handle';\n  handle.setAttribute('aria-label', 'Drag to move this control group');\n  element.appendChild(handle);\n}\n\nfunction addDragHandles() {\n  createAndAppendHandle(qs('.top-bar'));\n  qsa('.control-group').forEach(createAndAppendHandle);\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  console.debug('playground initialized');\n\n  const samplerEl = qs('sampler-element');\n  if (!samplerEl) {\n    console.error('Sampler element not found');\n    return;\n  }\n\n  // Listen for sampler errors (browser compatibility issues)\n  document.addEventListener('sampler-error', (event: any) => {\n    console.error('Sampler error:', event.detail);\n    \n    if (event.detail.error === 'AudioWorklet not supported') {\n      // Create a browser compatibility warning\n      const warning = document.createElement('div');\n      warning.className = 'browser-warning';\n      \n      // Create heading\n      const heading = document.createElement('h2');\n      heading.className = 'browser-warning__heading';\n      heading.textContent = 'Browser Not Supported';\n      \n      // Create message paragraph\n      const messagePara = document.createElement('p');\n      messagePara.className = 'browser-warning__message';\n      messagePara.textContent = event.detail.message || 'Your browser is not compatible.';\n      \n      // Create additional info paragraph\n      const infoPara = document.createElement('p');\n      infoPara.className = 'browser-warning__info';\n      infoPara.textContent = 'Your browser does not fully support AudioWorklet API.';\n      \n      // Create close button\n      const closeButton = document.createElement('button');\n      closeButton.className = 'browser-warning__button';\n      closeButton.textContent = 'Close';\n      \n      // Add event listener to close button\n      closeButton.addEventListener('click', () => {\n        warning.remove();\n      });\n      \n      // Append all elements to warning container\n      warning.appendChild(heading);\n      warning.appendChild(messagePara);\n      warning.appendChild(infoPara);\n      warning.appendChild(closeButton);\n      \n      document.body.appendChild(warning);\n    }\n  });\n\n  document.addEventListener('sampler-ready', () => {\n    animateSamplerEntry();\n    addDragHandles();\n    const controlGroups = qsa('.control-group');\n    const topBar = qs('.top-bar');\n    if (topBar) {\n      makeDraggable(\n        {\n          element: topBar,\n          handleClassName: '.drag-handle',\n        },\n        {\n          type: 'x,y',\n        }\n      );\n    }\n\n    controlGroups.forEach((element, i) => {\n      gsap.to(element, {\n        rotateX: 0,\n        rotateY: 0,\n        rotateZ: 0,\n        ease: 'back.inOut',\n      });\n\n      // Make draggable with handle and callbacks\n      makeDraggable(\n        {\n          element,\n          handleClassName: '.drag-handle',\n        },\n        {\n          type: 'x,y',\n          onDragStart: () => {\n            element.classList.add('dragging');\n          },\n          onDragEnd: () => {\n            element.classList.remove('dragging');\n          },\n        }\n      );\n    });\n  });\n});\n"],"names":["qs","classOrId","container","qsa","gsap","Draggable","makeDraggable","elementOptions","gsapOptions","element","handleElement","className","handleClassName","axis","el","defineSampler","animateSamplerEntry","tl","createAndAppendHandle","handle","addDragHandles","event","warning","heading","messagePara","infoPara","closeButton","controlGroups","topBar","i"],"mappings":"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"}