import{d as A,c as u,t as $,g as e,a as k,b as rt,e as Se,i as m,m as xe,f as S,s as dt,F as ct,h as O,o as gt,u as pt,r as bt}from"./vendor-Df8tmrEm.js";import{y as ft}from"./audio-components-CMrDt027.js";import{D as ut}from"./vendor-dexie-CRVYvTkI.js";import"./audiolib-BZG1L475.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(t){if(t.ep)return;t.ep=!0;const l=a(t);fetch(t.href,l)}})();const mt=(n,o)=>document.querySelectorAll(n),$t=n=>{const a=[".env-group, .sample-group, .mix-group",".filter-group,  .feedback-group",".loop-group, .trim-group, .misc-group, .lfo-group",".toggle-group, .keyboard-group"][n-1];if(!a)return;const s=mt(a);if(s.length===0)return;const t=Array.from(s).every(l=>l.classList.contains("collapsed"));s.forEach(l=>l.classList.toggle("collapsed",!t))};function _t(){document.addEventListener("click",n=>{var t;const o=n.target;if(!(o instanceof Element))return;const a=o.closest(".expandable-legend");a&&((t=a.closest(".control-group"))==null||t.classList.toggle("collapsed"));const s=o.closest(".row-collapse-icon");if(s){const l=s.getAttribute("data-row"),r=Number.parseInt(l??"",10);Number.isFinite(r)&&r>0&&$t(r)}})}class vt extends ut{constructor(){super("SampleDatabase"),this.version(1).stores({samples:"++id, name, createdAt"})}}const E=new vt;var ht=$('<save-button class=save-button title="Save current sample">',!0,!1,!1);function wt(n){const o=n.length,a=n.numberOfChannels,s=n.sampleRate,t=new ArrayBuffer(44+o*a*2),l=new DataView(t),r=(i,d)=>{for(let c=0;c<d.length;c++)l.setUint8(i+c,d.charCodeAt(c))};r(0,"RIFF"),l.setUint32(4,36+o*a*2,!0),r(8,"WAVE"),r(12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,a,!0),l.setUint32(24,s,!0),l.setUint32(28,s*a*2,!0),l.setUint16(32,a*2,!0),l.setUint16(34,16,!0),r(36,"data"),l.setUint32(40,o*a*2,!0);let _=44;for(let i=0;i<o;i++)for(let d=0;d<a;d++){const c=Math.max(-1,Math.min(1,n.getChannelData(d)[i]));l.setInt16(_,c<0?c*32768:c*32767,!0),_+=2}return t}const xt=n=>{const[o,a]=u(!1),s=async()=>{if(n.audioBuffer){a(!0);try{const t=prompt("Enter sample name:")||`Sample_${Date.now()}`,l=wt(n.audioBuffer),r={name:t,audioData:l,sampleRate:n.audioBuffer.sampleRate,channels:n.audioBuffer.numberOfChannels,createdAt:new Date};await E.samples.add(r),console.log("Sample saved successfully!")}catch(t){console.error("Save failed:",t)}finally{a(!1)}}};return(()=>{var t=ht();return t.$$click=s,t._$owner=e(),k(()=>t.disabled=n.disabled||o()),t})()};A(["click"]);var St=$("<div><div class=sidebar-header><h3>Saved Samples</h3><button class=close-button>Ã—</button></div><div class=sidebar-content>"),kt=$("<div>Loading..."),yt=$('<div class=sample-item><div class=sample-info><div class=sample-name></div><div class=sample-date></div></div><button class=delete-button><svg width=16 height=16 viewBox="0 0 24 24"fill=currentColor><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z">'),Ct=$("<div class=no-samples>No saved samples");const Lt=n=>{const[o,a]=u([]),[s,t]=u(!1),l=async()=>{t(!0);try{const i=await E.samples.orderBy("createdAt").reverse().toArray();a(i)}catch(i){console.error("Failed to load samples:",i)}finally{t(!1)}},r=async(i,d)=>{if(d.stopPropagation(),!!confirm(`Delete "${i.name}"?`))try{await E.samples.delete(i.id),console.log("Sample deleted:",i.name),l()}catch(c){console.error("Failed to delete sample:",c)}};rt(()=>{n.isOpen&&l()});const _=()=>n.isOpen;return(()=>{var i=St(),d=i.firstChild,c=d.firstChild,b=c.nextSibling,g=d.nextSibling;return Se(b,"click",n.onClose),m(g,(()=>{var p=xe(()=>!!s());return()=>p()?kt():S(ct,{get each(){return o()},children:f=>(()=>{var v=yt(),y=v.firstChild,C=y.firstChild,D=C.nextSibling,x=y.nextSibling;return v.$$click=()=>n.onSampleSelect(f),m(C,()=>f.name),m(D,()=>{var h;return(h=f.createdAt)==null?void 0:h.toLocaleDateString()}),x.$$click=h=>r(f,h),k(()=>dt(x,"title",`Delete ${f.name}`)),v})()})})(),null),m(g,(()=>{var p=xe(()=>o().length===0&&!s());return()=>p()&&Ct()})(),null),k(()=>O(i,`sidebar ${_()?"sidebar-open":"sidebar-closed"}`)),i})()};A(["click"]);var At=$('<button title="View saved samples"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z">');const Dt=n=>(()=>{var o=At();return Se(o,"click",n.onclick),k(()=>O(o,`sidebar-toggle ${n.isOpen?"open":""}`)),o})();A(["click"]);var Et=$(`<div id=page-wrapper class=page-wrapper><div class=pre-sidebar-buttons></div><div id=sampler-container><sampler-element node-id=test-sampler debug-mode=false></sampler-element><fieldset class="control-group env-group"><legend class=expandable-legend>Envelopes</legend><div class=expandable-content><envelope-switcher height=225px target-node-id=test-sampler></envelope-switcher></div></fieldset><fieldset class="control-group sample-group"><legend class=expandable-legend>Sample</legend><div class=expandable-content><div class=flex-col><record-button target-node-id=test-sampler show-status=false></record-button><input-select target-node-id=test-sampler></input-select></div><load-button target-node-id=test-sampler show-status=false></load-button><button class=reset-button title="Reset knobs"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 256 256"fill=none><path d="M139.141 232.184c78.736 0 127.946-85.236 88.579-153.424-39.369-68.187-137.789-68.187-177.158 0A102.125 102.125 0 0 0 43.71 93.1m62.258-5.371c-14.966 5.594-35.547 10.026-48.737 19.272-2.137 1.497-26.015 16.195-26.049 13.991C27.503 98.21 13.21 75.873 13.21 52.583"></path></svg></button></div></fieldset><fieldset class="control-group mix-group"><legend class=expandable-legend>Mix</legend><div class=expandable-content><volume-knob target-node-id=test-sampler></volume-knob><dry-wet-knob target-node-id=test-sampler></dry-wet-knob><reverb-send-knob label=RevSend target-node-id=test-sampler></reverb-send-knob><reverb-size-knob label=RevSize target-node-id=test-sampler></reverb-size-knob><delay-send-knob label=Delay target-node-id=test-sampler></delay-send-knob><delay-time-knob label=Time target-node-id=test-sampler></delay-time-knob><delay-feedback-knob label=FB target-node-id=test-sampler></delay-feedback-knob></div></fieldset><fieldset class="control-group filter-group"><legend class=expandable-legend>Filters</legend><div class=expandable-content><highpass-filter-knob target-node-id=test-sampler></highpass-filter-knob><lowpass-filter-knob target-node-id=test-sampler></lowpass-filter-knob></div></fieldset><fieldset class="control-group misc-group"><legend class=expandable-legend>Misc</legend><div class=expandable-content><distortion-knob target-node-id=test-sampler></distortion-knob><am-modulation label=AM target-node-id=test-sampler></am-modulation></div></fieldset><fieldset class="control-group loop-group"><legend class=expandable-legend>Loop</legend><div class=expandable-content><loop-start-knob target-node-id=test-sampler label=Start></loop-start-knob><loop-duration-knob target-node-id=test-sampler label=Duration></loop-duration-knob><div class=flex-col><loop-duration-drift-knob target-node-id=test-sampler label=Drift></loop-duration-drift-knob><pan-drift-toggle target-node-id=test-sampler></pan-drift-toggle></div></div></fieldset><fieldset class="control-group trim-group"><legend class=expandable-legend>Trim</legend><div class=expandable-content><trim-start-knob target-node-id=test-sampler></trim-start-knob><trim-end-knob target-node-id=test-sampler></trim-end-knob></div></fieldset><fieldset class="control-group feedback-group"><legend class=expandable-legend>Feedback</legend><div class=expandable-content><div class=flex-col><feedback-knob target-node-id=test-sampler label=Amount></feedback-knob><feedback-mode-toggle target-node-id=test-sampler label></feedback-mode-toggle></div><div class=flex-row><div class=flex-col><feedback-pitch-knob target-node-id=test-sampler label=Pitch></feedback-pitch-knob><feedback-lpf-knob label=Lowpass class=fb-lpf-knob target-node-id=test-sampler></feedback-lpf-knob></div><feedback-decay-knob target-node-id=test-sampler label=Decay></feedback-decay-knob></div></div></fieldset><fieldset class="control-group lfo-group"><legend class=expandable-legend>LFO's</legend><div class=expandable-content><div class=flex-col><gain-lfo-rate-knob target-node-id=test-sampler label=Rate></gain-lfo-rate-knob><gain-lfo-sync-toggle target-node-id=test-sampler label></gain-lfo-sync-toggle></div><gain-lfo-depth-knob target-node-id=test-sampler label=Depth></gain-lfo-depth-knob><div class=flex-col><pitch-lfo-rate-knob target-node-id=test-sampler label=Rate></pitch-lfo-rate-knob><pitch-lfo-sync-toggle target-node-id=test-sampler label></pitch-lfo-sync-toggle></div><pitch-lfo-depth-knob target-node-id=test-sampler label=Depth></pitch-lfo-depth-knob></div></fieldset><fieldset class="control-group toggle-group"><legend class=expandable-legend>Toggles</legend><div class=expandable-content><midi-toggle target-node-id=test-sampler></midi-toggle><playback-direction-toggle target-node-id=test-sampler></playback-direction-toggle><loop-lock-toggle target-node-id=test-sampler></loop-lock-toggle><hold-lock-toggle target-node-id=test-sampler></hold-lock-toggle><pitch-toggle target-node-id=test-sampler></pitch-toggle><sampler-status target-node-id=test-sampler></sampler-status></div></fieldset><fieldset class="control-group keyboard-group"><legend class=expandable-legend>Keyboard</legend><computer-keyboard target-node-id=test-sampler></computer-keyboard><div class=expandable-content><piano-keyboard id=piano-keyboard class=piano-keyboard target-node-id=test-sampler width=700 height=80></piano-keyboard><div class=keyboard-controls><div class=flex-row><rootnote-select show-label=false target-node-id=test-sampler></rootnote-select><keymap-select show-label=false target-node-id=test-sampler></keymap-select></div><glide-knob target-node-id=test-sampler></glide-knob></div></div></fieldset><div class=row-collapse-icon data-row=1 style=grid-area:mix></div><div class=row-collapse-icon data-row=2 style=grid-area:feedback></div><div class=row-collapse-icon data-row=3 style=grid-area:lfo></div><div class=row-collapse-icon data-row=4 style=grid-area:keyboard>`,!0,!1,!1);const Ot=()=>{const[n,o]=u("desktop");let a,s=null;const[t,l]=u(null),[r,_]=u(!1),[i,d]=u(!1),c=async b=>{try{if(!s)return;const g=b.audioData;await s.loadSample(g,void 0,{skipPreProcessing:!0}),d(!1)}catch(g){console.error("Failed to load sample:",g)}};return gt(()=>{const b=()=>{if(a){s=a.getSamplePlayer();const p=(s==null?void 0:s.audiobuffer)||null;l(p),_(!0)}},g=()=>{const p=window.innerWidth;p<800?o("mobile"):p<1200?o("tablet"):o("desktop")};return document.addEventListener("sample-loaded",b),window.addEventListener("resize",g),g(),_t(),()=>{document.removeEventListener("sample-loaded",b),window.removeEventListener("resize",g)}}),(()=>{var b=Et(),g=b.firstChild,p=g.nextSibling,f=p.firstChild,v=f.nextSibling,y=v.firstChild,C=y.nextSibling,D=C.firstChild,x=v.nextSibling,h=x.firstChild,ke=h.nextSibling,B=ke.firstChild,F=B.firstChild,ye=F.nextSibling,R=B.nextSibling,M=R.nextSibling,U=x.nextSibling,Ce=U.firstChild,Le=Ce.nextSibling,H=Le.firstChild,P=H.nextSibling,N=P.nextSibling,V=N.nextSibling,I=V.nextSibling,T=I.nextSibling,Ae=T.nextSibling,z=U.nextSibling,De=z.firstChild,Ee=De.nextSibling,q=Ee.firstChild,Oe=q.nextSibling,W=z.nextSibling,Be=W.firstChild,Fe=Be.nextSibling,K=Fe.firstChild,Re=K.nextSibling,Z=W.nextSibling,Me=Z.firstChild,Ue=Me.nextSibling,j=Ue.firstChild,G=j.nextSibling,He=G.nextSibling,J=He.firstChild,Pe=J.nextSibling,Q=Z.nextSibling,Ne=Q.firstChild,Ve=Ne.nextSibling,X=Ve.firstChild,Ie=X.nextSibling,Y=Q.nextSibling,Te=Y.firstChild,ze=Te.nextSibling,ee=ze.firstChild,te=ee.firstChild,qe=te.nextSibling,We=ee.nextSibling,le=We.firstChild,ne=le.firstChild,Ke=ne.nextSibling,Ze=le.nextSibling,oe=Y.nextSibling,je=oe.firstChild,Ge=je.nextSibling,ae=Ge.firstChild,se=ae.firstChild,Je=se.nextSibling,ie=ae.nextSibling,re=ie.nextSibling,de=re.firstChild,Qe=de.nextSibling,Xe=re.nextSibling,ce=oe.nextSibling,Ye=ce.firstChild,et=Ye.nextSibling,ge=et.firstChild,pe=ge.nextSibling,be=pe.nextSibling,fe=be.nextSibling,ue=fe.nextSibling,tt=ue.nextSibling,lt=ce.nextSibling,nt=lt.firstChild,me=nt.nextSibling,ot=me.nextSibling,$e=ot.firstChild,at=$e.nextSibling,_e=at.firstChild,ve=_e.firstChild,st=ve.nextSibling,it=_e.nextSibling;m(g,S(Dt,{onclick:()=>d(!i()),get isOpen(){return i()}}),null),m(g,S(xt,{get audioBuffer(){return t()},get disabled(){return!r()}}),null),m(b,S(Lt,{get isOpen(){return i()},onClose:()=>d(!1),onSampleSelect:c}),p);var he=a;return typeof he=="function"?pt(he,f):a=f,f._$owner=e(),D._$owner=e(),F._$owner=e(),ye._$owner=e(),R._$owner=e(),M.$$click=()=>{document.querySelectorAll("knob-element").forEach(L=>{L.resetToDefault()})},H._$owner=e(),P._$owner=e(),N._$owner=e(),V._$owner=e(),I._$owner=e(),T._$owner=e(),Ae._$owner=e(),q._$owner=e(),Oe._$owner=e(),K._$owner=e(),Re._$owner=e(),j._$owner=e(),G._$owner=e(),J._$owner=e(),Pe._$owner=e(),X._$owner=e(),Ie._$owner=e(),te._$owner=e(),qe._$owner=e(),ne._$owner=e(),Ke._$owner=e(),Ze._$owner=e(),se._$owner=e(),Je._$owner=e(),ie._$owner=e(),de._$owner=e(),Qe._$owner=e(),Xe._$owner=e(),ge._$owner=e(),pe._$owner=e(),be._$owner=e(),fe._$owner=e(),ue._$owner=e(),tt._$owner=e(),me._$owner=e(),$e._$owner=e(),ve._$owner=e(),st._$owner=e(),it._$owner=e(),k(w=>{var L=`control-grid layout-${n()}`,we=!r();return L!==w.e&&O(p,w.e=L),we!==w.t&&(M.disabled=w.t=we),w},{e:void 0,t:void 0}),b})()};A(["click"]);ft();const Bt=document.getElementById("root");bt(()=>S(Ot,{}),Bt);
//# sourceMappingURL=index-seG2YdzB.js.map
