var ac=Object.defineProperty,Cu=l=>{throw TypeError(l)},uc=(l,e,n)=>e in l?ac(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,V=(l,e,n)=>uc(l,typeof e!="symbol"?e+"":e,n),xa=(l,e,n)=>e.has(l)||Cu("Cannot "+n),r=(l,e,n)=>(xa(l,e,"read from private field"),n?n.call(l):e.get(l)),w=(l,e,n)=>e.has(l)?Cu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,n),m=(l,e,n,s)=>(xa(l,e,"write to private field"),e.set(l,n),n),W=(l,e,n)=>(xa(l,e,"access private method"),n),Uo=(l,e,n,s)=>({set _(h){m(l,e,h)},get _(){return r(l,e,s)}});const Vu={sampleRate:48e3};function lc(l,e=!1){if(l==null)return!1;const n=.001,s=240,h=1,u=2;if(l.duration<n)return console.warn(`Audio duration is too short: ${l.duration} seconds. Must be longer than ${n} seconds`),!1;if(l.duration>s)return console.warn(`Audio duration is too long: ${l.duration} seconds. Must be shorter than ${s} seconds`),!1;if(l.numberOfChannels<h||l.numberOfChannels>u)return console.warn("Invalid number of audio channels."),!1;let f=!1,v=0,b=0;for(let P=0;P<l.numberOfChannels;P++)try{const R=l.getChannelData(P);if(!R||R.length===0)return!1;let B=0;for(let Z=0;Z<R.length;Z++){const J=Math.abs(R[Z]);J>0&&(f=!0),J>v&&(v=J),B+=J*J}const C=Math.sqrt(B/R.length);if(C>b&&(b=C),f)break}catch{return!1}if(f){if(e){const P=20*Math.log10(v),R=20*Math.log10(b);console.log(`AudioBuffer Analysis:
      Duration: ${l.duration} seconds
      Peak amplitude: ${v.toFixed(4)} (${P.toFixed(1)} dB)
      RMS amplitude: ${b.toFixed(4)} (${R.toFixed(1)} dB)
    `)}}else console.warn("Invalid Buffer: No non-zero data.");return f}var Ri,Ys,bt,fn,It,ar,ur,lr,Bi,Or,nt,Wu,du,qu,$o,ea,ii;class fu{constructor(e,n,s,h=1024){w(this,nt),w(this,Ri),w(this,Ys),w(this,bt),w(this,fn),w(this,It),w(this,ar),w(this,ur),w(this,lr,null),w(this,Bi,new Map),w(this,Or,null),m(this,Ri,e),m(this,Ys,n),m(this,bt,s),m(this,fn,e.createAnalyser()),m(this,It,e.createAnalyser()),r(this,fn).fftSize=h,r(this,It).fftSize=h,m(this,ar,new Float32Array(r(this,fn).fftSize)),m(this,ur,new Float32Array(r(this,It).fftSize))}start(e=1e3,n,s=!1){return this.stop(),W(this,nt,Wu).call(this),m(this,lr,window.setInterval(()=>{const h=this.getLevels();n&&n(h),s&&W(this,nt,qu).call(this,h)},e)),this}getLevels(){r(this,fn).getFloatTimeDomainData(r(this,ar)),r(this,It).getFloatTimeDomainData(r(this,ur));const e=W(this,nt,$o).call(this,r(this,ar)),n=W(this,nt,$o).call(this,r(this,ur)),s=W(this,nt,ea).call(this,r(this,ar)),h=W(this,nt,ea).call(this,r(this,ur)),u=W(this,nt,ii).call(this,e),f=W(this,nt,ii).call(this,n),v=W(this,nt,ii).call(this,s),b=W(this,nt,ii).call(this,h),P=v-b;return{input:{rms:e,peak:s,rmsDB:u,peakDB:v},output:{rms:n,peak:h,rmsDB:f,peakDB:b},gainChange:P,gainChangeDB:P}}stop(){if(r(this,lr)){window.clearInterval(r(this,lr)),m(this,lr,null);try{r(this,fn).disconnect(),r(this,It).disconnect(),r(this,Or)&&(r(this,Or).disconnect(),m(this,Or,null));const e=r(this,Bi).get(r(this,bt));if(e){r(this,bt).disconnect();for(const n of e)n.node instanceof AudioNode?r(this,bt).connect(n.node,n.output,n.input):n.node instanceof AudioParam&&r(this,bt).connect(n.node,n.output)}r(this,Bi).clear()}catch(e){console.error("Error removing level monitoring:",e)}}}}Ri=new WeakMap,Ys=new WeakMap,bt=new WeakMap,fn=new WeakMap,It=new WeakMap,ar=new WeakMap,ur=new WeakMap,lr=new WeakMap,Bi=new WeakMap,Or=new WeakMap,nt=new WeakSet,Wu=function(){try{const l=W(this,nt,du).call(this,r(this,bt));r(this,Bi).set(r(this,bt),l);const e=r(this,Ri).createGain();e.gain.value=1,r(this,Ys).connect(e),e.connect(r(this,fn)),r(this,bt).disconnect(),r(this,bt).connect(r(this,It));for(const n of l)n.node instanceof AudioNode?r(this,It).connect(n.node,n.output,n.input):n.node instanceof AudioParam&&r(this,It).connect(n.node,n.output);m(this,Or,e)}catch(l){console.error("Error setting up level monitoring:",l)}},du=function(l){return[{node:r(this,Ri).destination,output:0,input:0}]},qu=function(l){console.log(`Audio Levels:
       Input:  RMS ${l.input.rmsDB.toFixed(1)} dB | Peak ${l.input.peakDB.toFixed(1)} dB
       Output: RMS ${l.output.rmsDB.toFixed(1)} dB | Peak ${l.output.peakDB.toFixed(1)} dB
       Gain Change: ${l.gainChangeDB>0?"+":""}${l.gainChangeDB.toFixed(1)} dB`)},$o=function(l){let e=0;for(let n=0;n<l.length;n++)e+=l[n]*l[n];return Math.sqrt(e/l.length)},ea=function(l){let e=0;for(let n=0;n<l.length;n++){const s=Math.abs(l[n]);s>e&&(e=s)}return e},ii=function(l){return l<1e-7?-100:20*Math.log10(l)};function pu(l,e,n=.9){const s=e.numberOfChannels,h=e.length,u=e.sampleRate;let f=0;for(let P=0;P<s;P++){const R=e.getChannelData(P);for(let B=0;B<h;B++){const C=Math.abs(R[B]);C>f&&(f=C)}}if(f===0)return e;const v=n/f,b=l.createBuffer(s,h,u);for(let P=0;P<s;P++){const R=e.getChannelData(P),B=b.getChannelData(P);for(let C=0;C<h;C++)B[C]=R[C]*v}return b}const cc=1e-4;function mu(l,e=cc){const n=l.getChannelData(0),s=l.sampleRate,h=[];for(let u=1;u<n.length;u++)if(Math.abs(n[u])<e)h.push(u/s);else if(Math.sign(n[u])!==Math.sign(n[u-1])){const f=-n[u-1]/(n[u]-n[u-1]),v=(u-1+f)/s;h.push(v)}return h}const ju=["pulse","bandlimited-sawtooth","supersaw","warm-pad","metallic","formant","white-noise","pink-noise","brown-noise","colored-noise","random-harmonic","custom-function"],Yh=["sine","sawtooth","square","triangle",...ju];function hc(l){return ju.includes(l)}function dc(l,e,n={}){switch(e){case"pulse":return fc(l,{dutyCycle:n.dutyCycle,harmonics:n.harmonics});case"bandlimited-sawtooth":return pc(l,{harmonics:n.harmonics,rolloff:n.rolloff});case"supersaw":return mc(l,{voices:n.voices,detune:n.detune,harmonics:n.harmonics});case"warm-pad":return gc(l,{brightness:n.brightness,harmonics:n.harmonics});case"metallic":return vc(l,{inharmonicity:n.inharmonicity,harmonics:n.harmonics});case"formant":return yc(l,{formantFreqs:n.formantFreqs,formantBandwidths:n.formantBandwidths,fundamentalFreq:n.fundamentalFreq,harmonics:n.harmonics});case"white-noise":return wc(l,{harmonics:n.harmonics,seed:n.seed});case"pink-noise":return Ac(l,{harmonics:n.harmonics,seed:n.seed});case"brown-noise":return Pc(l,{harmonics:n.harmonics,seed:n.seed});case"colored-noise":return Mc(l,{slope:n.slope,harmonics:n.harmonics,seed:n.seed});case"random-harmonic":return kc(l,{chaos:n.chaos,harmonicDensity:n.harmonicDensity,harmonics:n.harmonics,seed:n.seed});case"custom-function":return bc(l,n.waveFunction||(s=>Math.sin(s)),{harmonics:n.harmonics});default:throw new Error(`Invalid waveform type: ${e}`)}}function fc(l,e={}){const{dutyCycle:n=.5,harmonics:s=32}=e,h=new Float32Array(s+1),u=new Float32Array(s+1);for(let f=1;f<=s;f++)h[f]=0,u[f]=2/Math.PI*Math.sin(f*Math.PI*n)/f;return l.createPeriodicWave(h,u,{disableNormalization:!1})}function pc(l,e={}){const{harmonics:n=32,rolloff:s=1}=e,h=new Float32Array(n+1),u=new Float32Array(n+1);for(let f=1;f<=n;f++)h[f]=0,u[f]=1/f*Math.pow(f,-s+1),f%2===0&&(u[f]*=-1);return l.createPeriodicWave(h,u,{disableNormalization:!1})}function mc(l,e={}){const{voices:n=7,detune:s=25,harmonics:h=16}=e,u=new Float32Array(h+1),f=new Float32Array(h+1);for(let v=0;v<n;v++){const b=v===0?0:(v%2===1?1:-1)*Math.ceil(v/2)*(s/Math.ceil(n/2)),P=Math.pow(2,b/1200);for(let R=1;R<=h;R++){const B=R*P;if(B<=h){const C=1/n*(1/R);f[Math.floor(B)]+=C*(R%2===1?1:-1)}}}return l.createPeriodicWave(u,f,{disableNormalization:!1})}function gc(l,e={}){const{brightness:n=.3,harmonics:s=64}=e,h=new Float32Array(s+1),u=new Float32Array(s+1);for(let f=1;f<=s;f++){const v=1/f*Math.exp(-f*(1-n)*.1);f%2===1&&(u[f]=v),f%2===0&&f<=s/2&&(u[f]=v*.3)}return l.createPeriodicWave(h,u,{disableNormalization:!1})}function vc(l,e={}){const{inharmonicity:n=.2,harmonics:s=32}=e,h=new Float32Array(s+1),u=new Float32Array(s+1);for(let f=1;f<=s;f++){const v=Math.sqrt(1+n*f*f),b=Math.round(f*v);if(b<=s){const P=1/(f*f);h[b]+=P*.3,u[b]+=P*.7}}return l.createPeriodicWave(h,u,{disableNormalization:!1})}function yc(l,e={}){const{formantFreqs:n=[800,1200,2600],formantBandwidths:s=[80,120,260],fundamentalFreq:h=440,harmonics:u=64}=e,f=new Float32Array(u+1),v=new Float32Array(u+1);for(let b=1;b<=u;b++){const P=b*h;let R=1/b;for(let B=0;B<n.length;B++){const C=n[B],Z=s[B]||100,J=Math.abs(P-C),X=1/(1+Math.pow(J/Z,2));R*=1+X*2}v[b]=R*(b%2===1?1:-1)}return l.createPeriodicWave(f,v,{disableNormalization:!1})}function bc(l,e,n={}){const{harmonics:s=32}=n,h=new Float32Array(s+1),u=new Float32Array(s+1),f=2048,v=new Float32Array(f);for(let b=0;b<f;b++){const P=b/f*2*Math.PI;v[b]=e(P)}for(let b=1;b<=s;b++){let P=0,R=0;for(let B=0;B<f;B++){const C=B/f*2*Math.PI*b;P+=v[B]*Math.cos(C),R+=v[B]*Math.sin(C)}h[b]=P/f,u[b]=R/f}return l.createPeriodicWave(h,u,{disableNormalization:!1})}function wc(l,e={}){const{harmonics:n=64,seed:s}=e,h=new Float32Array(n+1),u=new Float32Array(n+1);let f=s!==void 0?s:Math.random()*1e6;const v=()=>(f=(f*9301+49297)%233280,f/233280);for(let b=1;b<=n;b++){const P=1/Math.sqrt(n),R=v()*2*Math.PI;h[b]=P*Math.cos(R),u[b]=P*Math.sin(R)}return l.createPeriodicWave(h,u,{disableNormalization:!1})}function Ac(l,e={}){const{harmonics:n=64,seed:s}=e,h=new Float32Array(n+1),u=new Float32Array(n+1);let f=s!==void 0?s:Math.random()*1e6;const v=()=>(f=(f*9301+49297)%233280,f/233280);for(let b=1;b<=n;b++){const P=1/Math.sqrt(b*n),R=v()*2*Math.PI;h[b]=P*Math.cos(R),u[b]=P*Math.sin(R)}return l.createPeriodicWave(h,u,{disableNormalization:!1})}function Pc(l,e={}){const{harmonics:n=64,seed:s}=e,h=new Float32Array(n+1),u=new Float32Array(n+1);let f=s!==void 0?s:Math.random()*1e6;const v=()=>(f=(f*9301+49297)%233280,f/233280);for(let b=1;b<=n;b++){const P=1/(b*Math.sqrt(n)),R=v()*2*Math.PI;h[b]=P*Math.cos(R),u[b]=P*Math.sin(R)}return l.createPeriodicWave(h,u,{disableNormalization:!1})}function Mc(l,e={}){const{slope:n=0,harmonics:s=64,seed:h}=e,u=new Float32Array(s+1),f=new Float32Array(s+1);let v=h!==void 0?h:Math.random()*1e6;const b=()=>(v=(v*9301+49297)%233280,v/233280);for(let P=1;P<=s;P++){const R=1/(Math.pow(P,n/2)*Math.sqrt(s)),B=b()*2*Math.PI;u[P]=R*Math.cos(B),f[P]=R*Math.sin(B)}return l.createPeriodicWave(u,f,{disableNormalization:!1})}function kc(l,e={}){const{chaos:n=.5,harmonicDensity:s=.7,harmonics:h=32,seed:u}=e,f=new Float32Array(h+1),v=new Float32Array(h+1);let b=u!==void 0?u:Math.random()*1e6;const P=()=>(b=(b*9301+49297)%233280,b/233280);for(let R=1;R<=h;R++)if(P()<s){const B=1/R,C=1+(P()-.5)*2*n,Z=B*C,J=P()*2*Math.PI;P()>.5?f[R]=Z*Math.cos(J):v[R]=Z*Math.sin(J)}return l.createPeriodicWave(f,v,{disableNormalization:!1})}const Lu=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],Tc={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},xc={chromatic:[0,1,2,3,4,5,6,7,8,9,10,11],major:[0,2,4,5,7,9,11],minor:[0,2,3,5,7,8,10],harmonic_minor:[0,2,3,5,7,8,11],melodic_minor:[0,2,3,5,7,9,11],lydian:[0,2,4,6,7,9,10],dorian:[0,2,3,5,7,9,10],phrygian:[0,1,3,5,7,8,10],mixolydian:[0,2,4,5,7,9,10],locrian:[0,1,3,5,6,8,10],diminished:[0,2,3,5,6,8,9,11],augmented:[0,3,4,8,9],major_pentatonic:[0,2,4,7,9],minor_pentatonic:[0,2,3,7,8],blues:[0,3,5,6,7,10],whole_tone:[0,2,4,6,8,10]};function Ec(l,e=440){return e*Math.pow(2,(l-69)/12)}function Ic(l,e="semitones",n=440,s){const h=12*Math.log2(l/n)+69;return e==="semitones"?Math.round(h):h}function Sc(l=0,e=9,n=440,s=4){const h=[],u=Math.pow(2,.08333333333333333),f=4*12+9;for(let v=l*12;v<=e*12+(e===8?0:11);v++){const b=n*Math.pow(u,v-f);h.push(Number(b.toFixed(s)))}return h}function gu(l){return typeof l=="number"&&Number.isInteger(l)&&l>=0&&l<=127}function zo(l,e=60){return Math.pow(2,(l-e)/12)}const Ea=Sc(0,9),Dc=Ea.map(l=>1/l),Oc=Array.from({length:Ea.length},(l,e)=>{const n=Math.floor(e/12)-1,s=e%12;return`${Lu[s][0]}${n}`}),Nc=Lu,gs=Tc,Xs=Ea,Rc=Dc,Ku=Oc,Uu=xc,zu=l=>{const e=Xs.reduce((s,h)=>Math.abs(h-l)<Math.abs(s-l)?h:s),n=Ic(e);return Bc(n)};function Bc(l){const e=Ec(l),n=Math.floor(l/12)-1,s=l%12;return{name:Nc[s][0],octave:n,midiNote:l,frequency:e,period:1/e}}function Fc(){const l={};return Ku.forEach((e,n)=>{l[e]=Xs[n]}),Cc(l),Vc(l)}function Cc(l){const e=[["C#","Db"],["D#","Eb"],["F#","Gb"],["G#","Ab"],["A#","Bb"]];for(let n=0;n<=8;n++)for(const[s,h]of e){const u=`${s}${n}`,f=`${h}${n}`;u in l&&!(f in l)?l[f]=l[u]:f in l&&!(u in l)&&(l[u]=l[f])}}function Vc(l){return Object.fromEntries(Object.entries(l).sort((e,n)=>e[1]-n[1]))}const Wc=Fc();Object.fromEntries(Object.entries(Wc).map(([l,e])=>[l,1/e]));function qc(l,e,n=0,s=8){if(!gs[l]&&gs[l]!==0)throw new Error(`Unknown root note: ${l}`);const h=[...typeof e=="string"?Uu[e]:e],u=gs[l],f=[],v=[],b=[];for(let P=n;P<=s;P++)h.forEach(R=>{const B=P*12+(u+R)%12;B<Xs.length&&(f.push(Xs[B]),v.push(Rc[B]),b.push(Ku[B]))});return{rootIdx:u,frequencies:f,periodsInSec:v,scalePattern:h,noteNames:b}}function jc(l,e){const n=Math.pow(2,e/12);return l.map(s=>s/n)}function st(l,e,n){if(!l){const s=n?`
Context: ${JSON.stringify(n)}`:"";throw new Error(`Assertion failed${e?`: ${e}`:""}${s}`)}}function Lc(l){return typeof l=="object"&&l!==null&&typeof l.then=="function"}async function Fi(l,e,n=!0){if(typeof l!="function")throw new Error("tryCatch argument must be a function");try{const s=l();if(Lc(s))try{return{data:await s,error:null}}catch(h){return vu(h,e,n)}return{data:s,error:null}}catch(s){return vu(s,e,n)}}function vu(l,e,n=!0){if(n){const s=l.message??l;console.error(s)}return{data:null,error:l}}var si;class Kc{constructor(){w(this,si,null);try{if(typeof window>"u"||typeof AudioContext>"u"){console.error("Environment util: Window or AudioContext is undefined");return}const e=window.AudioContext||window.webkitAudioContext,n=new e,s=n.createGain().gain,h=typeof navigator<"u"&&"keyboard"in navigator,u=typeof KeyboardEvent<"u"&&typeof KeyboardEvent.prototype.getModifierState=="function";m(this,si,{cancelAndHoldSupported:typeof s.cancelAndHoldAtTime=="function",workletSupported:typeof n.audioWorklet=="object",keyboardAPISupported:h,modifierStateSupported:u}),n.close().catch(console.error)}catch{m(this,si,{cancelAndHoldSupported:!1,workletSupported:!1,keyboardAPISupported:!1,modifierStateSupported:!1})}}get capabilities(){return r(this,si)}}si=new WeakMap;new Kc;function Uc(l,e,n="any",s=u=>u,h=(u,f)=>Math.abs(u-f)){if(l.length===0)throw new Error("Array cannot be empty");if(l.length===1)return 0;const u=e,f=s(l[0]),v=s(l[l.length-1]);if(u<=f)return 0;if(u>=v)return l.length-1;let b=0,P=l.length-1;for(;b<P-1;){const C=Math.floor((b+P)/2),Z=s(l[C]);if(Z===u)return C;Z<u?b=C:P=C}if(n==="left")return b;if(n==="right")return P;const R=h(s(l[b]),u),B=h(s(l[P]),u);return R<=B?b:P}function ps(l,e,n="any",s=u=>u,h=(u,f)=>Math.abs(u-f)){const u=Uc(l,e,n,s,h);return l[u]}const ke=(l,e,n,s={warn:!1})=>{if(s.warn&&(l<e||l>n)){const h=s.name?`(${s.name})`:"";console.warn(`Value${h} ${l} is outside range [${e}, ${n}], clamping to ${l<e?e:n}`)}return Math.max(e,Math.min(n,l))},wt=(l,e,n,s,h,u={warn:!0})=>{if(l<e||l>n){const v=u.name?`(${u.name})`:"";u.warn&&console.warn(`Input value${v} ${l} is outside nominal range [${e}, ${n}]`),l=ke(l,e,n)}const f=(l-e)*(h-s)/(n-e)+s;return ke(f,Math.min(s,h),Math.max(s,h))};function zc(l,e){const{inputRange:n,outputRange:s,curve:h="linear"}=e;(l>n.max||l<n.min)&&console.warn("interpolate: Value outside of input range, will be clamped");let u=(Math.max(n.min,Math.min(l,n.max))-n.min)/(n.max-n.min);switch(h){case"linear":break;case"power1":u=Math.pow(u,1/1.5);break;case"power2":u=Math.pow(u,1/2);break;case"power3":u=Math.pow(u,1/3);break;case"power4":u=Math.pow(u,1/4);break;case"expo":u=u===0?0:Math.pow(2,10*(u-1));break;case"log":u=Math.log(1+9*u)/Math.log(10);break;case"sine":u=1-Math.cos(u*Math.PI/2);break;case"circ":u=1-Math.sqrt(1-u*u);break;default:typeof h=="number"&&(u=Math.pow(u,1/h));break}return s.min+u*(s.max-s.min)}function Qc(l,e){const{inputRange:n,outputRange:s,blend:h=1,curve:u="linear"}=e;(l>n.max||l<n.min)&&console.warn("interpolateLinearToExp: Value outside of input range, will be clamped"),s.min<=0&&console.warn("interpolateLinearToExp: Output min must be > 0 for exponential interpolation");let f=(Math.max(n.min,Math.min(l,n.max))-n.min)/(n.max-n.min);const v=Math.max(0,Math.min(h,1)),b=typeof u=="number"?u:u==="smooth"?2:u==="steep"?3:u==="gentle"?1.5:1;b!==1&&(f=Math.pow(f,1/b));const P=s.min+f*(s.max-s.min),R=s.min*Math.pow(s.max/s.min,f);return(1-v)*P+v*R}const Qo=l=>{const e=l.values().next();if(!e.done)return l.delete(e.value),e.value};let Zn=null,Ci=null;function bn(l){return Zn||(Zn=new AudioContext({sampleRate:Vu.sampleRate,latencyHint:"interactive"}),Zn.state==="suspended"&&(Ci=Ci||Gu())),Zn}async function Qu(l){const e=bn();if(e.state==="running")return e;if(e.state==="closed"){Zn=null;const n=await Fi(()=>Qu(l));return st(n.data instanceof AudioContext&&!n.error,"failed to re-created closed audio context",n.error),n.data}return Ci=Ci||Gu(),await Ci,e}function Gu(){if(typeof document>"u")return Promise.resolve();const l=["click","touchstart","keydown"];return new Promise(e=>{const n=async()=>{Zn&&(await Zn.resume(),l.forEach(s=>document.removeEventListener(s,n)),e())};l.forEach(s=>document.addEventListener(s,n,{once:!0}))})}var vs,Fn,ys,pt;class yu{constructor(){w(this,vs,null),w(this,Fn,!1),w(this,ys,!1),w(this,pt,new Map)}async initialize(){if(r(this,Fn))return!0;try{m(this,vs,await navigator.requestMIDIAccess());const e=r(this,vs).inputs.values();for(const n of e)n.onmidimessage=this.handleMidiMessage.bind(this),console.log(`MIDI input connected: ${n.name}`);return m(this,Fn,!0),!0}catch(e){return console.error("Failed to initialize MIDI:",e),!1}}handleMidiMessage(e){if(!r(this,Fn)||!e||!e.data)return;const n=e.data,s=n[0];if(s>=248)return;if(s===240){console.log("MIDI: SysEx message received, ignoring.");return}if(s>=240)return;const[h,u,f]=n,v=s&15,b=s&240,P=R=>{const B=[],C=r(this,pt).get(R);C&&B.push(...C);const Z=r(this,pt).get("all");return Z&&B.push(...Z),B};if(b===176&&u===64){const R=f>=64;if(r(this,ys)!==R){m(this,ys,R);const B=P(v);for(const C of B)R&&C.sustainPedalOn?C.sustainPedalOn():!R&&C.sustainPedalOff&&C.sustainPedalOff()}}if(b===144&&f>0){const R=P(v);for(const B of R)B.play(u,f)}else if(b===128||b===144&&f===0){const R=P(v);for(const B of R)B.release(u)}}connectInstrument(e,n="all"){r(this,Fn)?(r(this,pt).has(n)||r(this,pt).set(n,[]),r(this,pt).get(n).push(e)):console.log("connectInstrument failed: midi not initialized")}disconnectInstrument(e,n="all"){if(n==="all")for(const[s,h]of r(this,pt).entries()){const u=h.findIndex(f=>f===e);u!==-1&&(h.splice(u,1),h.length===0&&r(this,pt).delete(s))}else{const s=r(this,pt).get(n);if(s){const h=s.findIndex(u=>u===e);h!==-1&&(s.splice(h,1),s.length===0&&r(this,pt).delete(n))}}}get isInitialized(){return r(this,Fn)}}vs=new WeakMap,Fn=new WeakMap,ys=new WeakMap,pt=new WeakMap;async function Gc(l={echoCancellation:!1,noiseSuppression:!0,autoGainControl:!0}){return await navigator.mediaDevices.getUserMedia({audio:l})}const Yc=30,Xc=1e3,Zc={off:0,low:.1,medium:.2,high:.3};async function Yu(l,e="medium"){const n=l.getChannelData(0),s=Zc[e];let h=0;for(let le=0;le<n.length;le++){const dt=Math.abs(n[le]);dt>h&&(h=dt)}const u=s>0?n.map(le=>Math.abs(le)>s*h?le:0):n,f=Math.floor(l.sampleRate/Xc),v=Math.floor(l.sampleRate/Yc);let b=new Float32Array(v);for(let le=f;le<b.length;le++){let dt=0;for(let Ue=0;Ue<u.length-le;Ue++)dt+=u[Ue]*u[Ue+le];b[le]=dt}let P=f;for(let le=f;le<v;le++)b[le]>b[P]&&(P=le);const R=P,B=b[R-1],C=b[R],Z=b[R+1],J=2*(2*C-B-Z),X=Math.abs(J)<1e-6?0:(Z-B)/J,ie=b[P],fe=Math.sqrt(u.reduce((le,dt)=>le+dt*dt,0)/u.length),Yt=ie/(fe*fe*u.length),Hn=Math.max(0,Math.min(1,Yt));return{frequency:l.sampleRate/(R+X),confidence:Hn}}class Xu{constructor(){V(this,"timers",new Map)}debounce(e,n,s){const h=s??e.name??"default";return(...u)=>{this.timers.has(h)&&clearTimeout(this.timers.get(h)),this.timers.set(h,setTimeout(()=>{e(...u),this.timers.delete(h)},n))}}cancel(e){this.timers.has(e)&&(clearTimeout(this.timers.get(e)),this.timers.delete(e))}}function Hc(l,e,n=.5,s=4,h=1){const u=e.numberOfChannels,f=e.length,v=e.sampleRate;let b=0;for(let B=0;B<u;B++){const C=e.getChannelData(B);for(let Z=0;Z<f;Z++){const J=Math.abs(C[Z]);J>b&&(b=J)}}let P=h;if(b>0){const B=.95/(b<=n?b:n+(b-n)/s);P=Math.min(h,B),b>.9&&(P=Math.min(P,1.2))}const R=l.createBuffer(u,f,v);for(let B=0;B<u;B++){const C=e.getChannelData(B),Z=R.getChannelData(B);for(let J=0;J<f;J++){const X=C[J],ie=Math.abs(X);let fe;if(ie<=n)fe=X*P;else{const Yt=(ie-n)/s,Hn=n+Yt;fe=(X<0?-1:1)*Hn*P}Z[J]=Math.max(-.99,Math.min(.99,fe))}}return R}function Jc(l){let e=0,n=0,s=0;for(let f=0;f<l.numberOfChannels;f++){const v=l.getChannelData(f);for(let b=0;b<v.length;b++){const P=Math.abs(v[b]);P>e&&(e=P),n+=v[b]*v[b],s++}}const h=s>0?Math.sqrt(n/s):0,u=h>0?e/h:0;return u<5.5?{shouldCompress:!1,crestFactor:u}:u<7?{shouldCompress:!0,crestFactor:u,suggestedSettings:{threshold:.5,ratio:2,makeupGain:1}}:{shouldCompress:!0,crestFactor:u,suggestedSettings:{threshold:.3,ratio:4,makeupGain:1}}}function _c(l,e,n="samples"){const s=l.numberOfChannels,h=l.sampleRate,u=Array.from({length:s},(P,R)=>l.getChannelData(R));if(u.length===0||!u[0])throw new Error("AudioBuffer must contain at least one audio channel");const f=u[0].length;function v(){for(let P=0;P<f;P++)if(Math.max(...u.map(R=>Math.abs(R[P])))>e)return n==="seconds"?P/h:P;return 0}function b(){for(let P=f-1;P>=0;P--)if(Math.max(...u.map(R=>Math.abs(R[P])))>e)return n==="seconds"?P/h:P;return n==="seconds"?(f-1)/h:f-1}return{start:v(),end:b()}}function bu(l,e,n,s){const h=Math.min(e+n,l.length);for(let u=e;u<h;u++){const f=(u-e)/n,v=s==="in"?f:1-f;l[u]*=v}}function $c(l,e,n,s,h=4){const u=e.numberOfChannels,f=s-n,v=l.createBuffer(u,f,e.sampleRate),b=Math.floor(h/1e3*e.sampleRate);for(let P=0;P<u;P++){const R=e.getChannelData(P),B=v.getChannelData(P);for(let C=0;C<f;C++)B[C]=R[n+C];f>b*2&&b>0&&(bu(B,0,b,"in"),bu(B,f-b,b,"out"))}return v}const Bn={normalize:{enabled:!0,maxAmplitudePeak:.99},compress:{enabled:!0},trimSilence:{enabled:!0,threshold:.005},fadeInOutMs:5,tune:{detectPitch:!0,autotune:!0,targetMidiNote:60},hpf:{auto:!0},getZeroCrossings:!0};async function Zu(l,e,n={}){var s,h;const{fadeInOutMs:u=Bn.fadeInOutMs,hpf:f=Bn.hpf,getZeroCrossings:v=Bn.getZeroCrossings}=n;if(n.skipPreProcessing){const X={audiobuffer:e};if(v){const ie=mu(e);X.zeroCrossings=ie}return X}const b={...Bn.normalize,...n.normalize||{}},P={...Bn.compress,...n.compress||{}},R={...Bn.trimSilence,...n.trimSilence||{}},B={...Bn.tune,...n.tune||{}};let C=e,Z={};const J=.35;if(R!=null&&R.enabled){const{start:X,end:ie}=_c(C,R.threshold??.01);C=$c(l,C,X,ie,u)}if(f){if("cutoff"in f)C=await Au(C,f.cutoff??80);else if("auto"in f&&f.auto){const X=await wu(C);if(X.confidence>=J){const ie=X.frequency>30&&X.frequency<350?X.frequency:80;C=await Au(C,ie)}}}if(b!=null&&b.enabled&&(C=pu(l,C,b.maxAmplitudePeak)),P!=null&&P.enabled){const X=Jc(C);if(X.shouldCompress){const ie=P.threshold!==void 0||P.ratio!==void 0||P.makeupGain!==void 0;let fe;ie&&P.threshold!==void 0?fe={threshold:P.threshold??.5,ratio:P.ratio??2,makeupGain:P.makeupGain??1}:fe=X.suggestedSettings,C=Hc(l,C,fe.threshold,fe.ratio,fe.makeupGain)}}if(B!=null&&B.detectPitch||B!=null&&B.autotune||f&&"auto"in f&&f.auto){const X=await wu(C),ie=(B==null?void 0:B.targetMidiNote)||60,fe=th(X.midiFloat,ie);Z.detectedPitch={fundamentalHz:X.frequency,transpositionSemitones:fe,confidence:X.confidence}}if(B!=null&&B.autotune&&(!((s=Z.detectedPitch)!=null&&s.transpositionSemitones)||Z.detectedPitch.confidence<J?console.info("Skipped autotune due to unreliable pitch detection"):Math.abs(((h=Z.detectedPitch)==null?void 0:h.transpositionSemitones)??0)<.1?console.info("Skipped autotune - detected pitch is already C"):C=eh(l,C,Z.detectedPitch.transpositionSemitones)),b!=null&&b.enabled&&(C=pu(l,C,b.maxAmplitudePeak)),v){const X=mu(C);Z.zeroCrossings=X}return{...Z,audiobuffer:C}}function eh(l,e,n){const s=Math.pow(2,n/12),h=e.length,u=Math.round(h/s),f=l.createBuffer(e.numberOfChannels,u,e.sampleRate);for(let v=0;v<e.numberOfChannels;v++){const b=e.getChannelData(v),P=f.getChannelData(v);for(let R=0;R<u;R++){const B=R*s,C=Math.floor(B),Z=B-C;C+1<h?P[R]=b[C]*(1-Z)+b[C+1]*Z:P[R]=b[C]}}return f}async function wu(l,e=!1){const n=await Yu(l),s=zu(n.frequency),h=69+12*Math.log2(n.frequency/440),u=s.frequency/n.frequency;return e&&console.table({pitchSource:n,targetNoteInfo:s,playbackRateMultiplier:u,midiFloat:h}),{frequency:n.frequency,confidence:n.confidence,midiFloat:h,targetNoteInfo:s}}function th(l,e){let n=e-l;for(;n>6;)n-=12;for(;n<-6;)n+=12;return n}async function Au(l,e,n=.5){const s=new OfflineAudioContext(l.numberOfChannels,l.length,l.sampleRate),h=s.createBufferSource(),u=s.createBiquadFilter();return u.type="highpass",u.frequency.value=e,u.Q.value=n,h.buffer=l,h.connect(u),u.connect(s.destination),h.start(0),await s.startRendering()}let nh=-1;const Hu=new Map,Dt=(l,e)=>{const n=`${++nh}-${l}`;return Hu.set(n,e),n},Ot=l=>{Hu.delete(l)||console.debug("Attempted to unregister a non-existent Node ID: ",l)};function wn(l){const e=new Map;return{sendMessage(n,s){const h=e.get(n);if(h){const u={type:n,senderId:l,...s};h.forEach(f=>f(u))}},onMessage(n,s){e.has(n)||e.set(n,new Set);const h=e.get(n);return h.add(s),()=>h.delete(s)},forwardFrom(n,s,h){const u=h||(v=>({...v})),f=s.map(v=>n.onMessage(v,b=>{const P=u(b);P!==null&&this.sendMessage(P.type,P)}));return()=>f.forEach(v=>v())}}}var cr,Nr,Zs,tn,Ft,Se,Ce,oi,bs;class rh{constructor(e=[],n=[0,1],s,h,u){w(this,oi),w(this,cr),w(this,Nr,0),w(this,Zs,!1),w(this,tn),w(this,Ft,null),w(this,Se),w(this,Ce),V(this,"updateStartPoint",(f,v)=>{this.updatePoint(r(this,tn),f,v)}),V(this,"updateEndPoint",(f,v)=>{this.updatePoint(r(this,Ce),f,v)}),V(this,"setValueRange",f=>m(this,cr,f)),this.points=e,st(e.length>=2,"EnvelopeData needs at least two points to initialize"),m(this,Nr,s),m(this,cr,n),m(this,tn,0),m(this,Ce,e.length-1),m(this,Ft,h!==void 0&&e[h]?h:null),m(this,Se,u!==void 0&&e[u]?u:Math.max(0,r(this,Ce)-1))}addPoint(e,n,s="exponential"){const h={time:e,value:n,curve:s};if(this.points.length>=2){const f=this.points[this.startPointIndex].time,v=this.points[r(this,Ce)].time;if(e<f||e>v){console.warn(`Cannot add point at time ${e}. Must be between ${f} and ${v}`);return}}const u=this.points.findIndex(f=>f.time>e);u===-1?(this.points.push(h),m(this,Ce,this.points.length-1)):(this.points.splice(u,0,h),m(this,Ce,this.points.length-1),r(this,Ft)!==null&&u<=r(this,Ft)&&Uo(this,Ft)._++,r(this,Se)!==null&&u<=r(this,Se)&&Uo(this,Se)._++),W(this,oi,bs).call(this)}updatePoint(e,n,s){if(e>=0&&e<this.points.length){const h=this.points[e];let u=n??h.time;if(e===1&&u<=this.points[r(this,tn)].time||e===r(this,Ce)-1&&u>=this.points[r(this,Ce)].time)return;this.points[e]={...h,time:u,value:s??h.value}}W(this,oi,bs).call(this)}deletePoint(e){this.points.length>2&&e>r(this,tn)&&e<r(this,Ce)&&(this.points.splice(e,1),m(this,Ce,this.points.length-1)),r(this,Se)!==null&&(e<r(this,Se)?Uo(this,Se)._--:e===r(this,Se)&&m(this,Se,r(this,Ce)>r(this,Se)+1?r(this,Se)+1:Math.max(0,r(this,Ce)-1))),W(this,oi,bs).call(this)}interpolateValueAtTime(e){if(this.points.length===0)return r(this,cr)[0];if(this.points.length===1)return this.points[0].value;const n=[...this.points].sort((h,u)=>h.time-u.time);let s=0;if(e<=n[0].time)s=n[0].value;else if(e>=n[n.length-1].time)s=n[n.length-1].value;else{s=0;for(let h=0;h<n.length-1;h++){const u=n[h],f=n[h+1];if(e>=u.time&&e<=f.time){const v=f.time-u.time,b=v===0?0:(e-u.time)/v;u.curve==="exponential"&&u.value>0&&f.value>0?s=u.value*Math.pow(f.value/u.value,b):s=u.value+(f.value-u.value)*b;break}}}return s}setSustainPoint(e){if(e==null){m(this,Ft,null);return}e>=0&&e<this.points.length&&m(this,Ft,e)}setReleasePoint(e){e>=0&&e<this.points.length?m(this,Se,e):console.error("EnvelopeData.setReleasePoint: invalid index")}get startPointIndex(){return r(this,tn)}get sustainPointIndex(){return r(this,Ft)}get releasePointIndex(){return r(this,Se)>=this.points.length&&m(this,Se,Math.max(0,this.points.length-2)),r(this,Se)}get endPointIndex(){return r(this,Ce)}get pointValueRange(){return r(this,cr)}get startTime(){var e;return((e=this.points[r(this,tn)])==null?void 0:e.time)??0}get endTime(){var e;return((e=this.points[r(this,Ce)])==null?void 0:e.time)??r(this,Nr)}get durationSeconds(){return this.endTime-this.startTime}setDurationSeconds(e){m(this,Nr,e)}get hasSharpTransitions(){return r(this,Zs)}}cr=new WeakMap,Nr=new WeakMap,Zs=new WeakMap,tn=new WeakMap,Ft=new WeakMap,Se=new WeakMap,Ce=new WeakMap,oi=new WeakSet,bs=function(){const l=.02*r(this,Nr);m(this,Zs,this.points.some((e,n)=>n>0&&Math.abs(e.time-this.points[n-1].time)<l))};var ws,Lt,ai,re,nn,hr,rn,Gt,pn,Le,Ae,Yn,Go,ri,Ju,Ct,Ze,mn,sn,gt,_u,$u,el,Yo;class Xo{constructor(e,n,s,h=[],u=[0,1],f=1,v=!0){switch(w(this,Ae),V(this,"nodeId"),V(this,"nodeType","default-env"),w(this,ws,!1),w(this,Lt),w(this,ai),w(this,re),w(this,nn),V(this,"envelopeType"),w(this,hr),w(this,rn,!1),w(this,Gt,!1),w(this,pn,1),w(this,Le,1),V(this,"addPoint",(b,P,R)=>{r(this,re).addPoint(b,P,R),r(this,Ze)&&m(this,mn,!0)}),V(this,"deletePoint",b=>{r(this,re).deletePoint(b),r(this,Ze)&&m(this,mn,!0)}),V(this,"updatePoint",(b,P,R)=>{r(this,re).updatePoint(b,P,R),r(this,Ze)&&m(this,mn,!0)}),V(this,"setValueRange",b=>r(this,re).setValueRange(b)),V(this,"enable",()=>m(this,hr,!0)),V(this,"disable",()=>m(this,hr,!1)),w(this,Ct,!1),w(this,Ze,!1),w(this,mn,!1),w(this,sn,()=>r(this,rn)&&!r(this,Ct)),w(this,gt,null),V(this,"setTimeScale",b=>{m(this,Le,b),r(this,Ze)&&m(this,mn,!0)}),V(this,"setLoopEnabled",(b,P="normal")=>{P!=="normal"&&console.info("Only default env loop mode implemented. Other modes coming soon!"),m(this,rn,b)}),V(this,"syncToPlaybackRate",b=>{m(this,Gt,b)}),V(this,"setSustainPoint",b=>{r(this,re).setSustainPoint(b),r(this,gt)&&!r(this,rn)&&!r(this,Ct)&&W(this,Ae,el).call(this)}),V(this,"setReleasePoint",b=>r(this,re).setReleasePoint(b)),this.envelopeType=n,this.nodeType=n,this.nodeId=Dt(this.envelopeType,this),m(this,Lt,e),m(this,ai,wn(this.nodeId)),n){case"amp-env":m(this,nn,"envGain");break;case"pitch-env":m(this,nn,"playbackRate");break;case"filter-env":m(this,nn,"lpf");break;case"loop-env":m(this,nn,"loopEnd"),console.warn("CustomEnvelope not implemented for type: loop-env");break;default:console.error(`CustomEnvelope not implemented for type: ${n}`),m(this,nn,"default");break}m(this,hr,v),m(this,re,s||new rh([...h],u,f)),m(this,ws,!0),this.sendUpstreamMessage(`${this.envelopeType}:created`,{})}setSampleDuration(e){return r(this,re).setDurationSeconds(e),this}get initialized(){return r(this,ws)}get data(){return r(this,re)}get param(){return r(this,nn)}get isEnabled(){return r(this,hr)}get points(){return r(this,re).points}get baseDuration(){return r(this,re).endTime-r(this,re).startTime}get effectiveDuration(){return W(this,Ae,Yn).call(this)}get timeScale(){return r(this,Le)}get envPointValueRange(){return r(this,re).pointValueRange}get loopEnabled(){return r(this,rn)}get syncedToPlaybackRate(){return r(this,Gt)}get numPoints(){return r(this,re).points.length}getEffectivePointTime(e){return st(e>=0&&e<=this.points.length-1),W(this,Ae,Yn).call(this,r(this,re).startPointIndex,e)}triggerEnvelope(e,n,s={baseValue:1,playbackRate:1}){if(m(this,Ct,!1),m(this,pn,s.playbackRate),m(this,gt,{audioParam:e,startTime:n,options:s}),r(this,rn)?W(this,Ae,_u).call(this,e,n,s):W(this,Ae,Ju).call(this,e,n,s),!this.releasePoint){console.error("Release point not set, ensure supported by envelope");return}setTimeout(()=>{this.sustainEnabled||r(this,Ct)||(m(this,Ct,!0),s.voiceId!==void 0&&this.sendUpstreamMessage(`${this.envelopeType}:release`,{voiceId:s.voiceId,midiNote:s.midiNote,releasePoint:this.releasePoint,remainingDuration:this.effectiveReleaseDuration}))},this.effectiveReleaseStartTime*1e3)}releaseEnvelope(e,n,s){r(this,Ct)||(m(this,Ct,!0),m(this,gt,null),W(this,Ae,$u).call(this,e,n,this.releasePointIndex,{baseValue:e.value,playbackRate:r(this,pn),...s}))}get sustainPointIndex(){return r(this,re).sustainPointIndex}get releasePointIndex(){return r(this,re).releasePointIndex}get releasePoint(){return this.points[this.releasePointIndex]||null}get effectiveReleaseStartTime(){return this.getEffectivePointTime(this.releasePointIndex)}get baseReleaseDuration(){return this.points[r(this,re).endPointIndex].time-this.points[this.releasePointIndex].time}get effectiveReleaseDuration(){return r(this,Gt)?this.baseReleaseDuration/r(this,pn)/r(this,Le):this.baseReleaseDuration/r(this,Le)}get sustainEnabled(){return this.sustainPoint!==null&&!this.loopEnabled}get sustainPoint(){return this.sustainPointIndex!==null?this.points[this.sustainPointIndex]:null}get currentPlaybackRate(){return r(this,pn)}setCurrentPlaybackRate(e){m(this,pn,e),r(this,Gt)&&r(this,Ze)&&m(this,mn,!0)}onMessage(e,n){return r(this,ai).onMessage(e,n)}sendUpstreamMessage(e,n){return r(this,ai).sendMessage(e,n),this}hasVariation(){var e;const n=((e=this.points[0])==null?void 0:e.value)??0;return this.points.some(s=>Math.abs(s.value-n)>.001)}static getDefaults(e,n=1){switch(e){case"amp-env":return{points:[{time:0,value:0,curve:"exponential"},{time:Math.min(.005,.1*n),value:1,curve:"exponential"},{time:.25*n,value:.75,curve:"exponential"},{time:.9*n,value:.5,curve:"exponential"},{time:n,value:0,curve:"exponential"}],envPointValueRange:[0,1],initEnable:!0,sustainPointIndex:null,releasePointIndex:3};case"pitch-env":return{points:[{time:0,value:1,curve:"exponential"},{time:n,value:1,curve:"exponential"}],envPointValueRange:[.5,1.5],initEnable:!1,sustainPointIndex:null,releasePointIndex:1};case"filter-env":return{points:[{time:0,value:0,curve:"exponential"},{time:.02*n,value:1,curve:"exponential"},{time:.3*n,value:.2,curve:"exponential"},{time:n,value:0,curve:"exponential"}],envPointValueRange:[0,1],initEnable:!1,sustainPointIndex:null,releasePointIndex:2};default:return{points:[{time:0,value:0,curve:"linear"},{time:.1*n,value:1,curve:"linear"},{time:n,value:0,curve:"linear"}],envPointValueRange:[0,1],initEnable:!0,sustainPointIndex:null,releasePointIndex:1}}}dispose(){m(this,rn,!1),Ot(this.nodeId)}}ws=new WeakMap,Lt=new WeakMap,ai=new WeakMap,re=new WeakMap,nn=new WeakMap,hr=new WeakMap,rn=new WeakMap,Gt=new WeakMap,pn=new WeakMap,Le=new WeakMap,Ae=new WeakSet,Yn=function(l=r(this,re).startPointIndex,e=r(this,re).endPointIndex,n=r(this,pn),s=r(this,Le)){if(l<r(this,re).startPointIndex||e>r(this,re).endPointIndex||l>=e)return 0;const h=this.points[l].time;let u=this.points[e].time-h;return r(this,Gt)&&(u=u/n),u/s},Go=function(l){return this.envelopeType==="filter-env"?l<1?1e3:750:r(this,re).hasSharpTransitions?1e3:l<1?500:250},ri=function(l,e=this.baseDuration,n){const s=W(this,Ae,Go).call(this,l),h=Math.max(2,Math.floor(l*s)),u=new Float32Array(h),{baseValue:f,minValue:v,maxValue:b,startFromValue:P}=n;let R,B,C;this.envelopeType==="filter-env"&&(R=Math.log(f),B=Math.log(b),C=B-R);for(let Z=0;Z<h;Z++){const J=Z/(h-1)*e;let X=r(this,re).interpolateValueAtTime(J);this.envelopeType==="filter-env"&&R&&C?X=Math.exp(R+C*X):f!==1?X=X*f:P!==void 0&&Z===0&&(X=P),u[Z]=ke(X,v,b)}return u},Ju=function(l,e,n){var s;const h=this.sustainEnabled?this.sustainPointIndex??this.points.length-1:this.points.length-1,u=W(this,Ae,Yn).call(this,0,h,n.playbackRate,r(this,Le)),f=W(this,Ae,ri).call(this,u,this.sustainEnabled?((s=this.sustainPoint)==null?void 0:s.time)??this.baseDuration:this.baseDuration,{...n,minValue:l.minValue,maxValue:l.maxValue,startFromValue:l.value});n.voiceId!==void 0&&this.sendUpstreamMessage(`${this.envelopeType}:trigger`,{voiceId:n.voiceId,midiNote:n.midiNote,duration:u,sustainEnabled:this.sustainEnabled,loopEnabled:!1,sustainPoint:this.sustainPoint,releasePoint:this.releasePoint});const v=r(this,Lt).currentTime,b=Math.max(v,e);if(u<.005){l.linearRampToValueAtTime(f[f.length-1],b+u);return}try{l.setValueCurveAtTime(f,b,u),this.sustainEnabled||setTimeout(()=>{m(this,gt,null)},u*1e3+100)}catch{console.debug("Failed to apply envelope curve due to rapid fire.");try{l.linearRampToValueAtTime(f[f.length-1],b+u),this.sustainEnabled||setTimeout(()=>{m(this,gt,null)},u*1e3+100)}catch{try{l.setValueAtTime(f[f.length-1],b),m(this,gt,null)}catch{m(this,gt,null)}}}},Ct=new WeakMap,Ze=new WeakMap,mn=new WeakMap,sn=new WeakMap,gt=new WeakMap,_u=function(l,e,n){if(!r(this,sn).call(this)){m(this,Ze,!1);return}let s=W(this,Ae,Yn).call(this,r(this,re).startPointIndex,r(this,re).endPointIndex,n.playbackRate,r(this,Le)),h=W(this,Ae,ri).call(this,s,this.baseDuration,{...n,minValue:l.minValue,maxValue:l.maxValue,startFromValue:l.value});n.voiceId!==void 0&&this.sendUpstreamMessage(`${this.envelopeType}:trigger`,{voiceId:n.voiceId,midiNote:n.midiNote,duration:s,sustainEnabled:!1,loopEnabled:!0,sustainPoint:this.sustainPoint,releasePoint:this.releasePoint});let u=Math.max(r(this,Lt).currentTime,e);const f=Math.max(.15,Math.min(s*3,.5)),v=.005;let b=0,P=0;m(this,Ze,!0);let R=!1,B=null;const C=()=>{if(!r(this,sn).call(this)){m(this,Ze,!1);return}if(B!==null&&(clearTimeout(B),B=null),!R){R=!0;try{for(r(this,mn)&&(s=W(this,Ae,Yn).call(this,r(this,re).startPointIndex,r(this,re).endPointIndex,n.playbackRate,r(this,Le)),h=W(this,Ae,ri).call(this,s,this.baseDuration,{...n,minValue:l.minValue,maxValue:l.maxValue,startFromValue:l.value}));u<r(this,Lt).currentTime+f&&u>=b;){if(!r(this,sn).call(this)){m(this,Ze,!1);return}const Z=s-v;try{l.setValueCurveAtTime(h,u,Z)}catch{P++,P>=100&&(console.debug(`Multiple curve overlaps in looping envelope, nr of overlaps: ${P} 
                (loop duration: ${s.toFixed(3)}s, buffer: ${v})`),P=0)}if(u+=s+v,b=u,n.voiceId!==void 0){const J=r(this,Lt).getOutputTimestamp();if(J.contextTime!==void 0&&J.performanceTime!==void 0){const X=u-J.contextTime,ie=J.performanceTime+X*1e3,fe=Math.max(0,ie-performance.now());setTimeout(()=>{if(!r(this,sn).call(this)){m(this,Ze,!1);return}this.sendUpstreamMessage(`${this.envelopeType}:trigger:loop`,{voiceId:n.voiceId,midiNote:n.midiNote,duration:s})},fe)}else{if(!r(this,sn).call(this)){m(this,Ze,!1);return}this.sendUpstreamMessage(`${this.envelopeType}:trigger:loop`,{voiceId:n.voiceId,midiNote:n.midiNote,duration:s})}}}B=setTimeout(()=>{if(!r(this,sn).call(this)){m(this,Ze,!1);return}C()},100)}finally{R=!1}}};C()},$u=function(l,e,n,s){const{baseValue:h=1}=s,u=this.points[n],f=this.points[this.points.length-1],v=Math.max(r(this,Lt).currentTime,e),b=f.time-u.time,P=W(this,Ae,Yn).call(this,n,this.points.length-1,s.playbackRate,r(this,Le));if(P<=1e-4)return;const R=l.value,B=W(this,Ae,Yo).call(this,r(this,re).interpolateValueAtTime(f.time)),C=W(this,Ae,Go).call(this,P),Z=Math.max(2,Math.floor(P*C)),J=new Float32Array(Z);for(let X=0;X<Z;X++){const ie=X/(Z-1),fe=u.time+ie*b;J[X]=W(this,Ae,Yo).call(this,r(this,re).interpolateValueAtTime(fe))}s.voiceId!==void 0&&this.sendUpstreamMessage(`${this.envelopeType}:release`,{voiceId:s.voiceId,midiNote:s.midiNote,releasePoint:this.releasePoint,remainingDuration:P});try{const X=new Float32Array(J.length);for(let ie=0;ie<J.length;ie++){const fe=ie/(J.length-1);X[ie]=R+fe*(J[ie]-R)}l.setValueCurveAtTime(X,v,P)}catch{try{l.cancelScheduledValues(v),l.setValueAtTime(R,v),l.linearRampToValueAtTime(B,v+P)}catch(X){console.warn("Fallback linear ramp also failed:",X);try{l.setValueAtTime(B,v)}catch(ie){console.warn("All AudioParam operations failed:",ie)}}}},el=function(){if(!r(this,gt)||!this.sustainEnabled)return;const{audioParam:l,startTime:e,options:n}=r(this,gt),s=r(this,Lt).currentTime,h=s-Math.max(e,s),u=r(this,Gt)?h*n.playbackRate*r(this,Le):h*r(this,Le),f=this.sustainPoint;if(!(!f||u>=f.time))try{l.cancelScheduledValues(s);const v=l.value;l.setValueAtTime(v,s);const b=f.time-u,P=r(this,Gt)?b/n.playbackRate/r(this,Le):b/r(this,Le);if(P>.001){const R=W(this,Ae,ri).call(this,P,f.time,{...n,minValue:l.minValue,maxValue:l.maxValue,startFromValue:v});l.setValueCurveAtTime(R,s,P)}}catch{console.debug("Dynamic sustain reschedule failed, envelope will continue normally")}},Yo=function(l){const[e,n]=r(this,re).pointValueRange;return Math.max(e,Math.min(n,l))};function Zo(l,e,n={}){const{durationSeconds:s=2,points:h,sustainPointIndex:u,releasePointIndex:f,envPointValueRange:v,initEnable:b,sharedData:P}=n;if(P)return new Xo(l,e,P);const R=Xo.getDefaults(e,s),B=h||R.points;let C=v||R.envPointValueRange;const Z=b!==void 0?b:R.initEnable,J=u!==void 0?u:R.sustainPointIndex,X=f!==void 0?f:R.releasePointIndex,ie=new Xo(l,e,void 0,B,C,s,Z);return ie.setSustainPoint(J),X&&ie.setReleasePoint(X),ie}var at,Pe,As,ui,Ut,Ps,li,ta,tl,nl;class Pu{constructor(e,n){w(this,ta),V(this,"nodeType","macro"),V(this,"nodeId"),w(this,at),w(this,Pe),w(this,As),w(this,ui),w(this,Ut,""),w(this,Ps,!1),V(this,"descriptor"),w(this,li,0),V(this,"getValue",()=>r(this,at).value),w(this,nl,(s,h,u,f,v)=>{console.debug("adjusting param: ",r(this,Ut),"targetValue",s,"constant",h,"targetPeriod",u,"quantizedPeriod",f,"result",v)}),this.descriptor=n,m(this,at,new ih(e,n.defaultValue)),m(this,Pe,new sh),m(this,As,new Xu),m(this,ui,wn(r(this,at).nodeId)),this.nodeId=r(this,at).nodeId,m(this,Ps,!0)}async init(){}addTarget(e,n,s=1){return r(this,Ut)||m(this,Ut,n),st(n===r(this,Ut),"Macros only support a single ParamType"),r(this,at).addTarget(e,s),this}ramp(e,n,s,h={}){if(e===r(this,li))return this;m(this,li,e);const{method:u="exponential",debounceMs:f=20,onComplete:v,onCompleteDelayMs:b=30}=h,P=()=>{let R=W(this,ta,tl).call(this,e,s);r(this,at).ramp(R,n,u,!0),v&&setTimeout(v,n*1e3+b)};return f===0?P():r(this,As).debounce(P,f,this.nodeId)(),this}debugProcessVal(e,n,s){console.log("MacroParam.#processValue input:",{value:e,constant:n,targetPeriod:s,hasValueSnapping:r(this,Pe).hasValueSnapping,hasPeriodSnapping:r(this,Pe).hasPeriodSnapping,longestPeriod:r(this,Pe).longestPeriod})}setAllowedParamValues(e,n){return r(this,Pe).setAllowedValues(e,n)}setAllowedPeriods(e,n,s=!1){return r(this,Pe).setAllowedPeriods(e,n,s)}setScale(e){const{rootNote:n,scale:s,tuningOffset:h=0,lowestOctave:u=0,highestOctave:f=8}=e,v=Array.isArray(s)?s:Uu[s];return r(this,Pe).setScale(n,v,h,u,f,e.normalize,e.snapToZeroCrossings)}setValue(e,n){return r(this,at).setValue(e,n),m(this,li,e),this}get targets(){return r(this,at).targets}get snapper(){return r(this,Pe)}get rootNote(){return r(this,Pe).rootNote}setRootNote(e){r(this,Pe).setRootNote(e)}get scalePattern(){return r(this,Pe).scalePattern}get isReady(){return r(this,Ps)}get now(){throw new Error("Not implemented")}get audioParam(){return r(this,at).param}get type(){return r(this,Ut)}get longestPeriod(){return r(this,Pe).longestPeriod}onChange(e){return this.onMessage("value:changed",e)}onMessage(e,n){return r(this,ui).onMessage(e,n)}sendMessage(e,n){r(this,ui).sendMessage(e,n)}dispose(){r(this,at).dispose()}connect(e,n,s){return this.addTarget(e,n,s),this}disconnect(e){throw new Error("Not implemented")}}at=new WeakMap,Pe=new WeakMap,As=new WeakMap,ui=new WeakMap,Ut=new WeakMap,Ps=new WeakMap,li=new WeakMap,ta=new WeakSet,tl=function(l,e){if(!Number.isFinite(l)||!Number.isFinite(e))return l;const n=Math.abs(l-e);if(r(this,Pe).hasPeriodSnapping&&n<r(this,Pe).longestPeriod){const s=r(this,Pe).snapToMusicalPeriod(n);let h;if(r(this,Ut)==="loopEnd"&&(h=e+s),r(this,Ut)==="loopStart"&&(h=Math.max(0,e-s),h>=e-.001)){const u=r(this,Pe).periods.filter(f=>f<s);if(u.length>0){const f=Math.max(...u);h=e-f}else h=Math.max(0,e-.001)}if(h!==void 0)return h}else if(r(this,Pe).hasValueSnapping)return r(this,Pe).snapToValue(l);return l},nl=new WeakMap;var Vt,Tt,ci,hi,Cn;const rl=class na{constructor(e,n=na.MIN_EXPONENTIAL_RAMP_VALUE){V(this,"nodeId"),V(this,"nodeType","audio-param-controller"),w(this,Vt),w(this,Tt),w(this,ci,[]),w(this,hi,!1),w(this,Cn),m(this,Vt,e),this.nodeId=Dt(this.nodeType,this),m(this,Tt,e.createConstantSource()),r(this,Tt).offset.setValueAtTime(n,e.currentTime),m(this,Cn,n),document.addEventListener("click",this.initOnUserGesture.bind(this),{once:!0})}initOnUserGesture(){r(this,hi)||(r(this,Vt).state==="suspended"?r(this,Vt).resume().then(()=>{r(this,Tt).start()}):r(this,Tt).start(),m(this,hi,!0))}addTarget(e,n=1){if(n===1)r(this,Tt).connect(e),r(this,ci).push({param:e});else{const s=new GainNode(r(this,Vt),{gain:n});r(this,Tt).connect(s),s.connect(e),r(this,ci).push({param:e,scaler:s})}return this}ramp(e,n,s="exponential",h=!0){const u=r(this,Vt).currentTime;h&&this.param.cancelScheduledValues(u);const f=this.param.value;if(this.param.setValueAtTime(f,u),s==="exponential"){const v=Math.max(e,na.MIN_EXPONENTIAL_RAMP_VALUE);this.param.exponentialRampToValueAtTime(v,u+n),m(this,Cn,v)}else this.param.linearRampToValueAtTime(e,u+n),m(this,Cn,e);return this}setValue(e,n=this.now,s=!0){return s&&this.param.cancelScheduledValues(n),this.param.setValueAtTime(e,n),m(this,Cn,e),this}get targets(){return r(this,ci)}get context(){return r(this,Vt)}get now(){return r(this,Vt).currentTime}get param(){return r(this,Tt).offset}get value(){return r(this,Cn)}get initialized(){return r(this,hi)}dispose(){r(this,Tt).disconnect(),Ot(this.nodeId)}};Vt=new WeakMap,Tt=new WeakMap,ci=new WeakMap,hi=new WeakMap,Cn=new WeakMap,V(rl,"MIN_EXPONENTIAL_RAMP_VALUE",1e-6);let ih=rl;const Mu=(l,e)=>{const{from:n,to:s}=e,[h,u]=n,[f,v]=s,b=(v-f)/(u-h);if(Array.isArray(l))return l.map(P=>{const R=Math.max(h,Math.min(u,P));return f+(R-h)*b});{const P=Math.max(h,Math.min(u,l));return f+(P-h)*b}};var dr,et,di,Ms,fi,il;class sh{constructor(){w(this,il),w(this,dr,[]),w(this,et,[]),w(this,di,0),w(this,Ms,"C"),w(this,fi,[]),V(this,"paramType",null)}setScale(e,n,s=0,h=0,u=6,f,v=!1){const b=[...n];let P=qc(e,b,h,u).periodsInSec.sort((R,B)=>R-B);return s!==0&&(P=jc(P,-s)),m(this,Ms,e),m(this,fi,b),this.setAllowedPeriods(P,f,v)}setRootNote(e){this.setScale(e,r(this,fi),0,0,6,!1,!1)}setAllowedPeriods(e,n,s=!1,h="any"){let u=n?Mu([...e],n):e;return m(this,et,[...u].sort((f,v)=>f-v)),m(this,di,r(this,et).length-1),r(this,et)}snapToValue(e,n=r(this,dr),s,h="any"){if(n.length===0)return e;if(s===void 0)return ps(n,e);const u=n.filter(f=>Math.abs(f-e)<=s);if(u.length>0)return ps(u,e,h);if(s!==void 0){const f=ps(n,e,h),v=Math.sign(f-e);return e+v*s}return e}snapToMusicalPeriod(e,n=r(this,et)){if(n.length===0||e>this.longestPeriod)return e;if(e<=this.shortestPeriod)return this.shortestPeriod;const s=r(this,et)[r(this,di)];if(e===s)return e;const h=e>s?"right":"left",u=ps(n,e,h);return m(this,di,r(this,et).indexOf(u)),u}setAllowedValues(e,n){const s=n?Mu(e,n):e;return m(this,dr,[...s].sort((h,u)=>h-u)),r(this,dr)}get rootNote(){return r(this,Ms)}get scalePattern(){return r(this,fi)}get periods(){return r(this,et)}get shortestPeriod(){return r(this,et)[0]}get longestPeriod(){const e=r(this,et).length-1;return r(this,et)[e]}get hasValueSnapping(){return r(this,dr).length>0}get hasPeriodSnapping(){return r(this,et).length>0}}dr=new WeakMap,et=new WeakMap,di=new WeakMap,Ms=new WeakMap,fi=new WeakMap,il=new WeakSet;const oh=l=>Math.floor(l/2-1e3),ra=oh(48e3),ku=20,ah=100,uh=ra,Tu=10,ft={PLAYBACK_RATE:{nodeId:"playback-rate",name:"playback-rate",dataType:"number",minValue:-4,maxValue:4,step:1e-4,defaultValue:1,group:"pitch",automationRate:"k-rate"},LOOP_START:{nodeId:"loop-start",name:"loop-start",dataType:"number",minValue:0,maxValue:9999,step:.001,defaultValue:0,group:"loop-points",automationRate:"k-rate"},LOOP_END:{nodeId:"loop-end",name:"loop-end",dataType:"number",minValue:0,maxValue:9999,step:.001,defaultValue:9999,group:"loop-points",automationRate:"k-rate"},LOOP_RAMP_DURATION:{nodeId:"loop-point-ramp",name:"loop-point-ramp",dataType:"number",minValue:.001,maxValue:1,step:.001,defaultValue:.5,group:"loop-points",automationRate:"k-rate"},START_POINT:{nodeId:"start-point",name:"start-point",dataType:"number",minValue:0,maxValue:9999,step:.001,defaultValue:0,group:"trim-sample",automationRate:"k-rate"},END_POINT:{nodeId:"end-point",name:"end-point",dataType:"number",minValue:0,maxValue:9999,step:.001,defaultValue:9999,group:"trim-sample",automationRate:"k-rate"},LOWPASS_CUTOFF:{nodeId:"lpf-freq",name:"lpf-freq",dataType:"number",minValue:ku,maxValue:ra,step:Tu,defaultValue:uh,group:"filter:lpf",automationRate:"k-rate"},HIGHPASS_CUTOFF:{nodeId:"hpf-freq",name:"hpf-freq",dataType:"number",minValue:ku,maxValue:ra,step:Tu,defaultValue:ah,group:"filter:hpf",automationRate:"k-rate"}};var on,We,xt,fr,pr,pi;class ia{constructor(e){w(this,on),w(this,We),w(this,xt),w(this,fr,new Set),w(this,pr,!1),w(this,pi,null),V(this,"storeCurrentValues",()=>{m(this,pi,{rate:r(this,We).frequency.value,depth:r(this,xt).gain.value})}),V(this,"getStoredValues",()=>r(this,pi)),m(this,on,e),m(this,We,e.createOscillator()),m(this,xt,e.createGain()),r(this,We).frequency.value=1,r(this,xt).gain.value=0,r(this,We).connect(r(this,xt)),document.addEventListener("click",this.initOnUserGesture.bind(this),{once:!0})}initOnUserGesture(){r(this,pr)||(r(this,on).state==="suspended"?r(this,on).resume().then(()=>{r(this,We).start()}):r(this,We).start(),m(this,pr,!0))}setFrequency(e,n=this.now){r(this,We).frequency.setValueAtTime(e,n)}setDepth(e,n=this.now){r(this,xt).gain.setValueAtTime(e,n)}setWaveform(e,n){if(e instanceof PeriodicWave)r(this,We).setPeriodicWave(e);else if(typeof e=="string"&&hc(e)){const s=dc(r(this,on),e,n);r(this,We).setPeriodicWave(s)}else r(this,We).type=e}setPeriodicWave(e){r(this,We).setPeriodicWave(e)}connect(e){r(this,xt).connect(e),r(this,fr).add(e)}disconnect(e){e?(r(this,xt).disconnect(e),r(this,fr).delete(e)):(r(this,xt).disconnect(),r(this,fr).clear())}setMusicalNote(e,n={}){const{divisor:s=1,glideTime:h=0,timestamp:u=this.now}=n,f=440*Math.pow(2,(e-69)/12)/s;if(h<=.001)return this.setFrequency(f,u),this;if(n.glideFromMidiNote){const v=440*Math.pow(2,(n.glideFromMidiNote-69)/12)/s;this.setFrequency(v,u)}r(this,We).frequency.setTargetAtTime(f,u+.001,h)}getPitchWobbleWaveform(){const e=new Float32Array(8),n=new Float32Array(8);e[0]=0,n[0]=0;for(let s=1;s<8;s++)e[s]=Math.random()*.5,n[s]=Math.random()*.5;return r(this,on).createPeriodicWave(e,n,{disableNormalization:!0})}get now(){return r(this,on).currentTime}dispose(){if(r(this,pr))try{r(this,We).stop()}catch{}m(this,pr,!1),r(this,fr).clear(),m(this,pi,null),this.disconnect()}}on=new WeakMap,We=new WeakMap,xt=new WeakMap,fr=new WeakMap,pr=new WeakMap,pi=new WeakMap;var mi,ks,ut,mr,Wt,gr,gi;class qt{constructor(e,n,s,h={}){V(this,"nodeId"),V(this,"nodeType"),w(this,mi),w(this,ks,!1),w(this,ut),w(this,mr),w(this,Wt),w(this,gr,new Set),w(this,gi,new Set),this.nodeType=s,this.nodeId=Dt(s,this),m(this,mi,wn(this.nodeId)),m(this,ut,e),h.createIOGains?(m(this,mr,new GainNode(n,{gain:1})),m(this,Wt,new GainNode(n,{gain:1})),r(this,mr).connect(r(this,ut)),r(this,ut).connect(r(this,Wt))):(m(this,mr,e),m(this,Wt,e)),m(this,ks,!0)}onMessage(e,n){return r(this,mi).onMessage(e,n)}sendUpstreamMessage(e,n){return r(this,mi).sendMessage(e,n),this}connect(e){var n;const s="input"in e?e.input:e;r(this,Wt).connect(s),"nodeId"in e&&(r(this,gr).add(e.nodeId),(n=e.addIncoming)==null||n.call(e,this.nodeId))}disconnect(e){var n;if(e){const s="input"in e?e.input:e;r(this,Wt).disconnect(s),"nodeId"in e&&(r(this,gr).delete(e.nodeId),(n=e.removeIncoming)==null||n.call(e,this.nodeId))}else r(this,Wt).disconnect(),r(this,gr).clear()}addIncoming(e){r(this,gi).add(e)}removeIncoming(e){r(this,gi).delete(e)}get connections(){return{outgoing:Array.from(r(this,gr)),incoming:Array.from(r(this,gi))}}setParam(e,n,s=this.now){if("parameters"in r(this,ut)){const u=r(this,ut).parameters.get(e);if(u){u.setValueAtTime(n,s);return}}const h=r(this,ut)[e];if(h!=null&&h.setValueAtTime){h.setValueAtTime(n,s);return}console.warn(`Parameter '${e}' not found on node`)}getParam(e){return r(this,ut)[e]||null}get audioNode(){return r(this,ut)}get input(){return r(this,mr)}get output(){return r(this,Wt)}get context(){return r(this,ut).context}get now(){return r(this,ut).context.currentTime}get initialized(){return r(this,ks)}dispose(){this.disconnect(),Ot(this.nodeId)}}mi=new WeakMap,ks=new WeakMap,ut=new WeakMap,mr=new WeakMap,Wt=new WeakMap,gr=new WeakMap,gi=new WeakMap;const lh={threshold:-13,knee:6,ratio:4,attack:.003,release:.05},ch={threshold:-1,ratio:20,attack:.001,release:.01,knee:0};var sa,Ts,vr,vi,be,yi;const sl=class oa{constructor(e=bn()){V(this,"nodeId"),V(this,"nodeType","dattorro-reverb"),w(this,sa,!1),w(this,Ts),w(this,vr,new Set),w(this,vi,new Set),w(this,be),w(this,yi,"default"),this.nodeId=Dt(this.nodeType,this),m(this,Ts,e),m(this,be,new AudioWorkletNode(e,"dattorro-reverb-processor",{outputChannelCount:[2]})),this.setParam("dry",0),this.setAmountMacro(.01)}connect(e){var n;const s="input"in e?e.input:e;r(this,be).connect(s),"nodeId"in e&&(r(this,vr).add(e.nodeId),(n=e.addIncoming)==null||n.call(e,this.nodeId))}disconnect(e){var n;if(e){const s="input"in e?e.input:e;r(this,be).disconnect(s),"nodeId"in e&&(r(this,vr).delete(e.nodeId),(n=e.removeIncoming)==null||n.call(e,this.nodeId))}else r(this,be).disconnect(),r(this,vr).clear()}addIncoming(e){r(this,vi).add(e.nodeId)}removeIncoming(e){r(this,vi).delete(e.nodeId)}setParam(e,n,s=this.now){var h;if(!isFinite(n)){console.warn(`Skipping non-finite value for ${e}:`,n);return}if(e==="size"){this.setAmountMacro(n);return}if(e==="diffusion"){this.setDiffusionMacro(n);return}(h=r(this,be).parameters.get(e))==null||h.setValueAtTime(n,s)}getParam(e){return e==="diffusion"?{value:this.getDiffusionMacroValue(),setValueAtTime:(n,s)=>this.setDiffusionMacro(n)}:r(this,be).parameters.get(e)||null}setAmountMacro(e){var n;if(e<0||e>1){console.warn("Reverb amount must be 0-1 range");return}const s=oa.PRESETS[r(this,yi)],h=wt(e,0,1,s.decay,.93),u=wt(e,0,1,s.excursionRate,2),f=wt(e,0,1,s.excursionDepth,2),v=wt(e,0,1,s.damping,.65),b=wt(e,0,1,s.bandwidth,.2),P=wt(e,0,1,.3,1);this.setDiffusionMacro(P),(n=this.getParam("decay"))==null||n.setTargetAtTime(h,this.now,.1),this.setParam("excursionRate",u),this.setParam("excursionDepth",f),this.setParam("damping",v),this.setParam("bandwidth",b)}setPreset(e="default",n=.5){m(this,yi,e);const s=oa.PRESETS[e],h=r(this,be).context.currentTime;Object.entries(s).forEach(([u,f])=>{const v=r(this,be).parameters.get(u);v?v.linearRampToValueAtTime(f,h+n):console.warn(`Parameter '${u}' not found in reverb node`)})}setDiffusionMacro(e){const n=Math.max(.1,e*.75),s=Math.max(.1,e*.625),h=Math.min(.7,Math.max(.1,e*.6)),u=Math.max(.2,e*.4);this.setParam("inputDiffusion1",n),this.setParam("inputDiffusion2",s),this.setParam("decayDiffusion1",h),this.setParam("decayDiffusion2",u)}getDiffusionMacroValue(){var e;return((((e=this.getParam("inputDiffusion1"))==null?void 0:e.value)??.75)-.1)/(.75-.1)}getCurrentSettings(){const e={};return Array.from(r(this,be).parameters.keys()).forEach(n=>{var s;e[n]=((s=r(this,be).parameters.get(n))==null?void 0:s.value)??0}),e}get audioNode(){return r(this,be)}get context(){return r(this,Ts)}get input(){return r(this,be)}get output(){return r(this,be)}get now(){return r(this,be).context.currentTime}get initialized(){return r(this,sa)}get currentPreset(){return r(this,yi)}get connections(){return{outgoing:Array.from(r(this,vr)),incoming:Array.from(r(this,vi))}}get numberOfInputs(){return this.input.numberOfInputs}get numberOfOutputs(){return this.output.numberOfOutputs}get workletInfo(){return{numberOfInputs:r(this,be).numberOfInputs,numberOfOutputs:r(this,be).numberOfOutputs,channelCount:r(this,be).channelCount,channelCountMode:r(this,be).channelCountMode}}dispose(){this.disconnect(),Ot(this.nodeId)}};sa=new WeakMap,Ts=new WeakMap,vr=new WeakMap,vi=new WeakMap,be=new WeakMap,yi=new WeakMap,V(sl,"PRESETS",{room:{preDelay:1525,bandwidth:.5683,inputDiffusion1:.4666,inputDiffusion2:.5853,decay:.3226,decayDiffusion1:.6954,decayDiffusion2:.6022,damping:.6446,excursionRate:0,excursionDepth:0},church:{preDelay:0,bandwidth:.928,inputDiffusion1:.7331,inputDiffusion2:.4534,decay:.7,decayDiffusion1:.7839,decayDiffusion2:.1992,damping:.5975,excursionRate:0,excursionDepth:0},freeze:{preDelay:0,bandwidth:.999,inputDiffusion1:.75,inputDiffusion2:.625,decay:1,decayDiffusion1:.5,decayDiffusion2:.711,damping:.005,excursionRate:.3,excursionDepth:1.4},ether:{preDelay:0,bandwidth:.999,inputDiffusion1:.23,inputDiffusion2:.667,decay:.45,decayDiffusion1:.7,decayDiffusion2:.5,damping:.3,excursionRate:.85,excursionDepth:1.2},default:{preDelay:0,bandwidth:.85,inputDiffusion1:.4,inputDiffusion2:.45,decay:.1,decayDiffusion1:.5,decayDiffusion2:.45,damping:.25,excursionRate:.3,excursionDepth:.3}});let hh=sl;class to extends AudioWorkletNode{constructor(e,n,s){super(e,n,s),V(this,"_processorReady",!1),V(this,"_messageQueue",[]),V(this,"_onProcessorMessage"),this.port.onmessage=h=>{if(h.data&&h.data.type==="initialized"){this._processorReady=!0;for(const u of this._messageQueue)this.port.postMessage(u);this._messageQueue=[]}this._onProcessorMessage&&this._onProcessorMessage(h)}}setParam(e,n){const s=this.parameters.get(e);return s?(s.setValueAtTime(n,this.context.currentTime),this):(console.warn(`Parameter '${String(e)}' not found on worklet node`),this)}getParam(e){return this.parameters.get(e)}sendProcessorMessage(e){return this._processorReady?this.port.postMessage(e):this._messageQueue.push(e),this}onProcessorMessage(e){return this._onProcessorMessage=e,this}dispose(){this.disconnect(),this.port.onmessage=null,this.port.close()}}function dh(l){return new to(l,"feedback-delay-processor")}function fh(l){return new to(l,"distortion-processor")}function ph(l){return new to(l,"delay-processor")}var xs,bi,je,wi,an,yr,Ai,Pi,Es,Rr,aa,ua,la,ca,Mi,Is,Ss,Hs,ol,xu;class al{constructor(e=bn()){w(this,Hs),V(this,"nodeId"),V(this,"nodeType","harmonic-feedback"),w(this,xs,!1),w(this,bi),w(this,je),w(this,wi),w(this,an),w(this,yr,new Set),w(this,Ai,new Set),w(this,Pi),w(this,Es,1),w(this,Rr,!1),w(this,aa,0),w(this,ua,.999),w(this,la,.15),w(this,ca,1),w(this,Mi,.00012656238799684143),w(this,Is,2),w(this,Ss,0),this.nodeId=Dt(this.nodeType,this),m(this,bi,e),m(this,je,dh(e)),m(this,wi,new GainNode(e,{gain:1})),m(this,an,new GainNode(e,{gain:1})),r(this,wi).connect(r(this,je)).connect(r(this,an));const n=this.setPitch(60);m(this,Pi,n),m(this,xs,!0)}trigger(e,n={}){const{secondsFromNow:s=0,cents:h=0,velocity:u=100,glideTime:f=0,triggerDecay:v=!0}=n,b=this.now+s;return this.setPitch(e,h,b,f),v&&W(this,Hs,ol).call(this),this}setAmountMacro(e){const n=ke(e,0,1);return this.setFeedbackAmount(n),m(this,Ss,n),this}get currentAmount(){return r(this,Ss)}setPitch(e,n=0,s=this.now,h=0){const u=440*Math.pow(2,(e-69)/12),f=1/(n!==0?u*Math.pow(2,n/1200):u),v=r(this,Mi),b=Math.max(v,f);return this.setDelay(b,s,h),b}setDelay(e,n=this.now,s=0){m(this,Pi,e);const h=e*r(this,Es),u=ke(h,r(this,Mi),r(this,Is));return s===0||!isFinite(s)?(this.getParam("delayTime").setValueAtTime(u,n),this):(this.getParam("delayTime").linearRampToValueAtTime(u,n+s),this)}setDelayMultiplier(e,n=this.now,s=.75){if(typeof e!="number"||!isFinite(e)){console.warn("setDelayMultiplier:Invalid multiplier:",e);return}const h=ke(e,.25,4,{warn:!0,name:"pitchDelayMultiplier"}),u=this.getParam("delayTime");m(this,Es,h);const f=ke(h*r(this,Pi),r(this,Mi),r(this,Is));return s===0||!isFinite(s)?(u.setValueAtTime(f,n),this):(u.setTargetAtTime(f,n,s/3),this)}setFeedbackAmount(e,n=this.now){const s=zc(e,{inputRange:{min:0,max:1},outputRange:{min:Math.max(.001,r(this,aa)),max:r(this,ua)},curve:"power4"});return r(this,je).parameters.get("feedbackAmount").setValueAtTime(s,n),this}setAutoGain(e,n){return r(this,je).port.postMessage({type:"setAutoGain",enabled:e,amount:n}),this}setDecay(e,n=this.now){const s=wt(e,0,1,r(this,la),r(this,ca));return this.getParam("decay").setValueAtTime(s,n),this}setLowpassCutoff(e){if(e>16e3||e<100){console.warn("Feedback lowpass cutoff out of bounds");return}this.getParam("lowpass").setTargetAtTime(e,this.now,.1)}connect(e){var n;const s="input"in e?e.input:e;r(this,an).connect(s),"nodeId"in e&&(r(this,yr).add(e.nodeId),(n=e.addIncoming)==null||n.call(e,this.nodeId))}disconnect(e){var n;if(e){const s="input"in e?e.input:e;r(this,an).disconnect(s),"nodeId"in e&&(r(this,yr).delete(e.nodeId),(n=e.removeIncoming)==null||n.call(e,this.nodeId))}else r(this,an).disconnect(),r(this,yr).clear()}addIncoming(e){r(this,Ai).add(e.nodeId)}removeIncoming(e){r(this,Ai).delete(e.nodeId)}setParam(e,n,s=this.now){var h;switch(e){case"feedback":this.setFeedbackAmount(n,s);break;case"delayTime":this.setDelay(n,s);break;case"amount":this.setAmountMacro(n);break;case"decay":this.setDecay(n,s);break;default:(h=r(this,je).parameters.get(e))==null||h.setValueAtTime(n,s);break}}getParam(e){switch(e){default:return r(this,je).parameters.get(e)||null}}get audioNode(){return r(this,je)}get context(){return r(this,bi)}get now(){return r(this,bi).currentTime}get input(){return r(this,wi)}get output(){return r(this,an)}get connections(){return{outgoing:Array.from(r(this,yr)),incoming:Array.from(r(this,Ai))}}get initialized(){return r(this,xs)}get decayActive(){return r(this,Rr)}get numberOfInputs(){return this.input.numberOfInputs}get numberOfOutputs(){return this.output.numberOfOutputs}get workletInfo(){return{numberOfInputs:r(this,je).numberOfInputs,numberOfOutputs:r(this,je).numberOfOutputs,channelCount:r(this,je).channelCount,channelCountMode:r(this,je).channelCountMode}}dispose(){this.disconnect(),Ot(this.nodeId)}}xs=new WeakMap,bi=new WeakMap,je=new WeakMap,wi=new WeakMap,an=new WeakMap,yr=new WeakMap,Ai=new WeakMap,Pi=new WeakMap,Es=new WeakMap,Rr=new WeakMap,aa=new WeakMap,ua=new WeakMap,la=new WeakMap,ca=new WeakMap,Mi=new WeakMap,Is=new WeakMap,Ss=new WeakMap,Hs=new WeakSet,ol=function(){r(this,Rr)&&W(this,Hs,xu).call(this),m(this,Rr,!0);const l=this.getParam("feedbackAmount").value;return r(this,je).port.postMessage({type:"triggerDecay",baseFeedbackAmount:l}),this},xu=function(){return m(this,Rr,!1),r(this,je).port.postMessage({type:"stopDecay"}),this};var Ds,oe,ki,br,vt,He,jt,wr,Ti,un,zt,ul,ha,da,Os,Eu,ll,ln;class mh{constructor(e){w(this,zt),V(this,"nodeId"),V(this,"nodeType","InstrumentBus"),w(this,Ds),w(this,oe),w(this,ki,!1),w(this,br,null),w(this,vt,{}),w(this,He,new Map),w(this,jt,new Map),w(this,wr,new Set),w(this,Ti,new Set),w(this,un,n=>{for(let s=0;s<n.length-1;s++)W(this,zt,ha).call(this,n[s],n[s+1]);return this}),w(this,Os,(n,s={})=>{const{initGain:h=0}=s,u=new qt(new GainNode(r(this,oe),{gain:h}),r(this,oe),"gain");return r(this,jt).set(n,u),u}),V(this,"getSendNode",n=>r(this,jt).get(n)),w(this,ln,null),this.nodeId=Dt(this.nodeType,this),m(this,oe,e||bn()),m(this,Ds,wn(this.nodeId))}createGainNode(e,n={}){const{initialGain:s=1}=n;return new qt(new GainNode(r(this,oe),{gain:s}),e,"gain")}async init(){if(!r(this,ki))return r(this,br)?r(this,br):(m(this,br,(async()=>{try{const e=this.createGainNode(r(this,oe),{initialGain:.5}),n=this.createGainNode(r(this,oe),{initialGain:1}),s=this.createGainNode(r(this,oe),{initialGain:1}),h=this.createGainNode(r(this,oe),{initialGain:1}),u=new qt(new BiquadFilterNode(r(this,oe),{type:"lowpass",Q:.5,frequency:r(this,oe).sampleRate/2-1e3}),r(this,oe),"lpf"),f=new qt(new BiquadFilterNode(r(this,oe),{type:"highpass",Q:.707,frequency:20}),r(this,oe),"hpf"),v=new qt(new DynamicsCompressorNode(r(this,oe),lh),r(this,oe),"compressor"),b=new qt(new DynamicsCompressorNode(r(this,oe),ch),r(this,oe),"limiter"),P=new qt(fh(r(this,oe)),r(this,oe),"distortion"),R=new qt(ph(r(this,oe)),r(this,oe),"Delay",{createIOGains:!1}),B=new hh(r(this,oe)),C=new al(r(this,oe));W(this,zt,ll).call(this,{input:e,lpf:u,hpf:f,dryMix:n,wetMix:s,output:h,compressor:v,limiter:b,feedback:C,distortion:P,reverb:B,delay:R}),r(this,Os).call(this,"reverb"),r(this,Os).call(this,"delay"),W(this,zt,ul).call(this),m(this,ki,!0)}catch{}})()),r(this,br))}getNode(e){if(e.endsWith("_send")){const n=e.replace("_send","");return r(this,jt).get(n)}return r(this,vt)[e]}removeNode(e){if(r(this,vt)[e]){W(this,zt,da).call(this,e);for(const[n,s]of r(this,He)){const h=s.indexOf(e);h>-1&&(s.splice(h,1),r(this,He).set(n,s))}delete r(this,vt)[e],r(this,He).delete(e)}return this}noteOn(e,n=100,s=0,h=0){const u=this.getNode("feedback");u&&"trigger"in u&&typeof u.trigger=="function"&&u.trigger(e,{velocity:n,secondsFromNow:s,glideTime:h});const f=this.getNode("delay");return f==null||f.audioNode.sendProcessorMessage({type:"trigger"}),this}setSendAmount(e,n){const s=r(this,jt).get(e);if(!s)return console.warn(`Send effect ${e} not found`),this;const h=Math.max(0,Math.min(1,n));return s.setParam("gain",h),this}setHpfCutoff(e){var n;const s=ke(e,20,this.context.sampleRate/2-1e3);return(n=this.getNode("hpf"))==null||n.audioNode.frequency.setTargetAtTime(s,this.now,.1),this}setLpfCutoff(e){var n;const s=ke(e,20,this.context.sampleRate/2-1e3);return(n=this.getNode("lpf"))==null||n.audioNode.frequency.setTargetAtTime(s,this.now,.1),this}setCompressorParams(e){var n;const s=(n=this.getNode("compressor"))==null?void 0:n.audioNode;return e.threshold!==void 0&&s.threshold.setValueAtTime(e.threshold,this.now),e.knee!==void 0&&s.knee.setValueAtTime(e.knee,this.now),e.ratio!==void 0&&s.ratio.setValueAtTime(e.ratio,this.now),e.attack!==void 0&&s.attack.setValueAtTime(e.attack,this.now),e.release!==void 0&&s.release.setValueAtTime(e.release,this.now),this}setDryWetMix(e){var n,s;if(e.dry!==void 0){const h=Math.max(0,Math.min(1,e.dry));(n=this.getNode("dryMix"))==null||n.setParam("gain",h)}if(e.wet!==void 0){const h=Math.max(0,Math.min(1,e.wet));(s=this.getNode("wetMix"))==null||s.setParam("gain",h)}return this}setDelayTime(e){var n;const s=ke(e,0,5);return(n=this.getNode("delay"))==null||n.setParam("delayTime",s),this}setDelayFeedback(e){var n;const s=wt(e,0,1,0,.99);return(n=this.getNode("delay"))==null||n.setParam("feedbackAmount",s),this}setDelayCharacter(e){const n=this.getNode("delay");return n==null||n.audioNode.sendProcessorMessage({type:"setCharacter",modes:e}),this}setReverbSize(e){const n=this.getNode("reverb");return n&&"setAmountMacro"in n&&typeof n.setAmountMacro=="function"&&n.setAmountMacro(e),this}setReverbDecay(e){var n;return(n=this.getNode("reverb"))==null||n.setParam("decay",e),this}setDistortionMacro(e){const n=ke(e,0,1);this.setDrive(n);const s=wt(n,0,1,0,.95);this.setClippingMacro(s)}setDrive(e){var n;return(n=this.getNode("distortion"))==null||n.setParam("distortionDrive",e),this}setClippingMacro(e){const n=ke(e,0,1),s=this.getNode("distortion");s==null||s.setParam("clippingAmount",n);const h=wt(n,0,1,.25,.03);return s==null||s.setParam("clippingThreshold",h),this}setClippingMode(e){const n=this.getNode("distortion");n instanceof to&&n.sendProcessorMessage({type:"setLimitingMode",mode:e})}setFeedbackAmount(e){const n=this.getNode("feedback");return n&&"setAmountMacro"in n&&typeof n.setAmountMacro=="function"&&n.setAmountMacro(e),this}setFeedbackPitchScale(e){const n=this.getNode("feedback");return n&&"setDelayMultiplier"in n&&typeof n.setDelayMultiplier=="function"&&n.setDelayMultiplier(e),this}setFeedbackDecay(e){var n;return(n=this.getNode("feedback"))==null||n.setDecay(e),this}setFeedbackLowpassCutoff(e){var n;return(n=this.getNode("feedback"))==null||n.setLowpassCutoff(e),this}connect(e){var n;this.getNode("output").connect(e),"nodeId"in e&&(r(this,wr).add(e.nodeId),(n=e.addIncoming)==null||n.call(e,this.nodeId))}disconnect(e){var n;this.getNode("output").disconnect(e),e&&"nodeId"in e?(r(this,wr).delete(e.nodeId),(n=e.removeIncoming)==null||n.call(e,this.nodeId)):e||r(this,wr).clear()}addIncoming(e){r(this,Ti).add(e)}removeIncoming(e){r(this,Ti).delete(e)}setParam(e,n){switch(e){case"outputLevel":this.outputLevel=n;break;case"reverbAmount":this.setReverbSize(n);break;case"feedbackAmount":this.setFeedbackAmount(n);break;case"feedbackDecay":this.setFeedbackDecay(n);break;case"drive":this.setDrive(n);break;case"hpfCutoff":this.setHpfCutoff(n);break;case"lpfCutoff":this.setLpfCutoff(n);break;default:console.warn(`Parameter '${e}' not recognized on InstrumentMasterBus`);break}}getParam(e){var n,s;switch(e){case"outputLevel":return this.getNode("output").getParam("gain");case"hpfCutoff":return((n=this.getNode("hpf"))==null?void 0:n.getParam("frequency"))||null;case"lpfCutoff":return((s=this.getNode("lpf"))==null?void 0:s.getParam("frequency"))||null;default:return null}}getInput(){return this.getNode("input")}getOutput(){return this.getNode("output")}getLpf(){return this.getNode("lpf")}getHpf(){return this.getNode("hpf")}getDryMix(){return this.getNode("dryMix")}getWetMix(){return this.getNode("wetMix")}getCompressor(){return this.getNode("compressor")}getLimiter(){return this.getNode("limiter")}getDistortion(){return this.getNode("distortion")}getReverb(){return this.getNode("reverb")}getFeedback(){return this.getNode("feedback")}dispose(){for(const e of Object.keys(r(this,vt)))W(this,zt,da).call(this,e);m(this,vt,{}),r(this,He).clear(),r(this,jt).clear(),Ot(this.nodeId)}get audioNode(){return this.getNode("output").audioNode}get context(){return r(this,oe)}get connections(){return{outgoing:Array.from(r(this,wr)),incoming:Array.from(r(this,Ti))}}get input(){var e;return(e=this.getNode("input"))==null?void 0:e.audioNode}get output(){var e;return(e=this.getNode("output"))==null?void 0:e.audioNode}get now(){return r(this,oe).currentTime}set outputLevel(e){const n=Math.max(0,Math.min(1,e));this.getNode("output").setParam("gain",n)}get outputLevel(){const e=this.getNode("output").getParam("gain");return(e==null?void 0:e.value)||0}get initialized(){return r(this,ki)}get dryWetMix(){var e,n,s,h;return{dry:((n=(e=this.getNode("dryMix"))==null?void 0:e.getParam("gain"))==null?void 0:n.value)||0,wet:((h=(s=this.getNode("wetMix"))==null?void 0:s.getParam("gain"))==null?void 0:h.value)||0}}getSendAmount(e){var n;const s=r(this,jt).get(e);return((n=s==null?void 0:s.getParam("gain"))==null?void 0:n.value)??0}getRoutingMap(){const e={};for(const[n,s]of r(this,He))e[n]=[...s];return e}debugRouting(){console.debug("=== Bus Routing Map ===");for(const[e,n]of r(this,He))n.length>0&&console.debug(`${e} -> ${n.join(", ")}`);console.debug("======================")}debugSends(){console.debug("=== Sends ===");for(const[e]of r(this,jt)){const n=this.getSendAmount(e);console.debug(`${e}: Send=${n.toFixed(2)}}`)}console.debug("=================================")}listNodes(){return Object.keys(r(this,vt))}startLevelMonitoring(e=1e3,n=1024,s=!1){this.stopLevelMonitoring(),m(this,ln,new fu(r(this,oe),this.getNode("input").audioNode,this.getNode("output").audioNode,n)),r(this,ln).start(e,void 0,s),console.log("Level monitoring started")}stopLevelMonitoring(){r(this,ln)&&(r(this,ln).stop(),m(this,ln,null),console.log("Level monitoring stopped"))}logLevels(){let e=r(this,ln);e===null&&(e=new fu(r(this,oe),this.getNode("input").audioNode,this.getNode("output").audioNode));const n=e.getLevels();console.log(`Levels: Input RMS ${n.input.rmsDB.toFixed(1)} dB | Output RMS ${n.output.rmsDB.toFixed(1)} dB`)}onMessage(e,n){return r(this,Ds).onMessage(e,n)}}Ds=new WeakMap,oe=new WeakMap,ki=new WeakMap,br=new WeakMap,vt=new WeakMap,He=new WeakMap,jt=new WeakMap,wr=new WeakMap,Ti=new WeakMap,un=new WeakMap,zt=new WeakSet,ul=function(){r(this,un).call(this,["input","hpf","feedback","dryMix"]),r(this,un).call(this,["feedback","delay_send","delay","wetMix"]),r(this,un).call(this,["delay","reverb_send"]),r(this,un).call(this,["feedback","reverb_send","reverb","wetMix"]),r(this,un).call(this,["wetMix","distortion"]),W(this,zt,ha).call(this,"dryMix","distortion"),r(this,un).call(this,["distortion","compressor","lpf","limiter","output"])},ha=function(l,e){const n=l.endsWith("_send")?this.getNode(l):this.getNode(l),s=e.endsWith("_send")?this.getNode(e):this.getNode(e);if(!n||!s)return console.warn(`Cannot connect ${l} -> ${e}: node not found`),this;n.connect(s);const h=r(this,He).get(l)||[];return h.includes(e)||(h.push(e),r(this,He).set(l,h)),this},da=function(l,e){const n=r(this,vt)[l];if(!n)return this;if(e){const s=r(this,vt)[e];if(s){n.disconnect(s);const h=r(this,He).get(l)||[],u=h.indexOf(e);u>-1&&(h.splice(u,1),r(this,He).set(l,h))}}else n.disconnect(),r(this,He).set(l,[]);return this},Os=new WeakMap,Eu=function(l,e){r(this,vt)[l]=e,r(this,He).set(l,[])},ll=function(l){return Object.keys(l).forEach(e=>{const n=l[e];n!==void 0&&W(this,zt,Eu).call(this,e,n)}),this},ln=new WeakMap;async function gh(l){const e=new mh(l);return await e.init(),e}function vh(l,e){localStorage.setItem(l,e.toString())}function yh(l,e){const n=localStorage.getItem(l);return n===null?e:typeof e=="number"?Number(n):n}const Te={NOT_READY:"NOT_READY",LOADED:"LOADED",PLAYING:"PLAYING",RELEASING:"RELEASING",STOPPING:"STOPPING",STOPPED:"STOPPED"};var Br,Vn,jr,Qe,Ne,Et,St,ue,we,Js,ye,Ns,Vi,Rs,gn,Ar,rt,it,Fr,fa,yn,pa,Bs,Fs,de,cl,hl,ma,dl,cn,Pr,Mr,Cs,fl,Iu,pl;class bh{constructor(e=bn(),n={}){w(this,de),V(this,"nodeId"),V(this,"nodeType","sample-voice"),w(this,Br),w(this,Vn,null),w(this,jr),w(this,Qe),w(this,Ne,null),w(this,Et,null),w(this,St,null),w(this,ue,new Map),w(this,we,Te.NOT_READY),w(this,Js,!1),w(this,ye,null),w(this,Ns,-1),w(this,Vi,0),w(this,Rs,0),w(this,gn),w(this,Ar,!1),w(this,rt,null),w(this,it,null),w(this,Fr,40),w(this,fa,.5),w(this,yn,18e3),w(this,pa,.707),w(this,Bs,0),w(this,Fs,.5),V(this,"logAvailableParams",()=>{console.table("Available worklet params:",Array.from(r(this,Qe).parameters.keys()))}),w(this,cn,null),V(this,"enableEnvelope",s=>{var h;(h=r(this,ue).get(s))==null||h.enable()}),V(this,"disableEnvelope",s=>{var h;if((h=r(this,ue).get(s))==null||h.disable(),s==="filter-env"&&r(this,gn)){const u=this.getParam("lpf");u==null||u.cancelScheduledValues(this.now),u==null||u.setValueAtTime(r(this,yn),this.now+.01)}}),V(this,"setEnvelopeTimeScale",(s,h)=>{var u;(u=r(this,ue).get(s))==null||u.setTimeScale(h)}),V(this,"setEnvelopeSustainPoint",(s,h)=>{const u=r(this,ue).get(s);u!=null&&u.isEnabled&&u.setSustainPoint(h)}),V(this,"setEnvelopeReleasePoint",(s,h)=>{const u=r(this,ue).get(s);u!=null&&u.isEnabled&&u.setReleasePoint(h)}),V(this,"getEnvelope",s=>r(this,ue).get(s)),V(this,"setStartPoint",(s,h=this.now)=>{this.setParam("startPoint",s,h)}),V(this,"setEndPoint",(s,h=this.now)=>{this.setParam("endPoint",s,h)}),V(this,"disablePitch",()=>{var s;m(this,Ar,!0);const h=this.now,u=.1;(s=this.getParam("playbackRate"))==null||s.linearRampToValueAtTime(1,h+u),W(this,de,Pr).call(this,1,h,{glideTime:u}),W(this,de,Mr).call(this,1,h,{glideTime:u})}),V(this,"enablePitch",()=>{var s;m(this,Ar,!1);const h=this.now,u=.1;if(r(this,ye)){const f=zo(r(this,ye));(s=this.getParam("playbackRate"))==null||s.linearRampToValueAtTime(f,this.context.currentTime+.01),W(this,de,Pr).call(this,f,h,{glideTime:u}),W(this,de,Mr).call(this,f,h,{glideTime:u})}}),V(this,"setEnvelopeLoop",(s,h,u="normal")=>{const f=r(this,ue).get(s);return f==null||f.setLoopEnabled(h,u),this}),V(this,"syncEnvelopeToPlaybackRate",(s,h)=>{const u=r(this,ue).get(s);return u==null||u.syncToPlaybackRate(h),this}),V(this,"setPanDriftEnabled",s=>this.sendToProcessor({type:"setPanDriftEnabled",value:s})),this.context=e,this.nodeId=Dt(this.nodeType,this),m(this,Br,wn(this.nodeId)),m(this,gn,n.enableFilters??!0),m(this,jr,new GainNode(e,{gain:1})),m(this,Qe,new AudioWorkletNode(e,"sample-player-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],processorOptions:n.processorOptions||{}}))}async init(){return r(this,Vn)?r(this,Vn):(m(this,Vn,(async()=>{try{r(this,gn)&&W(this,de,hl).call(this),m(this,St,new al(this.context)),m(this,Et,new GainNode(this.context,{gain:1})),W(this,de,Cs).call(this),this.setParam("loopStart",0,this.now),this.setParam("loopEnd",0,this.now),W(this,de,cl).call(this),W(this,de,ma).call(this),W(this,de,pl).call(this),r(this,Qe).port.start()}catch(e){throw this.dispose(),m(this,Vn,null),e}})()),r(this,Vn))}async loadBuffer(e,n){if(m(this,we,Te.NOT_READY),e.sampleRate!==this.context.sampleRate)return console.warn(`Sample rate mismatch - buffer: ${e.sampleRate}, context: ${this.context.sampleRate}`),!1;const s=Array.from({length:e.numberOfChannels},(h,u)=>e.getChannelData(u).slice());return this.sendToProcessor({type:"voice:setBuffer",buffer:s,durationSeconds:e.duration}),n!=null&&n.length&&(W(this,de,dl).call(this,n),this.sendToProcessor({type:"voice:setZeroCrossings",zeroCrossings:n})),!0}setGlideTime(e){m(this,Rs,e)}trigger(e){var n,s,h,u;const{midiNote:f=60,velocity:v=100,secondsFromNow:b=0}={...e},P=this.now+b;if(r(this,we)===Te.PLAYING||r(this,we)===Te.RELEASING)return console.log(`had to stop a playing voice, midinote: ${f}`),this.stop(P),null;m(this,we,Te.PLAYING),m(this,Ns,P),m(this,ye,f);const R=(((n=e.glide)==null?void 0:n.glideTime)??r(this,Rs))/8;let B=1,C=1;if(r(this,Ar)||(B=zo(f),e.glide&&(C=zo(e.glide.prevMidiNote)),W(this,de,Pr).call(this,B,P,{glideTime:R}),W(this,de,Mr).call(this,B,P,{glideTime:R})),!r(this,Ar)&&e.glide&&R>0){const Z=this.getParam("playbackRate");C>0&&Z.setValueAtTime(C,P),this.getParam("playbackRate").setTargetAtTime(B,P,R)}else this.setParam("playbackRate",B,P);return this.setParam("velocity",v,P),this.sendToProcessor({type:"voice:start",timestamp:P}),this.applyEnvelopes(P,B,f),(s=r(this,St))==null||s.trigger(f,{velocity:v,secondsFromNow:b,glideTime:R,triggerDecay:!0}),(u=r(this,Ne))==null||u.setMusicalNote(f,{divisor:1,glideTime:R,glideFromMidiNote:(h=e==null?void 0:e.glide)==null?void 0:h.prevMidiNote,timestamp:P}),r(this,ye)}applyEnvelopes(e,n,s,h){r(this,ue).forEach((b,P)=>{if(!b.isEnabled)return;const R=this.getParam(b.param);if(!R||P==="pitch-env"&&!b.hasVariation())return;const B=(()=>{switch(P){case"amp-env":return s?s/127:1;case"pitch-env":return n;case"filter-env":return r(this,yn);default:return 1}})();b.triggerEnvelope(R,e,{baseValue:B,playbackRate:n,voiceId:this.nodeId,midiNote:h??60})});const u=r(this,ue).get("amp-env"),f=r(this,ue).get("pitch-env"),v=r(this,ue).get("filter-env");this.sendUpstreamMessage("sample-envelopes:trigger",{voiceId:this.nodeId,midiNote:r(this,ye),envDurations:{"amp-env":u.syncedToPlaybackRate?u.baseDuration/n/u.timeScale:u.baseDuration/u.timeScale,"pitch-env":f.syncedToPlaybackRate?f.baseDuration/n/f.timeScale:f.baseDuration/f.timeScale,"filter-env":v.syncedToPlaybackRate?v.baseDuration/n/v.timeScale:v.baseDuration/v.timeScale},loopEnabled:{"amp-env":u.loopEnabled,"pitch-env":f.loopEnabled,"filter-env":v.loopEnabled}})}release({releaseTime:e=this.releaseTime,secondsFromNow:n=0}){var s;if(r(this,we)===Te.RELEASING)return this;if(!this.getParam("envGain"))throw new Error("Cannot release - envGain parameter is null");m(this,we,Te.RELEASING);const h=this.now+n,u=((s=this.getParam("playbackRate"))==null?void 0:s.value)??1;if(r(this,ue).forEach(b=>{if(!b.isEnabled)return;const P=this.getParam(b.param);P&&b.releaseEnvelope(P,h,{playbackRate:u,voiceId:this.nodeId,midiNote:r(this,ye)??60})}),e<=0)return this.stop(h);this.sendToProcessor({type:"voice:release",timestamp:h});const f=Array.from(r(this,ue).values()).filter(b=>b.isEnabled),v=f.length>0?Math.max(...f.map(b=>b.effectiveReleaseDuration)):e;return r(this,cn)&&clearTimeout(r(this,cn)),m(this,cn,setTimeout(()=>{try{(r(this,we)===Te.RELEASING||r(this,we)===Te.PLAYING)&&this.stop()}finally{m(this,cn,null)}},v*1e3+50)),this}stop(e=this.now){return r(this,we)===Te.STOPPED||r(this,we)===Te.STOPPING?this:(m(this,we,Te.STOPPING),this.setParam("envGain",0,e,{cancelPrevious:!0,glideTime:0}),this.sendToProcessor({type:"voice:stop",timestamp:e}),m(this,we,Te.STOPPED),this)}setModulationAmount(e,n){var s;const h=wt(n,0,1,0,.95,{warn:!0,name:"sampleVoice.setModulationAmount"});return e==="AM"?(r(this,Ne)||W(this,de,Cs).call(this,h),(s=r(this,Ne))==null||s.setDepth(h)):e==="FM"&&console.warn("SampleVoice: FM modulation not implemented yet"),this}setModulationWaveform(e="AM",n="triangle",s={}){var h;return e==="AM"?(r(this,Ne)||W(this,de,Cs).call(this),(h=r(this,Ne))==null||h.setWaveform(n,s)):e==="FM"&&console.info("SampleVoice: FM modulation not implemented yet"),this}addEnvelopePoint(e,n,s){const h=r(this,ue).get(e);h!=null&&h.isEnabled&&h.addPoint(n,s)}updateEnvelopePoint(e,n,s,h){const u=r(this,ue).get(e);u!=null&&u.isEnabled&&u.updatePoint(n,s,h)}deleteEnvelopePoint(e,n){const s=r(this,ue).get(e);s!=null&&s.isEnabled&&s.deletePoint(n)}get envelopes(){return r(this,ue)}setParam(e,n,s=this.now,h={}){const u=this.getParam(e);if(!u||u.value===n)return this;const{glideTime:f=0,cancelPrevious:v=!0}=h;return v&&u.cancelScheduledValues(s),f<=0?u.setValueAtTime(n,Math.max(s,this.now+.001)):u.linearRampToValueAtTime(n,s+Math.max(f,.001)),this}setParams(e,n,s={}){const h=e.filter(u=>this.getParam(u.name)!==null);return h.length===0?this:(h.forEach(({name:u,value:f})=>{this.setParam(u,f,n,{...s})}),this)}setLoopPoints(e,n,s=this.now,h=0){return e>=n?this:(e!==void 0&&this.setParam("loopStart",e,s,{glideTime:h,cancelPrevious:!0}),n!==void 0&&this.setParam("loopEnd",n,s,{glideTime:h,cancelPrevious:!0}),this)}syncLoopToTempo(e){return this.sendToProcessor({type:"syncLoopToTempo",value:e}),this}setTempo(e){return this.setParam("tempo",e,this.now),this}setAllowedPeriods(e){return this.sendToProcessor({type:"setAllowedPeriods",allowedPeriods:e}),this}connect(e,n,s){return e instanceof qt?this.out.connect(e.input,n):e instanceof AudioParam?this.out.connect(e,n):e instanceof AudioNode?this.out.connect(e,n,s):console.warn(`SampleVoice: Unsupported destination: ${e}`),e}disconnect(e="main",n){return e==="alt"?(console.warn('SampleVoice has no "alt" output to disconnect'),this):(n?n instanceof AudioNode?this.out.disconnect(n):n instanceof AudioParam&&this.out.disconnect(n):this.out.disconnect(),this)}onMessage(e,n){return r(this,Br).onMessage(e,n)}sendToProcessor(e){return r(this,Qe).port.postMessage(e),this}sendUpstreamMessage(e,n){return r(this,Br).sendMessage(e,n),this}getPlaybackDuration(){const e=this.getParam("startPoint").value;return this.getParam("endPoint").value-e}get isActive(){return r(this,ye)!==null}get feedback(){return r(this,St)}get currMidiNote(){return r(this,ye)}get hpf(){return r(this,rt)}get lpf(){return r(this,it)}get in(){return null}get out(){return r(this,jr)}get state(){return r(this,we)}get initialized(){return r(this,Js)}get now(){return this.context.currentTime}get activeNoteId(){return r(this,ye)}get triggerTimestamp(){return r(this,Ns)}get sampleDurationSeconds(){return r(this,Vi)}get startPoint(){return this.getParam("startPoint").value}get endPoint(){return this.getParam("endPoint").value}get releaseTime(){return r(this,ue).get("amp-env").effectiveReleaseDuration}setMasterGain(e){const n=r(this,Qe).parameters.get("masterGain");n.cancelScheduledValues(this.context.currentTime),n.setTargetAtTime(e,this.context.currentTime,.006)}enablePositionTracking(e){return this.sendToProcessor({type:"voice:usePlaybackPosition",value:e}),this}setLoopEnabled(e){return this.sendToProcessor({type:"setLoopEnabled",value:e}),!e&&r(this,ye)&&this.release({}),this}setPlaybackRate(e,n=this.now,s){return this.setParam("playbackRate",e,n,s),W(this,de,Pr).call(this,e,n,s),W(this,de,Mr).call(this,e,n,s),this}setHpfCutoff(e,n=this.now,s={}){var h;const u=ke(e,20,this.context.sampleRate/2-1e3);if(m(this,Fr,u),r(this,rt)){this.setParam("hpf",u,n,{glideTime:0});const f=((h=this.getParam("playbackRate"))==null?void 0:h.value)??1;W(this,de,Pr).call(this,f,n,s)}return this}setLpfCutoff(e,n=this.now,s={}){var h;const u=ke(e,20,this.context.sampleRate/2-1e3);if(m(this,yn,u),r(this,it)){this.setParam("lpf",u,n,{glideTime:0,cancelPrevious:!0});const f=((h=this.getParam("playbackRate"))==null?void 0:h.value)??1;W(this,de,Mr).call(this,f,n,s)}return this}setPlaybackDirection(e){return this.sendToProcessor({type:"voice:setPlaybackDirection",playbackDirection:e}),this}setLoopDurationDriftAmount(e){if(e===0)return this.setParam("loopDurationDriftAmount",0,this.now),this;const n=Qc(e,{inputRange:{min:0,max:1},outputRange:{min:1e-4,max:1},blend:1,curve:"linear"});return this.setParam("loopDurationDriftAmount",n,this.now),this}debugDuration(){console.info(`
      sample duration: ${this.sampleDurationSeconds}, 
      startPoint: ${this.getParam("startPoint").value}, 
      endPoint: ${this.getParam("endPoint").value}, 
      playback duration: ${this.getPlaybackDuration()}
      `)}dispose(){this.stop(),this.disconnect(),W(this,de,fl).call(this),r(this,ue).forEach(e=>e.dispose()),r(this,Qe).port.close(),r(this,cn)&&clearTimeout(r(this,cn)),Ot(this.nodeId)}getParam(e){var n,s,h,u;if(r(this,Qe)&&r(this,Qe).parameters.has(e))return r(this,Qe).parameters.get(e)??null;if(r(this,gn))switch(e){case"highpass":case"hpf":return((n=r(this,rt))==null?void 0:n.frequency)||null;case"lowpass":case"lpf":return((s=r(this,it))==null?void 0:s.frequency)||null;case"hpfQ":return((h=r(this,rt))==null?void 0:h.Q)||null;case"lpfQ":return((u=r(this,it))==null?void 0:u.Q)||null}return null}}Br=new WeakMap,Vn=new WeakMap,jr=new WeakMap,Qe=new WeakMap,Ne=new WeakMap,Et=new WeakMap,St=new WeakMap,ue=new WeakMap,we=new WeakMap,Js=new WeakMap,ye=new WeakMap,Ns=new WeakMap,Vi=new WeakMap,Rs=new WeakMap,gn=new WeakMap,Ar=new WeakMap,rt=new WeakMap,it=new WeakMap,Fr=new WeakMap,fa=new WeakMap,yn=new WeakMap,pa=new WeakMap,Bs=new WeakMap,Fs=new WeakMap,de=new WeakSet,cl=function(){st(r(this,St),"SampleVoice: Feedback not initialized!"),st(r(this,Et),"SampleVoice: AM mod not initialized!"),r(this,gn)?(st(r(this,rt)&&r(this,it),"SampleVoice: Filters not initialized!"),r(this,Qe).connect(r(this,Et)),r(this,Et).connect(r(this,St).input),r(this,St).output.connect(r(this,rt)),r(this,rt).connect(r(this,it)),r(this,it).connect(r(this,jr))):(r(this,Qe).connect(r(this,St).input),r(this,St).output.connect(r(this,Et)),r(this,Et).connect(r(this,jr)))},hl=function(){m(this,Fr,40),m(this,yn,this.context.sampleRate/2-1e3),r(this,rt)||m(this,rt,new BiquadFilterNode(this.context,{type:"highpass",frequency:r(this,Fr),Q:r(this,fa)})),r(this,it)||m(this,it,new BiquadFilterNode(this.context,{type:"lowpass",frequency:r(this,yn),Q:r(this,pa)}))},ma=function(){r(this,ue).forEach(s=>s.dispose()),r(this,ue).clear();const l=r(this,Vi)||void 0,e=Zo(this.context,"amp-env",{durationSeconds:l});r(this,ue).set("amp-env",e);const n=Zo(this.context,"pitch-env",{durationSeconds:l});if(r(this,ue).set("pitch-env",n),r(this,gn)){const s=Zo(this.context,"filter-env",{durationSeconds:l,envPointValueRange:[0,1],initEnable:!1});r(this,ue).set("filter-env",s)}W(this,de,Iu).call(this)},dl=function(l){return this.sendToProcessor({type:"voice:set_zero_crossings",zeroCrossings:l}),this},cn=new WeakMap,Pr=function(l,e=this.now,n={}){if(!r(this,ye)||!r(this,rt)||r(this,Fs)<=0)return;const s=r(this,rt).frequency,{glideTime:h=0,cancelPrevious:u=!0}=n||{};u&&s.cancelScheduledValues(e);const f=r(this,Fr)*l*r(this,Fs),v=ke(f,20,this.context.sampleRate/2-1e3);h>0?s.setTargetAtTime(v,e,h):s.setValueAtTime(v,Math.max(e,this.now+.001))},Mr=function(l,e=this.now,n={}){if(!r(this,ye)||!r(this,it)||r(this,Bs)<=0)return;const s=r(this,it).frequency,{glideTime:h=0,cancelPrevious:u=!0}=n||{};u&&s.cancelScheduledValues(e);const f=r(this,yn)*l*r(this,Bs),v=ke(f,20,this.context.sampleRate/2-1e3);h>0?s.setTargetAtTime(v,e,h):s.setValueAtTime(v,Math.max(e,this.now+.001))},Cs=function(l=0,e="square",n={}){if(r(this,Ne)===null)if(m(this,Ne,new ia(this.context)),r(this,Ne).setWaveform(e,n),r(this,Ne).setDepth(l),r(this,Ne).setMusicalNote(r(this,ye)??60),r(this,Et))r(this,Ne).connect(r(this,Et).gain);else throw console.error("Missing gain node for AM-LFO in SampleVoice"),new Error("Missing gain node for AM-LFO in SampleVoice");else console.debug("setupAmpModLFO: LFO already setup: ",r(this,Ne));return this},fl=function(){if(r(this,Ne))return r(this,Ne).dispose(),m(this,Ne,null),this},Iu=function(){r(this,ue).forEach((l,e)=>{r(this,Br).forwardFrom(l,[`${e}:trigger`,`${e}:release`,`${e}:trigger:loop`,`${e}:created`],n=>({...n,voiceId:this.nodeId,midiNote:r(this,ye)}))})},pl=function(){r(this,Qe).port.onmessage=l=>{var e;let{type:n,...s}=l.data;switch(n){case"initialized":m(this,Js,!0),m(this,we,Te.NOT_READY),this.sendUpstreamMessage("voice:initialized",{voice:this,voiceId:this.nodeId});break;case"voice:loaded":m(this,ye,null),s.durationSeconds&&(m(this,Vi,s.durationSeconds),W(this,de,ma).call(this),this.setStartPoint(0),this.setEndPoint(s.durationSeconds)),m(this,we,Te.LOADED);break;case"voice:started":m(this,we,Te.PLAYING),s={voice:this,midiNote:r(this,ye)};break;case"voice:stopped":m(this,we,Te.STOPPED),s={voiceId:this.nodeId,voice:this,midiNote:r(this,ye)},m(this,ye,null);break;case"voice:releasing":m(this,we,Te.RELEASING),s={voiceId:this.nodeId,voice:this,midiNote:r(this,ye)};break;case"loop:enabled":break;case"voice:looped":break;case"voice:playbackDirectionChange":break;case"voice:position":(e=this.getParam("playbackPosition"))==null||e.setValueAtTime(s.position,this.context.currentTime);break;case"debug:params":console.debug("Debug params: ",{loopStart:s.loopStart},{loopStartSamples:s.loopStartSamples},{loopEnd:s.loopEnd},{loopEndSamples:s.loopEndSamples});break;case"debug:loop":console.log("Loop debug:",s);break;default:console.warn(`Unhandled message type: ${n}`);break}this.sendUpstreamMessage(n,s)}};async function wh(l,e){const n=new bh(l,e);return await n.init(),n}async function Ah(l,e,n){const s=Array.from({length:l},()=>wh(e,n));return Promise.all(s)}var Cr,Vs,kr,hn,Ws,Ie,Lr,Ge,ht,At,Ye,xi,qs,Ei,Vr,ml,ga,Su,Ho;class Ph{constructor(e,n){w(this,Vr),V(this,"nodeId"),V(this,"nodeType","pool"),w(this,Cr),w(this,Vs),w(this,kr,!1),w(this,hn,null),w(this,Ws),w(this,Ie,[]),w(this,Lr,new Set),w(this,Ge,new Set),w(this,ht,new Set),w(this,At,new Set),w(this,Ye,new Map),w(this,xi,1),w(this,qs,new Set),w(this,Ei,new Map),V(this,"prevMidiNote",60),w(this,ga,.4),this.nodeId=Dt(this.nodeType,this),m(this,Cr,wn(this.nodeId)),m(this,Vs,e),m(this,Ws,n)}async init(){if(!r(this,kr))return r(this,hn)?r(this,hn):(m(this,hn,(async()=>{try{m(this,Ie,await Ah(r(this,Ws),r(this,Vs))),r(this,Ie).forEach(e=>{r(this,Ge).add(e),W(this,Vr,ml).call(this,e)}),m(this,kr,!0)}catch(e){r(this,Ie).forEach(s=>s.dispose()),m(this,Ie,[]),r(this,Ge).clear(),m(this,hn,null);const n=e instanceof Error?e.message:String(e);throw new Error(`Failed to initialize SamplePlayer: ${n}`)}})()),r(this,hn))}connect(e){r(this,Ie).forEach(n=>{n.connect(e)})}disconnect(){r(this,Ie).forEach(e=>{e.disconnect()})}onMessage(e,n){return r(this,Cr).onMessage(e,n)}sendUpstreamMessage(e,n){return r(this,Cr).sendMessage(e,n),this}setBuffer(e,n){return r(this,Lr).clear(),r(this,Ie).forEach(s=>s.loadBuffer(e,n)),this}allocate(e=r(this,Ge),n=r(this,At),s=r(this,ht)){let h;if(e.size?h=Qo(e):n.size?(h=Qo(n),h==null||h.stop()):s.size&&(h=Qo(s),h==null||h.stop()),!h)throw new Error("Could not allocate voice");return h}noteOn(e,n=100,s=0,h=0){const u=this.allocate();return u.trigger({midiNote:e,velocity:n,secondsFromNow:s,glide:{prevMidiNote:this.prevMidiNote,glideTime:h}})?(r(this,Ye).set(e,u),this.prevMidiNote=e,e):null}noteOff(e,n=0,s){const h=r(this,Ye).get(e);if(h)return(h==null?void 0:h.state)===Te.PLAYING&&h.release({secondsFromNow:n,releaseTime:s}),this}allNotesOff(e=0){return r(this,Ye).forEach(n=>{n.release({releaseTime:e})}),r(this,Ye).clear(),this}applyToAllVoices(e){r(this,Ie).forEach(n=>e(n))}applyToActiveVoices(e){r(this,Ye).forEach(n=>e(n))}applyToInactiveVoices(e){r(this,Ge).forEach(n=>e(n))}applyToActiveNote(e,n){const s=r(this,Ye).get(e);s?n(s):console.warn(`No active voice found for midiNote: ${e}`)}debug(){console.debug(`
      releasing: ${r(this,At).size}
      playing: ${r(this,ht).size}
      available: ${r(this,Ge).size}
      Sum: ${r(this,At).size+r(this,ht).size+r(this,Ge).size}
      Sum should be: ${this.allVoicesCount}
      `,{midiToVoiceMap:r(this,Ye)})}dispose(){this.applyToAllVoices(e=>e.dispose()),m(this,Ie,[]),r(this,Ye).clear(),r(this,Ge).clear(),r(this,At).clear(),r(this,ht).clear(),r(this,Lr).clear(),m(this,kr,!1),m(this,hn,null),Ot(this.nodeId)}get initialized(){return r(this,kr)}get availableVoices(){return r(this,Ge)}get playingVoicesCount(){return r(this,ht).size}get releasingVoicesCount(){return r(this,At).size}get availableVoicesCount(){return r(this,Ge).size}get allVoices(){return r(this,Ie)}get allVoicesCount(){return r(this,Ie).length}get assignedVoicesMidiMap(){return r(this,Ye)}}Cr=new WeakMap,Vs=new WeakMap,kr=new WeakMap,hn=new WeakMap,Ws=new WeakMap,Ie=new WeakMap,Lr=new WeakMap,Ge=new WeakMap,ht=new WeakMap,At=new WeakMap,Ye=new WeakMap,xi=new WeakMap,qs=new WeakMap,Ei=new WeakMap,Vr=new WeakSet,ml=function(l){l.onMessage("voice:started",e=>{r(this,Ge).delete(e.voice),r(this,At).delete(e.voice),r(this,ht).add(e.voice),W(this,Vr,Ho).call(this),r(this,Ye).set(e.midiNote,e.voice)}),l.onMessage("voice:releasing",e=>{r(this,Ge).delete(e.voice),r(this,ht).delete(e.voice),r(this,At).add(e.voice)}),l.onMessage("voice:stopped",e=>{r(this,ht).delete(e.voice),r(this,At).delete(e.voice),W(this,Vr,Ho).call(this),r(this,Ge).add(e.voice),e.midiNote!==void 0&&r(this,Ye).get(e.midiNote)===e.voice&&r(this,Ye).delete(e.midiNote)}),l.onMessage("voice:initialized",e=>{r(this,qs).add(e.voice),r(this,qs).size===r(this,Ie).length&&this.sendUpstreamMessage("voice-pool:initialized",{voiceCount:r(this,Ie).length})}),["amp-env","pitch-env","filter-env"].forEach(e=>{l.onMessage(`${e}:created`,n=>{r(this,Ei).has(e)||r(this,Ei).set(e,new Set);const s=r(this,Ei).get(e);s.add(n.voice),s.size===r(this,Ie).length&&this.sendUpstreamMessage(`${e}:created`,{envType:e,voiceCount:r(this,Ie).length})})}),r(this,Cr).forwardFrom(l,["voice:initialized","voice:started","voice:stopped","voice:releasing","voice:loaded","amp-env:trigger","amp-env:trigger:loop","amp-env:release","pitch-env:trigger","pitch-env:trigger:loop","pitch-env:release","filter-env:trigger","filter-env:trigger:loop","filter-env:release","amp-env:created","pitch-env:created","filter-env:created"],e=>e.type==="voice:loaded"?(r(this,Lr).add(e.senderId),r(this,Lr).size===r(this,Ie).length?{...e,type:"sample:loaded"}:null):e)},ga=new WeakMap,Su=function(){const l=r(this,ht).size+r(this,At).size;if(l===0){m(this,xi,1);return}m(this,xi,1/(1+Math.log10(l)*r(this,ga))),[...r(this,ht)].forEach(e=>{e.setMasterGain(r(this,xi))})},Ho=function(){W(this,Vr,Su).call(this)};async function Mh(l,e){const n=new Ph(l,e);return await n.init(),n}var Wr,va,ya,Tr,xr,qr,js,Ii,tt,Er,Si,Di,vn,Wn,Ir,Oi,qn,Ls,ze,De,Oe,yt,lt,jn,Sr,Ks,ba,wa,Us,zs,Ln,Qs,Aa,Gs,Kt,gl,vl,yl,Pa,bl,Du,Ni,Kn;class kh{constructor(e,n=16,s,h){w(this,Kt),V(this,"nodeId"),V(this,"nodeType","sample-player"),V(this,"context"),w(this,Wr),w(this,va,new Xu),w(this,ya,100),w(this,Tr,!1),w(this,xr,null),w(this,qr,!1),w(this,js),w(this,Ii,null),w(this,tt,null),w(this,Er,new Set),w(this,Si,new Set),w(this,Di,null),w(this,vn,0),w(this,Wn,!1),w(this,Ir,!1),w(this,Oi,!1),w(this,qn,!1),w(this,Ls,!1),w(this,ze),w(this,De),w(this,Oe),w(this,yt,null),w(this,lt,null),w(this,jn,0),w(this,Sr,120),w(this,Ks,!1),w(this,ba,300),w(this,wa,20),w(this,Us,!1),w(this,zs,!1),w(this,Ln,[]),w(this,Qs,!0),w(this,Aa,!0),V(this,"randomizeVelocity",!1),V(this,"voicePool"),V(this,"outBus"),w(this,Gs,"microphone"),V(this,"setModulationAmount",(u,f)=>this.voicePool.applyToAllVoices(v=>v.setModulationAmount(u,f))),V(this,"panic",u=>this.releaseAll(u)),w(this,Ni,!1),V(this,"sustainPedalOn",()=>this.setSustainPedal(!0)),V(this,"sustainPedalOff",()=>this.setSustainPedal(!1)),V(this,"setPanDriftEnabled",u=>(this.voicePool.applyToAllVoices(f=>f.setPanDriftEnabled(u)),this.storeParamValue("panDriftEnabled",u),this)),V(this,"isNormalized",(u,f=[0,1])=>u>=f[0]&&u<=f[1]),V(this,"MIN_LOOP_DURATION_SECONDS",1/523.25),V(this,"setLoopStart",(u,f=this.getLoopRampDuration())=>this.setLoopPoint("start",u,this.loopEnd,f)),V(this,"setLoopEnd",(u,f=this.getLoopRampDuration())=>this.setLoopPoint("end",this.loopStart,u,f)),V(this,"setLoopDuration",(u,f=this.getLoopRampDuration())=>this.setLoopPoint("end",this.loopStart,this.loopStart+u,f)),V(this,"debugcounter",0),V(this,"getHpfCutoff",()=>this.getStoredParamValue("hpfCutoff",NaN)),V(this,"getLpfCutoff",()=>this.getStoredParamValue("lpfCutoff",NaN)),V(this,"enablePitch",()=>this.voicePool.allVoices.forEach(u=>u.enablePitch())),V(this,"disablePitch",()=>this.voicePool.allVoices.forEach(u=>u.disablePitch())),V(this,"enableEnvelope",u=>{this.voicePool.applyToAllVoices(f=>f.enableEnvelope(u))}),V(this,"disableEnvelope",u=>{this.voicePool.applyToAllVoices(f=>f.disableEnvelope(u))}),V(this,"setEnvelopeLoop",(u,f,v="normal")=>{this.voicePool.applyToAllVoices(b=>b.setEnvelopeLoop(u,f,v))}),V(this,"setEnvelopeSync",(u,f)=>{this.voicePool.applyToAllVoices(v=>v.syncEnvelopeToPlaybackRate(u,f))}),V(this,"setEnvelopeTimeScale",(u,f)=>{this.voicePool.applyToAllVoices(v=>v.setEnvelopeTimeScale(u,f))}),V(this,"setDryWetMix",u=>{this.outBus.setDryWetMix(u)}),V(this,"sendToFx",(u,f)=>{this.outBus.setSendAmount(u,f)}),V(this,"setLpfCutoff",(u,f="pre")=>{f==="pre"?this.voicePool.applyToAllVoices(v=>{v.setLpfCutoff(u)}):f==="post"&&this.outBus.setLpfCutoff(u)}),V(this,"setHpfCutoff",(u,f="pre")=>{f==="pre"?this.voicePool.applyToAllVoices(v=>{v.setHpfCutoff(u)}):f==="post"&&this.outBus.setHpfCutoff(u)}),V(this,"setReverbAmount",u=>{this.outBus.setReverbSize(u)}),V(this,"setFeedbackAmount",u=>{u=ke(u,0,1),(r(this,Kn)==="monophonic"||r(this,Kn)==="double-trouble")&&this.outBus.setFeedbackAmount(u),(r(this,Kn)==="polyphonic"||r(this,Kn)==="double-trouble")&&this.voicePool.applyToAllVoices(f=>{var v;(v=f.feedback)==null||v.setAmountMacro(u)})}),w(this,Kn,"monophonic"),this.nodeId=Dt("sample-player",this),this.context=e,m(this,Wr,wn(this.nodeId)),m(this,tt,h||null),m(this,ze,new GainNode(this.context,{gain:.5})),m(this,De,new Pu(this.context,ft.LOOP_START)),m(this,Oe,new Pu(this.context,ft.LOOP_END)),m(this,js,n),m(this,Ii,s||null)}async init(){if(!r(this,Tr))return r(this,xr)?r(this,xr):(m(this,xr,(async()=>{var e,n,s;try{this.outBus=await gh(this.context),this.voicePool=await Mh(this.context,r(this,js)),W(this,Kt,Pa).call(this),W(this,Kt,gl).call(this),W(this,Kt,yl).call(this),W(this,Kt,bl).call(this),W(this,Kt,vl).call(this),r(this,Ii)&&await this.loadSample(r(this,Ii),void 0,{skipPreProcessing:!0}),m(this,Tr,!0)}catch(h){(e=this.voicePool)==null||e.dispose(),(n=r(this,De))==null||n.dispose(),(s=r(this,Oe))==null||s.dispose();const u=h instanceof Error?h.message:String(h);throw new Error(`Failed to initialize SamplePlayer: ${u}`)}})()),r(this,xr))}setRecorderInputSource(e){m(this,Gs,e)}getRecorderInputSource(){return r(this,Gs)}onMessage(e,n){return r(this,Wr).onMessage(e,n)}sendUpstreamMessage(e,n){return r(this,Wr).sendMessage(e,n),this}connect(e){var n;const s="input"in e&&e.input?e.input:e;r(this,ze).connect(s),"nodeId"in e&&(r(this,Er).add(e.nodeId),(n=e.addIncoming)==null||n.call(e,this.nodeId))}disconnect(e){var n;if(e){const s="input"in e?e.input:e;r(this,ze).disconnect(s),"nodeId"in e&&(r(this,Er).delete(e.nodeId),(n=e.removeIncoming)==null||n.call(e,this.nodeId))}else r(this,ze).disconnect(),r(this,Er).clear()}addIncoming(e){r(this,Si).add(e.nodeId)}removeIncoming(e){r(this,Si).delete(e.nodeId)}get connections(){return{outgoing:Array.from(r(this,Er)),incoming:Array.from(r(this,Si))}}setParam(e,n,s=this.now){this.setParameterValue(e,n)}getParam(e){switch(e){case"loopStart":return r(this,De).audioParam;case"loopEnd":return r(this,Oe).audioParam;default:return console.warn(`Parameter '${e}' not found on SamplePlayer`),null}}get audioNode(){return r(this,ze)}get input(){return this.outBus.input}get output(){return r(this,ze)}get now(){return this.context.currentTime}get initialized(){return r(this,Tr)}storeParamValue(e,n,s=r(this,ya)){r(this,va).debounce(()=>vh(this.getLocalStorageKey(e),n),s,e)()}getStoredParamValue(e,n){const s=this.getLocalStorageKey(e);return yh(s,n)}getLocalStorageKey(e){return`${e}-${this.nodeId}`}getMacrosAudioParam(e){switch(e){case"loopStart":return r(this,De).audioParam;case"loopEnd":return r(this,Oe).audioParam;default:const n=e;throw new Error(`Unknown macro parameter: ${n}`)}}getMacro(e){switch(e){case"loopStart":return r(this,De);case"loopEnd":return r(this,Oe);default:const n=e;throw new Error(`Unknown macro parameter: ${n}`)}}setModulationWaveform(e="AM",n="triangle",s={}){this.voicePool.applyToAllVoices(h=>h.setModulationWaveform(e,n,s))}syncLFOsToNoteFreq(e,n){var s,h,u,f,v,b;if(e==="gain-lfo"){if(n===!0)(s=r(this,yt))==null||s.storeCurrentValues();else{const P=(h=r(this,yt))==null?void 0:h.getStoredValues();P&&((u=r(this,yt))==null||u.setFrequency(P.rate))}m(this,Us,n)}if(e==="pitch-lfo"){if(n===!0)(f=r(this,lt))==null||f.storeCurrentValues();else{const P=(v=r(this,lt))==null?void 0:v.getStoredValues();P&&((b=r(this,lt))==null||b.setFrequency(P.rate))}m(this,zs,n)}}async loadSample(e,n,s){if(e instanceof ArrayBuffer&&(e=await bn().decodeAudioData(e)),!lc(e))return console.error("Invalid AudioBuffer provided to loadSample"),null;(e.sampleRate!==this.context.sampleRate||n&&this.context.sampleRate!==n)&&console.warn(`sample rate mismatch, 
        buffer rate: ${e.sampleRate}, 
        context rate: ${this.context.sampleRate}
        requested rate: ${n}`),this.releaseAll(0),this.transposeSemitones=0,m(this,qr,!1),m(this,Di,null);let h;r(this,Aa)&&(h=await Zu(this.context,e,s),e=h.audiobuffer,r(this,Qs)&&h.zeroCrossings&&m(this,Ln,h.zeroCrossings)),m(this,Di,e),m(this,vn,e.duration),this.voicePool.setBuffer(e,r(this,Ln)),W(this,Kt,Pa).call(this);const u={rootNote:"C",scale:[0],lowestOctave:0,highestOctave:5,tuningOffset:0,normalize:!1};return this.setScale(u),e}async detectPitch(e){const n=await Yu(e),s=zu(n.frequency),h=69+12*Math.log2(n.frequency/440),u=s.frequency/n.frequency;return console.table({pitchSource:n,targetNoteInfo:s,playbackRateMultiplier:u,midiFloat:h}),this.sendUpstreamMessage("sample:pitch-detected",{pitchResults:n,closestNoteInfo:s}),{frequency:n.frequency,confidence:n.confidence,midiFloat:h,targetNoteInfo:s}}detectedPitchToTransposition(e,n){let s=n-e;for(;s>6;)s-=12;for(;s<-6;)s+=12;return s}play(e,n=100,s=this.getGlideTime()){var h,u;const f=gu(n)?n:100,v=e+r(this,jn);return gu(v)?(r(this,Us)&&((h=r(this,yt))==null||h.setMusicalNote(v)),r(this,zs)&&((u=r(this,lt))==null||u.setMusicalNote(v,{divisor:4})),this.outBus.noteOn(v,f,0,s),this.voicePool.noteOn(v,f,0,s)):(console.warn(`Invalid midiNote: ${v}`),null)}release(e){if(this.holdEnabled||r(this,qn))return this;const n=e+r(this,jn);return this.voicePool.noteOff(n),this.sendUpstreamMessage("note:off",{transposedMidiNote:n}),this}releaseAll(e){return this.voicePool.allNotesOff(e),this}get transposedBySemitones(){return r(this,jn)}set transposeSemitones(e){r(this,jn)!==e&&m(this,jn,e)}setScale(e){return r(this,De).setScale({snapToZeroCrossings:r(this,Ln),...e}),r(this,Oe).setScale({snapToZeroCrossings:r(this,Ln),...e}),this}setRootNote(e){const n=gs[e];let s=n===0?0:n-12;return this.transposedBySemitones===s?this:(this.transposeSemitones=s,r(this,Oe).setRootNote(e),r(this,De).setRootNote(e),this)}setVolume(e){return e=ke(e,0,1),r(this,ze).gain.setValueAtTime(e,this.now),this.storeParamValue("volume",e),this}setSampleStartPoint(e){return this.voicePool.applyToAllVoices(n=>n.setStartPoint(e)),this.storeParamValue("startPoint",e),this.sendUpstreamMessage("start-point:updated",{startPoint:e}),this}setSampleEndPoint(e){return this.voicePool.applyToAllVoices(n=>n.setEndPoint(e)),this.storeParamValue("endPoint",e),this.sendUpstreamMessage("end-point:updated",{endPoint:e}),this}setLoopRampDuration(e){return this.storeParamValue("loopRampDuration",e),this}setGlideTime(e){return this.storeParamValue("glideTime",e),this}setLoopEnabled(e){return r(this,Wn)===e?this:r(this,Ir)&&!e?this:(this.voicePool.allVoices.forEach(n=>n.setLoopEnabled(e)),m(this,Wn,e),this.sendUpstreamMessage("loop:enabled",{enabled:e}),this)}setLoopLocked(e){return r(this,Ir)===e?this:(m(this,Ir,e),this.setLoopEnabled(e),this.storeParamValue("loopLocked",e),this.sendUpstreamMessage("loop:locked",{locked:e}),this)}setHoldEnabled(e){return r(this,Oi)===e?this:r(this,qn)&&!e?this:(m(this,Oi,e),e||this.releaseAll(.1),this.sendUpstreamMessage("hold:enabled",{enabled:e}),this)}setHoldLocked(e){return r(this,qn)===e?this:(m(this,qn,e),e===!1&&this.releaseAll(),this.storeParamValue("holdLocked",e),this.sendUpstreamMessage("hold:locked",{locked:e}),this)}setSustainPedal(e){return r(this,Ls)===e?this:(m(this,Ls,e),r(this,Ir)||(r(this,Ni)&&!e?(m(this,Ni,!1),this.setLoopEnabled(!1)):e&&!r(this,Wn)&&(this.setLoopEnabled(!0),m(this,Ni,!0))),r(this,qn)||this.setHoldEnabled(e),this)}setPlaybackDirection(e){return this.voicePool.applyToAllVoices(n=>n.setPlaybackDirection(e)),this.storeParamValue("playbackDirection",e),this}setLoopDurationDriftAmount(e){return this.voicePool.applyToAllVoices(n=>n.setLoopDurationDriftAmount(e)),this.storeParamValue("loopDurationDrift",e),this}setTempo(e){if(!(e<r(this,wa)||e>r(this,ba)))return m(this,Sr,e),this.voicePool.applyToAllVoices(n=>n.setTempo(e)),this.sendUpstreamMessage("tempo:updated",{bpm:e}),this}syncLoopToTempo(e){this.voicePool.applyToAllVoices(n=>n.syncLoopToTempo(e))}get tempo(){return r(this,Sr)}setLoopPoint(e,n,s,h=this.getLoopRampDuration()){let u=ke(n,0+this.MIN_LOOP_DURATION_SECONDS/2,s);if(e==="start"&&u===this.loopStart)return this;let f=ke(s,u,r(this,vn)-this.MIN_LOOP_DURATION_SECONDS/2);if(e==="end"&&f===this.loopEnd)return this;const v=f-u,b=h*1;if(e==="start"&&u!==this.loopStart){if(r(this,Ks)){const R=60/r(this,Sr),B=Math.round(v/R);u=f-B*R}const P=()=>this.storeParamValue("loopStart",u);v<this.MIN_LOOP_DURATION_SECONDS&&(u=f-this.MIN_LOOP_DURATION_SECONDS),r(this,De).ramp(u,b,f,{onComplete:()=>{P()}})}else if(e==="end"&&f!==this.loopEnd){if(r(this,Ks)){const R=60/r(this,Sr),B=Math.round(v/R);f=u+B*R}const P=()=>this.storeParamValue("loopEnd",f);v<this.MIN_LOOP_DURATION_SECONDS&&(f=u+this.MIN_LOOP_DURATION_SECONDS),r(this,Oe).ramp(f,b,u,{onComplete:()=>{P()}})}return this.sendUpstreamMessage("loop-points:updated",{loopStart:u,loopEnd:f}),this}scrollLoopPoints(e,n){const s=this.context.currentTime;return r(this,De).setValue(e,s),r(this,Oe).setValue(n,s),this.storeParamValue("loopStart",e),this.storeParamValue("loopEnd",n),this}setParameterValue(e,n){switch(e){case"startPoint":this.setSampleStartPoint(n);break;case"endPoint":this.setSampleEndPoint(n);break;case"glideTime":this.setGlideTime(n);break;case"loopStart":this.setLoopStart(n);break;case"loopEnd":this.setLoopEnd(n);break;case"loopRampDuration":this.setLoopRampDuration(n);break;default:console.warn(`Unknown parameter: ${e}`)}return this}getStartPoint(){return this.getStoredParamValue("startPoint",ft.START_POINT.defaultValue)}getEndPoint(){return this.getStoredParamValue("endPoint",ft.END_POINT.defaultValue)}getLoopRampDuration(){return this.getStoredParamValue("loopRampDuration",ft.LOOP_RAMP_DURATION.defaultValue)}getGlideTime(){return this.getStoredParamValue("glideTime",0)}getParameterValue(e){switch(e){case"loopStart":return this.loopStart;case"loopEnd":return this.loopEnd;case"loopRampDuration":return this.getLoopRampDuration();case"startPoint":return this.getStartPoint();case"endPoint":return this.getEndPoint();case"glideTime":return this.getGlideTime();case"hpfCutoff":return this.getHpfCutoff();case"lpfCutoff":return this.getLpfCutoff();default:console.warn(`Unknown parameter: ${e}`);return}}getParameterDescriptors(){return{startPoint:ft.START_POINT,endPoint:ft.END_POINT,playbackRate:ft.PLAYBACK_RATE,loopStart:r(this,De).descriptor,loopEnd:r(this,Oe).descriptor,loopRampDuration:ft.LOOP_RAMP_DURATION,hpfCutoff:ft.HIGHPASS_CUTOFF,lpfCutoff:ft.LOWPASS_CUTOFF}}getEnvelope(e){const n=this.voicePool.allVoices[0];if(!n)throw new Error("No voices available in voice pool");const s=n.getEnvelope(e);if(!s)throw new Error(`Envelope type '${e}' not found`);return s}setEnvelopeSustainPoint(e,n){this.voicePool.applyToAllVoices(s=>s.setEnvelopeSustainPoint(e,n))}setEnvelopeReleasePoint(e,n){this.voicePool.applyToAllVoices(s=>s.setEnvelopeReleasePoint(e,n))}updateEnvelopePoint(e,n,s,h){this.voicePool.applyToAllVoices(u=>u.updateEnvelopePoint(e,n,s,h))}addEnvelopePoint(e,n,s){this.voicePool.applyToAllVoices(h=>h.addEnvelopePoint(e,n,s))}deleteEnvelopePoint(e,n){this.voicePool.applyToAllVoices(s=>s.deleteEnvelopePoint(e,n))}startLevelMonitoring(e){this.outBus.startLevelMonitoring(e)}setFeedbackDecay(e){this.outBus.setFeedbackDecay(e),this.voicePool.applyToAllVoices(n=>{var s;(s=n.feedback)==null||s.setDecay(e)})}setFeedbackLowpassCutoff(e){this.outBus.setFeedbackLowpassCutoff(e),this.voicePool.applyToAllVoices(n=>{var s;(s=n.feedback)==null||s.setLowpassCutoff(e)})}setFeedbackMode(e){var n;if(m(this,Kn,e),e==="monophonic"){let s=((n=this.voicePool.allVoices[0].feedback)==null?void 0:n.currentAmount)??0;this.voicePool.applyToAllVoices(h=>{var u;(u=h.feedback)==null||u.setAmountMacro(0)}),this.outBus.setFeedbackAmount(s)}else if(e==="polyphonic"){const s=this.outBus.getFeedback().currentAmount;this.outBus.setFeedbackAmount(0),this.voicePool.applyToAllVoices(h=>{var u;(u=h.feedback)==null||u.setAmountMacro(s)})}else console.info("Feedback mode set to double-trouble, radical!")}setFeedbackPitchScale(e){this.outBus.setFeedbackPitchScale(e),this.voicePool.applyToAllVoices(n=>{var s;(s=n.feedback)==null||s.setDelayMultiplier(e)})}async initMidiController(){var e;if((e=r(this,tt))!=null&&e.isInitialized)return!0;r(this,tt)||m(this,tt,new yu),st(r(this,tt),"SamplePlayer: Failed to create MIDI controller");const n=await Fi(()=>r(this,tt).initialize());return st(!n.error,"SamplePlayer: Failed to initialize MIDI"),n.data}setMidiController(e){return m(this,tt,e),this}async enableMIDI(e,n="all"){return e||(e=new yu,await e.initialize()),e.isInitialized&&(m(this,tt,e),e.connectInstrument(this,n)),this}disableMIDI(e,n="all"){const s=e||r(this,tt);return s==null||s.disconnectInstrument(this,n),s===r(this,tt)&&m(this,tt,null),this}get mainOut(){return r(this,ze)}get outputBus(){return this.outBus}get sampleDuration(){return r(this,vn)}get volume(){return r(this,ze).gain.value}set volume(e){r(this,ze).gain.setValueAtTime(e,this.context.currentTime)}get loopEnabled(){return r(this,Wn)}get holdEnabled(){return r(this,Oi)}get gainLFO(){return r(this,yt)}get pitchLFO(){return r(this,lt)}get loopStart(){return r(this,De).getValue()}get loopEnd(){return r(this,Oe).getValue()}get isLoaded(){return r(this,qr)}get audiobuffer(){return r(this,Di)}dispose(){var e,n,s,h;try{this.releaseAll(),this.voicePool&&(this.voicePool.dispose(),this.voicePool=null),this.outBus&&(this.outBus.dispose(),this.outBus=null),(e=r(this,De))==null||e.dispose(),(n=r(this,Oe))==null||n.dispose(),m(this,De,null),m(this,Oe,null),(s=r(this,yt))==null||s.dispose(),(h=r(this,lt))==null||h.dispose(),this.disconnect(),this.disableMIDI(),m(this,vn,0),m(this,Tr,!1),m(this,qr,!1),m(this,Ln,[]),m(this,Qs,!1),m(this,Wn,!1),Ot(this.nodeId)}catch(u){console.error(`Error disposing Sampler ${this.nodeId}:`,u)}}}Wr=new WeakMap,va=new WeakMap,ya=new WeakMap,Tr=new WeakMap,xr=new WeakMap,qr=new WeakMap,js=new WeakMap,Ii=new WeakMap,tt=new WeakMap,Er=new WeakMap,Si=new WeakMap,Di=new WeakMap,vn=new WeakMap,Wn=new WeakMap,Ir=new WeakMap,Oi=new WeakMap,qn=new WeakMap,Ls=new WeakMap,ze=new WeakMap,De=new WeakMap,Oe=new WeakMap,yt=new WeakMap,lt=new WeakMap,jn=new WeakMap,Sr=new WeakMap,Ks=new WeakMap,ba=new WeakMap,wa=new WeakMap,Us=new WeakMap,zs=new WeakMap,Ln=new WeakMap,Qs=new WeakMap,Aa=new WeakMap,Gs=new WeakMap,Kt=new WeakSet,gl=function(){this.voicePool.connect(this.outBus.input),this.outBus.connect(r(this,ze)),r(this,ze).connect(this.context.destination)},vl=function(){return this.voicePool.onMessage("sample:loaded",l=>{m(this,qr,!0)}),this.voicePool.onMessage("voice-pool:initialized",()=>{this.sendUpstreamMessage("sample-player:initialized",{})}),r(this,Wr).forwardFrom(this.voicePool,["voice-pool:initialized","voice:started","voice:stopped","voice:releasing","sample:loaded","amp-env:created","amp-env:trigger","amp-env:trigger:loop","amp-env:release","pitch-env:created","pitch-env:trigger","pitch-env:trigger:loop","pitch-env:release","filter-env:created","filter-env:trigger","filter-env:trigger:loop","filter-env:release"]),this},yl=function(){return this.voicePool.allVoices.forEach((l,e)=>{const n=l.getParam("loopStart"),s=l.getParam("loopEnd");n?r(this,De).addTarget(n,"loopStart"):console.error("loopStart param is null!"),s?r(this,Oe).addTarget(s,"loopEnd"):console.error("loopEnd param is null!")}),this},Pa=function(){return r(this,De).setValue(0),this.storeParamValue("loopStart",0),r(this,Oe).setValue(r(this,vn)),this.storeParamValue("loopEnd",r(this,vn)),this},bl=function(){m(this,yt,new ia(this.context)),r(this,yt).setWaveform("sine"),m(this,lt,new ia(this.context));const l=r(this,lt).getPitchWobbleWaveform();r(this,lt).setWaveform(l),W(this,Kt,Du).call(this,r(this,lt),"playbackRate"),r(this,yt).connect(this.outBus.input.gain)},Du=function(l,e){this.voicePool.applyToAllVoices(n=>{const s=n.getParam(e);s&&l.connect(s)})},Ni=new WeakMap,Kn=new WeakMap;const qi=[];function Th(l){qi.push(l)}function xh(l){return qi.includes(l)}function Eh(){return[...qi]}function Ih(){return qi.length=0,qi.length===0}const ms={has:xh,add:Th,getAll:Eh,clear:Ih};let Jo=!1;const Sh=["/node_modules/@repo/audiolib/dist/processors/processors.js","./processors/processors.js","/processors/processors.js",new URL(""+new URL("processors-BvY_bU-O.js",import.meta.url).href,import.meta.url).href];async function Dh(){try{const l=[new URL(""+new URL("processors-BvY_bU-O.js",import.meta.url).href,import.meta.url).href,"/processors/processors.js","./processors/processors.js"];let e=null,n=null;for(const h of l)try{const u=await fetch(h);if(!u.ok)throw new Error(`HTTP error ${u.status}`);e=await u.text(),console.info(`Fetched processor code from: ${h}`);break}catch(u){console.debug(`Failed to fetch from ${h}:`,u),n=u}if(!e)throw n||new Error("Couldn't fetch processor code from any URL");const s=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(s)}catch(l){throw console.error("Failed to create Blob URL:",l),l}}async function Oh(l){if(Jo)return console.info("AudioWorklet processors already initialized, skipping"),{success:!0,loadedPath:"already-initialized",timestamp:new Date().toISOString()};if(!l.audioWorklet)return console.warn("AudioWorklet API is not fully supported on this browser."),console.warn("The audio sampler requires AudioWorklet support. Please try:"),console.warn("1. Using Chrome, Firefox, or Edge on desktop"),console.warn("2. Updating your mobile browser to the latest version"),console.warn("3. Using a different browser on mobile (Chrome or Firefox)"),{success:!1,loadedPath:"none-worklet-not-supported",timestamp:new Date().toISOString(),error:"AudioWorklet not supported on this browser"};let e=null;for(const n of Sh)if(!ms.has(n))try{return await l.audioWorklet.addModule(n),ms.add(n),Jo=!0,console.info("Audiolib: AudioWorklet module loaded."),{success:!0,loadedPath:n,timestamp:new Date().toISOString()}}catch(s){e=s}try{const n=await Dh();return ms.has(n)||(await l.audioWorklet.addModule(n),ms.add(n),Jo=!0,console.info("AudioWorklet module loaded from Blob URL")),URL.revokeObjectURL(n),{success:!0,loadedPath:"blob-url",timestamp:new Date().toISOString()}}catch(n){console.error("Failed to load AudioWorklet from Blob URL:",n),e=new Error(`Failed to load AudioWorklet from all paths. Last error: ${e instanceof Error&&e.message||"Unknown error"}. Blob URL error: ${typeof n=="object"&&n&&"message"in n?n.message:String(n)}`)}throw e||new Error("Failed to load AudioWorklet from all paths")}var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rh(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Ma={exports:{}},Bh=Ma.exports,Ou;function Fh(){return Ou||(Ou=1,function(l,e){(function(n,s){l.exports=s()})(Bh,function(){var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])})(t,i)},s=function(){return(s=Object.assign||function(t){for(var i,o=1,a=arguments.length;o<a;o++)for(var c in i=arguments[o])Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c]);return t}).apply(this,arguments)};function h(t,i,o){for(var a,c=0,d=i.length;c<d;c++)!a&&c in i||((a=a||Array.prototype.slice.call(i,0,c))[c]=i[c]);return t.concat(a||Array.prototype.slice.call(i))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Nh,f=Object.keys,v=Array.isArray;function b(t,i){return typeof i!="object"||f(i).forEach(function(o){t[o]=i[o]}),t}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var P=Object.getPrototypeOf,R={}.hasOwnProperty;function B(t,i){return R.call(t,i)}function C(t,i){typeof i=="function"&&(i=i(P(t))),(typeof Reflect>"u"?f:Reflect.ownKeys)(i).forEach(function(o){J(t,o,i[o])})}var Z=Object.defineProperty;function J(t,i,o,a){Z(t,i,b(o&&B(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},a))}function X(t){return{from:function(i){return t.prototype=Object.create(i.prototype),J(t.prototype,"constructor",t),{extend:C.bind(null,t.prototype)}}}}var ie=Object.getOwnPropertyDescriptor,fe=[].slice;function Yt(t,i,o){return fe.call(t,i,o)}function Hn(t,i){return i(t)}function le(t){if(!t)throw new Error("Assertion Failed")}function dt(t){u.setImmediate?setImmediate(t):setTimeout(t,0)}function Ue(t,i){if(typeof i=="string"&&B(t,i))return t[i];if(!i)return t;if(typeof i!="string"){for(var o=[],a=0,c=i.length;a<c;++a){var d=Ue(t,i[a]);o.push(d)}return o}var p=i.indexOf(".");if(p!==-1){var g=t[i.substr(0,p)];return g==null?void 0:Ue(g,i.substr(p+1))}}function Je(t,i,o){if(t&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof i!="string"&&"length"in i){le(typeof o!="string"&&"length"in o);for(var a=0,c=i.length;a<c;++a)Je(t,i[a],o[a])}else{var d,p,g=i.indexOf(".");g!==-1?(d=i.substr(0,g),(p=i.substr(g+1))===""?o===void 0?v(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=o:Je(g=!(g=t[d])||!B(t,d)?t[d]={}:g,p,o)):o===void 0?v(t)&&!isNaN(parseInt(i))?t.splice(i,1):delete t[i]:t[i]=o}}function Ia(t){var i,o={};for(i in t)B(t,i)&&(o[i]=t[i]);return o}var xl=[].concat;function Sa(t){return xl.apply([],t)}var kn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Sa([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(i){return i+t+"Array"})}))).filter(function(t){return u[t]}),Da=new Set(kn.map(function(t){return u[t]})),Kr=null;function An(t){return Kr=new WeakMap,t=function i(o){if(!o||typeof o!="object")return o;var a=Kr.get(o);if(a)return a;if(v(o)){a=[],Kr.set(o,a);for(var c=0,d=o.length;c<d;++c)a.push(i(o[c]))}else if(Da.has(o.constructor))a=o;else{var p,g=P(o);for(p in a=g===Object.prototype?{}:Object.create(g),Kr.set(o,a),o)B(o,p)&&(a[p]=i(o[p]))}return a}(t),Kr=null,t}var El={}.toString;function no(t){return El.call(t).slice(8,-1)}var ro=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Il=typeof ro=="symbol"?function(t){var i;return t!=null&&(i=t[ro])&&i.apply(t)}:function(){return null};function Pn(t,i){return i=t.indexOf(i),0<=i&&t.splice(i,1),0<=i}var Jn={};function Nt(t){var i,o,a,c;if(arguments.length===1){if(v(t))return t.slice();if(this===Jn&&typeof t=="string")return[t];if(c=Il(t)){for(o=[];!(a=c.next()).done;)o.push(a.value);return o}if(t==null)return[t];if(typeof(i=t.length)!="number")return[t];for(o=new Array(i);i--;)o[i]=t[i];return o}for(i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return o}var io=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ot=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qr),Sl={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _n(t,i){this.name=t,this.message=i}function Oa(t,i){return t+". Errors: "+Object.keys(i).map(function(o){return i[o].toString()}).filter(function(o,a,c){return c.indexOf(o)===a}).join(`
`)}function ji(t,i,o,a){this.failures=i,this.failedKeys=a,this.successCount=o,this.message=Oa(t,i)}function $n(t,i){this.name="BulkError",this.failures=Object.keys(i).map(function(o){return i[o]}),this.failuresByPos=i,this.message=Oa(t,this.failures)}X(_n).from(Error).extend({toString:function(){return this.name+": "+this.message}}),X(ji).from(_n),X($n).from(_n);var so=ot.reduce(function(t,i){return t[i]=i+"Error",t},{}),Dl=_n,H=ot.reduce(function(t,i){var o=i+"Error";function a(c,d){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Sl[i]||o,this.inner=null)}return X(a).from(Dl),t[i]=a,t},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var Na=Qr.reduce(function(t,i){return t[i+"Error"]=H[i],t},{}),Li=ot.reduce(function(t,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(t[i+"Error"]=H[i]),t},{});function ae(){}function Ur(t){return t}function Ol(t,i){return t==null||t===Ur?i:function(o){return i(t(o))}}function Mn(t,i){return function(){t.apply(this,arguments),i.apply(this,arguments)}}function Nl(t,i){return t===ae?i:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=i.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Mn(a,this.onsuccess):a),c&&(this.onerror=this.onerror?Mn(c,this.onerror):c),d!==void 0?d:o}}function Rl(t,i){return t===ae?i:function(){t.apply(this,arguments);var o=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Mn(o,this.onsuccess):o),a&&(this.onerror=this.onerror?Mn(a,this.onerror):a)}}function Bl(t,i){return t===ae?i:function(o){var a=t.apply(this,arguments);b(o,a);var c=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,o=i.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Mn(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Mn(d,this.onerror):d),a===void 0?o===void 0?void 0:o:b(a,o)}}function Fl(t,i){return t===ae?i:function(){return i.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function oo(t,i){return t===ae?i:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var a=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return o.then(function(){return i.apply(a,d)})}return i.apply(this,arguments)}}Li.ModifyError=ji,Li.DexieError=_n,Li.BulkError=$n;var Pt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ra(t){Pt=t}var zr={},Ba=100,kn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,P(t),t];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,P(i),t]}(),Qr=kn[0],ot=kn[1],kn=kn[2],ot=ot&&ot.then,Tn=Qr&&Qr.constructor,ao=!!kn,Gr=function(t,i){Yr.push([t,i]),Ki&&(queueMicrotask(Vl),Ki=!1)},uo=!0,Ki=!0,xn=[],Ui=[],lo=Ur,Xt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ae,pgp:!1,env:{},finalize:ae},Y=Xt,Yr=[],En=0,zi=[];function Q(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=Y;if(typeof t!="function"){if(t!==zr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ho(this,this._value))}this._state=null,this._value=null,++i.ref,function o(a,c){try{c(function(d){if(a._state===null){if(d===a)throw new TypeError("A promise cannot be resolved with itself.");var p=a._lib&&er();d&&typeof d.then=="function"?o(a,function(g,A){d instanceof Q?d._then(g,A):d.then(g,A)}):(a._state=!0,a._value=d,Ca(a)),p&&tr()}},ho.bind(null,a))}catch(d){ho(a,d)}}(this,t)}var co={get:function(){var t=Y,i=Xi;function o(a,c){var d=this,p=!t.global&&(t!==Y||i!==Xi),g=p&&!Ht(),A=new Q(function(k,E){fo(d,new Fa(Wa(a,t,p,g),Wa(c,t,p,g),k,E,t))});return this._consoleTask&&(A._consoleTask=this._consoleTask),A}return o.prototype=zr,o},set:function(t){J(this,"then",t&&t.prototype===zr?co:{get:function(){return t},set:co.set})}};function Fa(t,i,o,a,c){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof i=="function"?i:null,this.resolve=o,this.reject=a,this.psd=c}function ho(t,i){var o,a;Ui.push(i),t._state===null&&(o=t._lib&&er(),i=lo(i),t._state=!1,t._value=i,a=t,xn.some(function(c){return c._value===a._value})||xn.push(a),Ca(t),o&&tr())}function Ca(t){var i=t._listeners;t._listeners=[];for(var o=0,a=i.length;o<a;++o)fo(t,i[o]);var c=t._PSD;--c.ref||c.finalize(),En===0&&(++En,Gr(function(){--En==0&&po()},[]))}function fo(t,i){if(t._state!==null){var o=t._state?i.onFulfilled:i.onRejected;if(o===null)return(t._state?i.resolve:i.reject)(t._value);++i.psd.ref,++En,Gr(Cl,[o,t,i])}else t._listeners.push(i)}function Cl(t,i,o){try{var a,c=i._value;!i._state&&Ui.length&&(Ui=[]),a=Pt&&i._consoleTask?i._consoleTask.run(function(){return t(c)}):t(c),i._state||Ui.indexOf(c)!==-1||function(d){for(var p=xn.length;p;)if(xn[--p]._value===d._value)return xn.splice(p,1)}(i),o.resolve(a)}catch(d){o.reject(d)}finally{--En==0&&po(),--o.psd.ref||o.psd.finalize()}}function Vl(){In(Xt,function(){er()&&tr()})}function er(){var t=uo;return Ki=uo=!1,t}function tr(){var t,i,o;do for(;0<Yr.length;)for(t=Yr,Yr=[],o=t.length,i=0;i<o;++i){var a=t[i];a[0].apply(null,a[1])}while(0<Yr.length);Ki=uo=!0}function po(){var t=xn;xn=[],t.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var i=zi.slice(0),o=i.length;o;)i[--o]()}function Qi(t){return new Q(zr,!1,t)}function he(t,i){var o=Y;return function(){var a=er(),c=Y;try{return Jt(o,!0),t.apply(this,arguments)}catch(d){i&&i(d)}finally{Jt(c,!1),a&&tr()}}}C(Q.prototype,{then:co,_then:function(t,i){fo(this,new Fa(null,null,t,i,Y))},catch:function(t){if(arguments.length===1)return this.then(null,t);var i=t,o=arguments[1];return typeof i=="function"?this.then(null,function(a){return(a instanceof i?o:Qi)(a)}):this.then(null,function(a){return(a&&a.name===i?o:Qi)(a)})},finally:function(t){return this.then(function(i){return Q.resolve(t()).then(function(){return i})},function(i){return Q.resolve(t()).then(function(){return Qi(i)})})},timeout:function(t,i){var o=this;return t<1/0?new Q(function(a,c){var d=setTimeout(function(){return c(new H.Timeout(i))},t);o.then(a,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&J(Q.prototype,Symbol.toStringTag,"Dexie.Promise"),Xt.env=Va(),C(Q,{all:function(){var t=Nt.apply(null,arguments).map(Zi);return new Q(function(i,o){t.length===0&&i([]);var a=t.length;t.forEach(function(c,d){return Q.resolve(c).then(function(p){t[d]=p,--a||i(t)},o)})})},resolve:function(t){return t instanceof Q?t:t&&typeof t.then=="function"?new Q(function(i,o){t.then(i,o)}):new Q(zr,!0,t)},reject:Qi,race:function(){var t=Nt.apply(null,arguments).map(Zi);return new Q(function(i,o){t.map(function(a){return Q.resolve(a).then(i,o)})})},PSD:{get:function(){return Y},set:function(t){return Y=t}},totalEchoes:{get:function(){return Xi}},newPSD:Zt,usePSD:In,scheduler:{get:function(){return Gr},set:function(t){Gr=t}},rejectionMapper:{get:function(){return lo},set:function(t){lo=t}},follow:function(t,i){return new Q(function(o,a){return Zt(function(c,d){var p=Y;p.unhandleds=[],p.onunhandled=d,p.finalize=Mn(function(){var g,A=this;g=function(){A.unhandleds.length===0?c():d(A.unhandleds[0])},zi.push(function k(){g(),zi.splice(zi.indexOf(k),1)}),++En,Gr(function(){--En==0&&po()},[])},p.finalize),t()},i,o,a)})}}),Tn&&(Tn.allSettled&&J(Q,"allSettled",function(){var t=Nt.apply(null,arguments).map(Zi);return new Q(function(i){t.length===0&&i([]);var o=t.length,a=new Array(o);t.forEach(function(c,d){return Q.resolve(c).then(function(p){return a[d]={status:"fulfilled",value:p}},function(p){return a[d]={status:"rejected",reason:p}}).then(function(){return--o||i(a)})})})}),Tn.any&&typeof AggregateError<"u"&&J(Q,"any",function(){var t=Nt.apply(null,arguments).map(Zi);return new Q(function(i,o){t.length===0&&o(new AggregateError([]));var a=t.length,c=new Array(a);t.forEach(function(d,p){return Q.resolve(d).then(function(g){return i(g)},function(g){c[p]=g,--a||o(new AggregateError(c))})})})}),Tn.withResolvers&&(Q.withResolvers=Tn.withResolvers));var xe={awaits:0,echoes:0,id:0},Wl=0,Gi=[],Yi=0,Xi=0,ql=0;function Zt(t,i,o,a){var c=Y,d=Object.create(c);return d.parent=c,d.ref=0,d.global=!1,d.id=++ql,Xt.env,d.env=ao?{Promise:Q,PromiseProp:{value:Q,configurable:!0,writable:!0},all:Q.all,race:Q.race,allSettled:Q.allSettled,any:Q.any,resolve:Q.resolve,reject:Q.reject}:{},i&&b(d,i),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},a=In(d,t,o,a),d.ref===0&&d.finalize(),a}function nr(){return xe.id||(xe.id=++Wl),++xe.awaits,xe.echoes+=Ba,xe.id}function Ht(){return!!xe.awaits&&(--xe.awaits==0&&(xe.id=0),xe.echoes=xe.awaits*Ba,!0)}function Zi(t){return xe.echoes&&t&&t.constructor===Tn?(nr(),t.then(function(i){return Ht(),i},function(i){return Ht(),pe(i)})):t}function jl(){var t=Gi[Gi.length-1];Gi.pop(),Jt(t,!1)}function Jt(t,i){var o,a=Y;(i?!xe.echoes||Yi++&&t===Y:!Yi||--Yi&&t===Y)||queueMicrotask(i?(function(c){++Xi,xe.echoes&&--xe.echoes!=0||(xe.echoes=xe.awaits=xe.id=0),Gi.push(Y),Jt(c,!0)}).bind(null,t):jl),t!==Y&&(Y=t,a===Xt&&(Xt.env=Va()),ao&&(o=Xt.env.Promise,i=t.env,(a.global||t.global)&&(Object.defineProperty(u,"Promise",i.PromiseProp),o.all=i.all,o.race=i.race,o.resolve=i.resolve,o.reject=i.reject,i.allSettled&&(o.allSettled=i.allSettled),i.any&&(o.any=i.any))))}function Va(){var t=u.Promise;return ao?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function In(t,i,o,a,c){var d=Y;try{return Jt(t,!0),i(o,a,c)}finally{Jt(d,!1)}}function Wa(t,i,o,a){return typeof t!="function"?t:function(){var c=Y;o&&nr(),Jt(i,!0);try{return t.apply(this,arguments)}finally{Jt(c,!1),a&&queueMicrotask(Ht)}}}function mo(t){Promise===Tn&&xe.echoes===0?Yi===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+ot).indexOf("[native code]")===-1&&(nr=Ht=ae);var pe=Q.reject,Sn="￿",Rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qa="String expected.",rr=[],Hi="__dbnames",go="readonly",vo="readwrite";function Dn(t,i){return t?i?function(){return t.apply(this,arguments)&&i.apply(this,arguments)}:t:i}var ja={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ji(t){return typeof t!="string"||/\./.test(t)?function(i){return i}:function(i){return i[t]===void 0&&t in i&&delete(i=An(i))[t],i}}function La(){throw H.Type()}function ne(t,i){try{var o=Ka(t),a=Ka(i);if(o!==a)return o==="Array"?1:a==="Array"?-1:o==="binary"?1:a==="binary"?-1:o==="string"?1:a==="string"?-1:o==="Date"?1:a!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return i<t?1:t<i?-1:0;case"binary":return function(c,d){for(var p=c.length,g=d.length,A=p<g?p:g,k=0;k<A;++k)if(c[k]!==d[k])return c[k]<d[k]?-1:1;return p===g?0:p<g?-1:1}(Ua(t),Ua(i));case"Array":return function(c,d){for(var p=c.length,g=d.length,A=p<g?p:g,k=0;k<A;++k){var E=ne(c[k],d[k]);if(E!==0)return E}return p===g?0:p<g?-1:1}(t,i)}}catch{}return NaN}function Ka(t){var i=typeof t;return i!="object"?i:ArrayBuffer.isView(t)?"binary":(t=no(t),t==="ArrayBuffer"?"binary":t)}function Ua(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var za=(ce.prototype._trans=function(t,i,o){var a=this._tx||Y.trans,c=this.name,d=Pt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function p(k,E,y){if(!y.schema[c])throw new H.NotFound("Table "+c+" not part of transaction");return i(y.idbtrans,y)}var g=er();try{var A=a&&a.db._novip===this.db._novip?a===Y.trans?a._promise(t,p,o):Zt(function(){return a._promise(t,p,o)},{trans:a,transless:Y.transless||Y}):function k(E,y,S,M){if(E.idbdb&&(E._state.openComplete||Y.letThrough||E._vip)){var x=E._createTransaction(y,S,E._dbSchema);try{x.create(),E._state.PR1398_maxLoop=3}catch(I){return I.name===so.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return k(E,y,S,M)})):pe(I)}return x._promise(y,function(I,T){return Zt(function(){return Y.trans=x,M(I,T,x)})}).then(function(I){if(y==="readwrite")try{x.idbtrans.commit()}catch{}return y==="readonly"?I:x._completion.then(function(){return I})})}if(E._state.openComplete)return pe(new H.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return pe(new H.DatabaseClosed);E.open().catch(ae)}return E._state.dbReadyPromise.then(function(){return k(E,y,S,M)})}(this.db,t,[this.name],p);return d&&(A._consoleTask=d,A=A.catch(function(k){return console.trace(k),pe(k)})),A}finally{g&&tr()}},ce.prototype.get=function(t,i){var o=this;return t&&t.constructor===Object?this.where(t).first(i):t==null?pe(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return o.core.get({trans:a,key:t}).then(function(c){return o.hook.reading.fire(c)})}).then(i)},ce.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(v(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var i=f(t);if(i.length===1)return this.where(i[0]).equals(t[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(g){if(g.compound&&i.every(function(k){return 0<=g.keyPath.indexOf(k)})){for(var A=0;A<i.length;++A)if(i.indexOf(g.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(g,A){return g.keyPath.length-A.keyPath.length})[0];if(o&&this.db._maxKey!==Sn){var d=o.keyPath.slice(0,i.length);return this.where(d).equals(d.map(function(A){return t[A]}))}!o&&Pt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var a=this.schema.idxByName;function c(g,A){return ne(g,A)===0}var p=i.reduce(function(y,A){var k=y[0],E=y[1],y=a[A],S=t[A];return[k||y,k||!y?Dn(E,y&&y.multi?function(M){return M=Ue(M,A),v(M)&&M.some(function(x){return c(S,x)})}:function(M){return c(S,Ue(M,A))}):E]},[null,null]),d=p[0],p=p[1];return d?this.where(d.name).equals(t[d.keyPath]).filter(p):o?this.filter(p):this.where(i).equals("")},ce.prototype.filter=function(t){return this.toCollection().and(t)},ce.prototype.count=function(t){return this.toCollection().count(t)},ce.prototype.offset=function(t){return this.toCollection().offset(t)},ce.prototype.limit=function(t){return this.toCollection().limit(t)},ce.prototype.each=function(t){return this.toCollection().each(t)},ce.prototype.toArray=function(t){return this.toCollection().toArray(t)},ce.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ce.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,v(t)?"[".concat(t.join("+"),"]"):t))},ce.prototype.reverse=function(){return this.toCollection().reverse()},ce.prototype.mapToClass=function(t){var i,o=this.db,a=this.name;function c(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof La&&(function(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function E(){this.constructor=A}n(A,k),A.prototype=k===null?Object.create(k):(E.prototype=k.prototype,new E)}(c,i=t),Object.defineProperty(c.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),c.prototype.table=function(){return a},t=c);for(var d=new Set,p=t.prototype;p;p=P(p))Object.getOwnPropertyNames(p).forEach(function(A){return d.add(A)});function g(A){if(!A)return A;var k,E=Object.create(t.prototype);for(k in A)if(!d.has(k))try{E[k]=A[k]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),t},ce.prototype.defineClass=function(){return this.mapToClass(function(t){b(this,t)})},ce.prototype.add=function(t,i){var o=this,a=this.schema.primKey,c=a.auto,d=a.keyPath,p=t;return d&&c&&(p=Ji(d)(t)),this._trans("readwrite",function(g){return o.core.mutate({trans:g,type:"add",keys:i!=null?[i]:null,values:[p]})}).then(function(g){return g.numFailures?Q.reject(g.failures[0]):g.lastResult}).then(function(g){if(d)try{Je(t,d,g)}catch{}return g})},ce.prototype.update=function(t,i){return typeof t!="object"||v(t)?this.where(":id").equals(t).modify(i):(t=Ue(t,this.schema.primKey.keyPath),t===void 0?pe(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(i))},ce.prototype.put=function(t,i){var o=this,a=this.schema.primKey,c=a.auto,d=a.keyPath,p=t;return d&&c&&(p=Ji(d)(t)),this._trans("readwrite",function(g){return o.core.mutate({trans:g,type:"put",values:[p],keys:i!=null?[i]:null})}).then(function(g){return g.numFailures?Q.reject(g.failures[0]):g.lastResult}).then(function(g){if(d)try{Je(t,d,g)}catch{}return g})},ce.prototype.delete=function(t){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?Q.reject(o.failures[0]):void 0})},ce.prototype.clear=function(){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"deleteRange",range:ja})}).then(function(i){return i.numFailures?Q.reject(i.failures[0]):void 0})},ce.prototype.bulkGet=function(t){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:t,trans:o}).then(function(a){return a.map(function(c){return i.hook.reading.fire(c)})})})},ce.prototype.bulkAdd=function(t,i,o){var a=this,c=Array.isArray(i)?i:void 0,d=(o=o||(c?void 0:i))?o.allKeys:void 0;return this._trans("readwrite",function(p){var k=a.schema.primKey,g=k.auto,k=k.keyPath;if(k&&c)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var A=t.length,k=k&&g?t.map(Ji(k)):t;return a.core.mutate({trans:p,type:"add",keys:c,values:k,wantResults:d}).then(function(x){var y=x.numFailures,S=x.results,M=x.lastResult,x=x.failures;if(y===0)return d?S:M;throw new $n("".concat(a.name,".bulkAdd(): ").concat(y," of ").concat(A," operations failed"),x)})})},ce.prototype.bulkPut=function(t,i,o){var a=this,c=Array.isArray(i)?i:void 0,d=(o=o||(c?void 0:i))?o.allKeys:void 0;return this._trans("readwrite",function(p){var k=a.schema.primKey,g=k.auto,k=k.keyPath;if(k&&c)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var A=t.length,k=k&&g?t.map(Ji(k)):t;return a.core.mutate({trans:p,type:"put",keys:c,values:k,wantResults:d}).then(function(x){var y=x.numFailures,S=x.results,M=x.lastResult,x=x.failures;if(y===0)return d?S:M;throw new $n("".concat(a.name,".bulkPut(): ").concat(y," of ").concat(A," operations failed"),x)})})},ce.prototype.bulkUpdate=function(t){var i=this,o=this.core,a=t.map(function(p){return p.key}),c=t.map(function(p){return p.changes}),d=[];return this._trans("readwrite",function(p){return o.getMany({trans:p,keys:a,cache:"clone"}).then(function(g){var A=[],k=[];t.forEach(function(y,S){var M=y.key,x=y.changes,I=g[S];if(I){for(var T=0,D=Object.keys(x);T<D.length;T++){var O=D[T],N=x[O];if(O===i.schema.primKey.keyPath){if(ne(N,M)!==0)throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else Je(I,O,N)}d.push(S),A.push(M),k.push(I)}});var E=A.length;return o.mutate({trans:p,type:"put",keys:A,values:k,updates:{keys:a,changeSpecs:c}}).then(function(y){var S=y.numFailures,M=y.failures;if(S===0)return E;for(var x=0,I=Object.keys(M);x<I.length;x++){var T,D=I[x],O=d[Number(D)];O!=null&&(T=M[D],delete M[D],M[O]=T)}throw new $n("".concat(i.name,".bulkUpdate(): ").concat(S," of ").concat(E," operations failed"),M)})})})},ce.prototype.bulkDelete=function(t){var i=this,o=t.length;return this._trans("readwrite",function(a){return i.core.mutate({trans:a,type:"delete",keys:t})}).then(function(p){var c=p.numFailures,d=p.lastResult,p=p.failures;if(c===0)return d;throw new $n("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),p)})},ce);function ce(){}function Xr(t){function i(p,g){if(g){for(var A=arguments.length,k=new Array(A-1);--A;)k[A-1]=arguments[A];return o[p].subscribe.apply(null,k),t}if(typeof p=="string")return o[p]}var o={};i.addEventType=d;for(var a=1,c=arguments.length;a<c;++a)d(arguments[a]);return i;function d(p,g,A){if(typeof p!="object"){var k;g=g||Fl;var E={subscribers:[],fire:A=A||ae,subscribe:function(y){E.subscribers.indexOf(y)===-1&&(E.subscribers.push(y),E.fire=g(E.fire,y))},unsubscribe:function(y){E.subscribers=E.subscribers.filter(function(S){return S!==y}),E.fire=E.subscribers.reduce(g,A)}};return o[p]=i[p]=E}f(k=p).forEach(function(y){var S=k[y];if(v(S))d(y,k[y][0],k[y][1]);else{if(S!=="asap")throw new H.InvalidArgument("Invalid event config");var M=d(y,Ur,function(){for(var x=arguments.length,I=new Array(x);x--;)I[x]=arguments[x];M.subscribers.forEach(function(T){dt(function(){T.apply(null,I)})})})}})}}function Zr(t,i){return X(i).from({prototype:t}),i}function ir(t,i){return!(t.filter||t.algorithm||t.or)&&(i?t.justLimit:!t.replayFilter)}function yo(t,i){t.filter=Dn(t.filter,i)}function bo(t,i,o){var a=t.replayFilter;t.replayFilter=a?function(){return Dn(a(),i())}:i,t.justLimit=o&&!a}function _i(t,i){if(t.isPrimKey)return i.primaryKey;var o=i.getIndexByKeyPath(t.index);if(!o)throw new H.Schema("KeyPath "+t.index+" on object store "+i.name+" is not indexed");return o}function Qa(t,i,o){var a=_i(t,i.schema);return i.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:a,range:t.range}})}function $i(t,i,o,a){var c=t.replayFilter?Dn(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},p=function(g,A,k){var E,y;c&&!c(A,k,function(S){return A.stop(S)},function(S){return A.fail(S)})||((y=""+(E=A.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(E)),B(d,y)||(d[y]=!0,i(g,A,k)))};return Promise.all([t.or._iterate(p,o),Ga(Qa(t,a,o),t.algorithm,p,!t.keysOnly&&t.valueMapper)])}return Ga(Qa(t,a,o),Dn(t.algorithm,c),i,!t.keysOnly&&t.valueMapper)}function Ga(t,i,o,a){var c=he(a?function(d,p,g){return o(a(d),p,g)}:o);return t.then(function(d){if(d)return d.start(function(){var p=function(){return d.continue()};i&&!i(d,function(g){return p=g},function(g){d.stop(g),p=ae},function(g){d.fail(g),p=ae})||c(d.value,d,function(g){return p=g}),p()})})}var Hr=(Ya.prototype.execute=function(t){var i=this["@@propmod"];if(i.add!==void 0){var o=i.add;if(v(o))return h(h([],v(t)?t:[],!0),o).sort();if(typeof o=="number")return(Number(t)||0)+o;if(typeof o=="bigint")try{return BigInt(t)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(i.remove!==void 0){var a=i.remove;if(v(a))return v(t)?t.filter(function(c){return!a.includes(c)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return o=(o=i.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof t=="string"&&t.startsWith(o)?i.replacePrefix[1]+t.substring(o.length):t},Ya);function Ya(t){this["@@propmod"]=t}var Ll=(se.prototype._read=function(t,i){var o=this._ctx;return o.error?o.table._trans(null,pe.bind(null,o.error)):o.table._trans("readonly",t).then(i)},se.prototype._write=function(t){var i=this._ctx;return i.error?i.table._trans(null,pe.bind(null,i.error)):i.table._trans("readwrite",t,"locked")},se.prototype._addAlgorithm=function(t){var i=this._ctx;i.algorithm=Dn(i.algorithm,t)},se.prototype._iterate=function(t,i){return $i(this._ctx,t,i,this._ctx.table.core)},se.prototype.clone=function(t){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&b(o,t),i._ctx=o,i},se.prototype.raw=function(){return this._ctx.valueMapper=null,this},se.prototype.each=function(t){var i=this._ctx;return this._read(function(o){return $i(i,t,o,i.table.core)})},se.prototype.count=function(t){var i=this;return this._read(function(o){var a=i._ctx,c=a.table.core;if(ir(a,!0))return c.count({trans:o,query:{index:_i(a,c.schema),range:a.range}}).then(function(p){return Math.min(p,a.limit)});var d=0;return $i(a,function(){return++d,!1},o,c).then(function(){return d})}).then(t)},se.prototype.sortBy=function(t,i){var o=t.split(".").reverse(),a=o[0],c=o.length-1;function d(A,k){return k?d(A[o[k]],k-1):A[a]}var p=this._ctx.dir==="next"?1:-1;function g(A,k){return ne(d(A,c),d(k,c))*p}return this.toArray(function(A){return A.sort(g)}).then(i)},se.prototype.toArray=function(t){var i=this;return this._read(function(o){var a=i._ctx;if(a.dir==="next"&&ir(a,!0)&&0<a.limit){var c=a.valueMapper,d=_i(a,a.table.core.schema);return a.table.core.query({trans:o,limit:a.limit,values:!0,query:{index:d,range:a.range}}).then(function(g){return g=g.result,c?g.map(c):g})}var p=[];return $i(a,function(g){return p.push(g)},o,a.table.core).then(function(){return p})},t)},se.prototype.offset=function(t){var i=this._ctx;return t<=0||(i.offset+=t,ir(i)?bo(i,function(){var o=t;return function(a,c){return o===0||(o===1?--o:c(function(){a.advance(o),o=0}),!1)}}):bo(i,function(){var o=t;return function(){return--o<0}})),this},se.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),bo(this._ctx,function(){var i=t;return function(o,a,c){return--i<=0&&a(c),0<=i}},!0),this},se.prototype.until=function(t,i){return yo(this._ctx,function(o,a,c){return!t(o.value)||(a(c),i)}),this},se.prototype.first=function(t){return this.limit(1).toArray(function(i){return i[0]}).then(t)},se.prototype.last=function(t){return this.reverse().first(t)},se.prototype.filter=function(t){var i;return yo(this._ctx,function(o){return t(o.value)}),(i=this._ctx).isMatch=Dn(i.isMatch,t),this},se.prototype.and=function(t){return this.filter(t)},se.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},se.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},se.prototype.desc=function(){return this.reverse()},se.prototype.eachKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,a){t(a.key,a)})},se.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},se.prototype.eachPrimaryKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,a){t(a.primaryKey,a)})},se.prototype.keys=function(t){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(a,c){o.push(c.key)}).then(function(){return o}).then(t)},se.prototype.primaryKeys=function(t){var i=this._ctx;if(i.dir==="next"&&ir(i,!0)&&0<i.limit)return this._read(function(a){var c=_i(i,i.table.core.schema);return i.table.core.query({trans:a,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(a){return a.result}).then(t);i.keysOnly=!i.isMatch;var o=[];return this.each(function(a,c){o.push(c.primaryKey)}).then(function(){return o}).then(t)},se.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},se.prototype.firstKey=function(t){return this.limit(1).keys(function(i){return i[0]}).then(t)},se.prototype.lastKey=function(t){return this.reverse().firstKey(t)},se.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var i={};return yo(this._ctx,function(c){var a=c.primaryKey.toString(),c=B(i,a);return i[a]=!0,!c}),this},se.prototype.modify=function(t){var i=this,o=this._ctx;return this._write(function(a){var c,d,p;p=typeof t=="function"?t:(c=f(t),d=c.length,function(T){for(var D=!1,O=0;O<d;++O){var N=c[O],F=t[N],q=Ue(T,N);F instanceof Hr?(Je(T,N,F.execute(q)),D=!0):q!==F&&(Je(T,N,F),D=!0)}return D});var g=o.table.core,y=g.schema.primaryKey,A=y.outbound,k=y.extractKey,E=200,y=i.db._options.modifyChunkSize;y&&(E=typeof y=="object"?y[g.name]||y["*"]||200:y);function S(T,N){var O=N.failures,N=N.numFailures;x+=T-N;for(var F=0,q=f(O);F<q.length;F++){var U=q[F];M.push(O[U])}}var M=[],x=0,I=[];return i.clone().primaryKeys().then(function(T){function D(N){var F=Math.min(E,T.length-N);return g.getMany({trans:a,keys:T.slice(N,N+F),cache:"immutable"}).then(function(q){for(var U=[],j=[],L=A?[]:null,z=[],K=0;K<F;++K){var G=q[K],$={value:An(G),primKey:T[N+K]};p.call($,$.value,$)!==!1&&($.value==null?z.push(T[N+K]):A||ne(k(G),k($.value))===0?(j.push($.value),A&&L.push(T[N+K])):(z.push(T[N+K]),U.push($.value)))}return Promise.resolve(0<U.length&&g.mutate({trans:a,type:"add",values:U}).then(function(ee){for(var te in ee.failures)z.splice(parseInt(te),1);S(U.length,ee)})).then(function(){return(0<j.length||O&&typeof t=="object")&&g.mutate({trans:a,type:"put",keys:L,values:j,criteria:O,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<N}).then(function(ee){return S(j.length,ee)})}).then(function(){return(0<z.length||O&&t===wo)&&g.mutate({trans:a,type:"delete",keys:z,criteria:O,isAdditionalChunk:0<N}).then(function(ee){return S(z.length,ee)})}).then(function(){return T.length>N+F&&D(N+E)})})}var O=ir(o)&&o.limit===1/0&&(typeof t!="function"||t===wo)&&{index:o.index,range:o.range};return D(0).then(function(){if(0<M.length)throw new ji("Error modifying one or more objects",M,x,I);return T.length})})})},se.prototype.delete=function(){var t=this._ctx,i=t.range;return ir(t)&&(t.isPrimKey||i.type===3)?this._write(function(o){var a=t.table.core.schema.primaryKey,c=i;return t.table.core.count({trans:o,query:{index:a,range:c}}).then(function(d){return t.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(p){var g=p.failures;if(p.lastResult,p.results,p=p.numFailures,p)throw new ji("Could not delete some values",Object.keys(g).map(function(A){return g[A]}),d-p);return d-p})})}):this.modify(wo)},se);function se(){}var wo=function(t,i){return i.value=null};function Kl(t,i){return t<i?-1:t===i?0:1}function Ul(t,i){return i<t?-1:t===i?0:1}function _e(t,i,o){return t=t instanceof Za?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(i),t}function sr(t){return new t.Collection(t,function(){return Xa("")}).limit(0)}function es(t,i,o,a){var c,d,p,g,A,k,E,y=o.length;if(!o.every(function(x){return typeof x=="string"}))return _e(t,qa);function S(x){c=x==="next"?function(T){return T.toUpperCase()}:function(T){return T.toLowerCase()},d=x==="next"?function(T){return T.toLowerCase()}:function(T){return T.toUpperCase()},p=x==="next"?Kl:Ul;var I=o.map(function(T){return{lower:d(T),upper:c(T)}}).sort(function(T,D){return p(T.lower,D.lower)});g=I.map(function(T){return T.upper}),A=I.map(function(T){return T.lower}),E=(k=x)==="next"?"":a}S("next"),t=new t.Collection(t,function(){return _t(g[0],A[y-1]+a)}),t._ondirectionchange=function(x){S(x)};var M=0;return t._addAlgorithm(function(x,I,T){var D=x.key;if(typeof D!="string")return!1;var O=d(D);if(i(O,A,M))return!0;for(var N=null,F=M;F<y;++F){var q=function(U,j,L,z,K,G){for(var $=Math.min(U.length,z.length),ee=-1,te=0;te<$;++te){var $e=j[te];if($e!==z[te])return K(U[te],L[te])<0?U.substr(0,te)+L[te]+L.substr(te+1):K(U[te],z[te])<0?U.substr(0,te)+z[te]+L.substr(te+1):0<=ee?U.substr(0,ee)+j[ee]+L.substr(ee+1):null;K(U[te],$e)<0&&(ee=te)}return $<z.length&&G==="next"?U+L.substr(U.length):$<U.length&&G==="prev"?U.substr(0,L.length):ee<0?null:U.substr(0,ee)+z[ee]+L.substr(ee+1)}(D,O,g[F],A[F],p,k);q===null&&N===null?M=F+1:(N===null||0<p(N,q))&&(N=q)}return I(N!==null?function(){x.continue(N+E)}:T),!1}),t}function _t(t,i,o,a){return{type:2,lower:t,upper:i,lowerOpen:o,upperOpen:a}}function Xa(t){return{type:1,lower:t,upper:t}}var Za=(Object.defineProperty(Ee.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ee.prototype.between=function(t,i,o,a){o=o!==!1,a=a===!0;try{return 0<this._cmp(t,i)||this._cmp(t,i)===0&&(o||a)&&(!o||!a)?sr(this):new this.Collection(this,function(){return _t(t,i,!o,!a)})}catch{return _e(this,Rt)}},Ee.prototype.equals=function(t){return t==null?_e(this,Rt):new this.Collection(this,function(){return Xa(t)})},Ee.prototype.above=function(t){return t==null?_e(this,Rt):new this.Collection(this,function(){return _t(t,void 0,!0)})},Ee.prototype.aboveOrEqual=function(t){return t==null?_e(this,Rt):new this.Collection(this,function(){return _t(t,void 0,!1)})},Ee.prototype.below=function(t){return t==null?_e(this,Rt):new this.Collection(this,function(){return _t(void 0,t,!1,!0)})},Ee.prototype.belowOrEqual=function(t){return t==null?_e(this,Rt):new this.Collection(this,function(){return _t(void 0,t)})},Ee.prototype.startsWith=function(t){return typeof t!="string"?_e(this,qa):this.between(t,t+Sn,!0,!0)},Ee.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):es(this,function(i,o){return i.indexOf(o[0])===0},[t],Sn)},Ee.prototype.equalsIgnoreCase=function(t){return es(this,function(i,o){return i===o[0]},[t],"")},Ee.prototype.anyOfIgnoreCase=function(){var t=Nt.apply(Jn,arguments);return t.length===0?sr(this):es(this,function(i,o){return o.indexOf(i)!==-1},t,"")},Ee.prototype.startsWithAnyOfIgnoreCase=function(){var t=Nt.apply(Jn,arguments);return t.length===0?sr(this):es(this,function(i,o){return o.some(function(a){return i.indexOf(a)===0})},t,Sn)},Ee.prototype.anyOf=function(){var t=this,i=Nt.apply(Jn,arguments),o=this._cmp;try{i.sort(o)}catch{return _e(this,Rt)}if(i.length===0)return sr(this);var a=new this.Collection(this,function(){return _t(i[0],i[i.length-1])});a._ondirectionchange=function(d){o=d==="next"?t._ascending:t._descending,i.sort(o)};var c=0;return a._addAlgorithm(function(d,p,g){for(var A=d.key;0<o(A,i[c]);)if(++c===i.length)return p(g),!1;return o(A,i[c])===0||(p(function(){d.continue(i[c])}),!1)}),a},Ee.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ee.prototype.noneOf=function(){var t=Nt.apply(Jn,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return _e(this,Rt)}var i=t.reduce(function(o,a){return o?o.concat([[o[o.length-1][1],a]]):[[-1/0,a]]},null);return i.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},Ee.prototype.inAnyRange=function(D,i){var o=this,a=this._cmp,c=this._ascending,d=this._descending,p=this._min,g=this._max;if(D.length===0)return sr(this);if(!D.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&c(O[0],O[1])<=0}))return _e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var A=!i||i.includeLowers!==!1,k=i&&i.includeUppers===!0,E,y=c;function S(O,N){return y(O[0],N[0])}try{(E=D.reduce(function(O,N){for(var F=0,q=O.length;F<q;++F){var U=O[F];if(a(N[0],U[1])<0&&0<a(N[1],U[0])){U[0]=p(U[0],N[0]),U[1]=g(U[1],N[1]);break}}return F===q&&O.push(N),O},[])).sort(S)}catch{return _e(this,Rt)}var M=0,x=k?function(O){return 0<c(O,E[M][1])}:function(O){return 0<=c(O,E[M][1])},I=A?function(O){return 0<d(O,E[M][0])}:function(O){return 0<=d(O,E[M][0])},T=x,D=new this.Collection(this,function(){return _t(E[0][0],E[E.length-1][1],!A,!k)});return D._ondirectionchange=function(O){y=O==="next"?(T=x,c):(T=I,d),E.sort(S)},D._addAlgorithm(function(O,N,F){for(var q,U=O.key;T(U);)if(++M===E.length)return N(F),!1;return!x(q=U)&&!I(q)||(o._cmp(U,E[M][1])===0||o._cmp(U,E[M][0])===0||N(function(){y===c?O.continue(E[M][0]):O.continue(E[M][1])}),!1)}),D},Ee.prototype.startsWithAnyOf=function(){var t=Nt.apply(Jn,arguments);return t.every(function(i){return typeof i=="string"})?t.length===0?sr(this):this.inAnyRange(t.map(function(i){return[i,i+Sn]})):_e(this,"startsWithAnyOf() only works with strings")},Ee);function Ee(){}function Mt(t){return he(function(i){return Jr(i),t(i.target.error),!1})}function Jr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var _r="storagemutated",Ao="x-storagemutated-1",$t=Xr(null,_r),zl=(kt.prototype._lock=function(){return le(!Y.global),++this._reculock,this._reculock!==1||Y.global||(Y.lockOwnerFor=this),this},kt.prototype._unlock=function(){if(le(!Y.global),--this._reculock==0)for(Y.global||(Y.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{In(t[1],t[0])}catch{}}return this},kt.prototype._locked=function(){return this._reculock&&Y.lockOwnerFor!==this},kt.prototype.create=function(t){var i=this;if(!this.mode)return this;var o=this.db.idbdb,a=this.db._state.dbOpenError;if(le(!this.idbtrans),!t&&!o)switch(a&&a.name){case"DatabaseClosedError":throw new H.DatabaseClosed(a);case"MissingAPIError":throw new H.MissingAPI(a.message,a);default:throw new H.OpenFailed(a)}if(!this.active)throw new H.TransactionInactive;return le(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=he(function(c){Jr(c),i._reject(t.error)}),t.onabort=he(function(c){Jr(c),i.active&&i._reject(new H.Abort(t.error)),i.active=!1,i.on("abort").fire(c)}),t.oncomplete=he(function(){i.active=!1,i._resolve(),"mutatedParts"in t&&$t.storagemutated.fire(t.mutatedParts)}),this},kt.prototype._promise=function(t,i,o){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return pe(new H.ReadOnly("Transaction is readonly"));if(!this.active)return pe(new H.TransactionInactive);if(this._locked())return new Q(function(d,p){a._blockedFuncs.push([function(){a._promise(t,i,o).then(d,p)},Y])});if(o)return Zt(function(){var d=new Q(function(p,g){a._lock();var A=i(p,g,a);A&&A.then&&A.then(p,g)});return d.finally(function(){return a._unlock()}),d._lib=!0,d});var c=new Q(function(d,p){var g=i(d,p,a);g&&g.then&&g.then(d,p)});return c._lib=!0,c},kt.prototype._root=function(){return this.parent?this.parent._root():this},kt.prototype.waitFor=function(t){var i,o=this._root(),a=Q.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return a}):(o._waitingFor=a,o._waitingQueue=[],i=o.idbtrans.objectStore(o.storeNames[0]),function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(i.get(-1/0).onsuccess=d)}());var c=o._waitingFor;return new Q(function(d,p){a.then(function(g){return o._waitingQueue.push(he(d.bind(null,g)))},function(g){return o._waitingQueue.push(he(p.bind(null,g)))}).finally(function(){o._waitingFor===c&&(o._waitingFor=null)})})},kt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},kt.prototype.table=function(t){var i=this._memoizedTables||(this._memoizedTables={});if(B(i,t))return i[t];var o=this.schema[t];if(!o)throw new H.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),i[t]=o},kt);function kt(){}function Po(t,i,o,a,c,d,p){return{name:t,keyPath:i,unique:o,multi:a,auto:c,compound:d,src:(o&&!p?"&":"")+(a?"*":"")+(c?"++":"")+Ha(i)}}function Ha(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Mo(t,i,o){return{name:t,primKey:i,indexes:o,mappedClass:null,idxByName:(a=function(c){return[c.name,c]},o.reduce(function(c,d,p){return p=a(d,p),p&&(c[p[0]]=p[1]),c},{}))};var a}var $r=function(t){try{return t.only([[]]),$r=function(){return[[]]},[[]]}catch{return $r=function(){return Sn},Sn}};function ko(t){return t==null?function(){}:typeof t=="string"?(i=t).split(".").length===1?function(o){return o[i]}:function(o){return Ue(o,i)}:function(o){return Ue(o,t)};var i}function Ja(t){return[].slice.call(t)}var Ql=0;function ei(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Gl(t,i,A){function a(T){if(T.type===3)return null;if(T.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=T.lower,x=T.upper,I=T.lowerOpen,T=T.upperOpen;return M===void 0?x===void 0?null:i.upperBound(x,!!T):x===void 0?i.lowerBound(M,!!I):i.bound(M,x,!!I,!!T)}function c(S){var M,x=S.name;return{name:x,schema:S,mutate:function(I){var T=I.trans,D=I.type,O=I.keys,N=I.values,F=I.range;return new Promise(function(q,U){q=he(q);var j=T.objectStore(x),L=j.keyPath==null,z=D==="put"||D==="add";if(!z&&D!=="delete"&&D!=="deleteRange")throw new Error("Invalid operation type: "+D);var K,G=(O||N||{length:1}).length;if(O&&N&&O.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return q({numFailures:0,failures:{},results:[],lastResult:void 0});function $(Ve){++$e,Jr(Ve)}var ee=[],te=[],$e=0;if(D==="deleteRange"){if(F.type===4)return q({numFailures:$e,failures:te,results:[],lastResult:void 0});F.type===3?ee.push(K=j.clear()):ee.push(K=j.delete(a(F)))}else{var L=z?L?[N,O]:[N,null]:[O,null],_=L[0],Be=L[1];if(z)for(var Fe=0;Fe<G;++Fe)ee.push(K=Be&&Be[Fe]!==void 0?j[D](_[Fe],Be[Fe]):j[D](_[Fe])),K.onerror=$;else for(Fe=0;Fe<G;++Fe)ee.push(K=j[D](_[Fe])),K.onerror=$}function fs(Ve){Ve=Ve.target.result,ee.forEach(function(Rn,Ko){return Rn.error!=null&&(te[Ko]=Rn.error)}),q({numFailures:$e,failures:te,results:D==="delete"?O:ee.map(function(Rn){return Rn.result}),lastResult:Ve})}K.onerror=function(Ve){$(Ve),fs(Ve)},K.onsuccess=fs})},getMany:function(I){var T=I.trans,D=I.keys;return new Promise(function(O,N){O=he(O);for(var F,q=T.objectStore(x),U=D.length,j=new Array(U),L=0,z=0,K=function(ee){ee=ee.target,j[ee._pos]=ee.result,++z===L&&O(j)},G=Mt(N),$=0;$<U;++$)D[$]!=null&&((F=q.get(D[$]))._pos=$,F.onsuccess=K,F.onerror=G,++L);L===0&&O(j)})},get:function(I){var T=I.trans,D=I.key;return new Promise(function(O,N){O=he(O);var F=T.objectStore(x).get(D);F.onsuccess=function(q){return O(q.target.result)},F.onerror=Mt(N)})},query:(M=k,function(I){return new Promise(function(T,D){T=he(T);var O,N,F,L=I.trans,q=I.values,U=I.limit,K=I.query,j=U===1/0?void 0:U,z=K.index,K=K.range,L=L.objectStore(x),z=z.isPrimaryKey?L:L.index(z.name),K=a(K);if(U===0)return T({result:[]});M?((j=q?z.getAll(K,j):z.getAllKeys(K,j)).onsuccess=function(G){return T({result:G.target.result})},j.onerror=Mt(D)):(O=0,N=!q&&"openKeyCursor"in z?z.openKeyCursor(K):z.openCursor(K),F=[],N.onsuccess=function(G){var $=N.result;return $?(F.push(q?$.value:$.primaryKey),++O===U?T({result:F}):void $.continue()):T({result:F})},N.onerror=Mt(D))})}),openCursor:function(I){var T=I.trans,D=I.values,O=I.query,N=I.reverse,F=I.unique;return new Promise(function(q,U){q=he(q);var z=O.index,j=O.range,L=T.objectStore(x),L=z.isPrimaryKey?L:L.index(z.name),z=N?F?"prevunique":"prev":F?"nextunique":"next",K=!D&&"openKeyCursor"in L?L.openKeyCursor(a(j),z):L.openCursor(a(j),z);K.onerror=Mt(U),K.onsuccess=he(function(G){var $,ee,te,$e,_=K.result;_?(_.___id=++Ql,_.done=!1,$=_.continue.bind(_),ee=(ee=_.continuePrimaryKey)&&ee.bind(_),te=_.advance.bind(_),$e=function(){throw new Error("Cursor not stopped")},_.trans=T,_.stop=_.continue=_.continuePrimaryKey=_.advance=function(){throw new Error("Cursor not started")},_.fail=he(U),_.next=function(){var Be=this,Fe=1;return this.start(function(){return Fe--?Be.continue():Be.stop()}).then(function(){return Be})},_.start=function(Be){function Fe(){if(K.result)try{Be()}catch(Ve){_.fail(Ve)}else _.done=!0,_.start=function(){throw new Error("Cursor behind last entry")},_.stop()}var fs=new Promise(function(Ve,Rn){Ve=he(Ve),K.onerror=Mt(Rn),_.fail=Rn,_.stop=function(Ko){_.stop=_.continue=_.continuePrimaryKey=_.advance=$e,Ve(Ko)}});return K.onsuccess=he(function(Ve){K.onsuccess=Fe,Fe()}),_.continue=$,_.continuePrimaryKey=ee,_.advance=te,Fe(),fs},q(_)):q(null)},U)})},count:function(I){var T=I.query,D=I.trans,O=T.index,N=T.range;return new Promise(function(F,q){var U=D.objectStore(x),j=O.isPrimaryKey?U:U.index(O.name),U=a(N),j=U?j.count(U):j.count();j.onsuccess=he(function(L){return F(L.target.result)}),j.onerror=Mt(q)})}}}var d,p,g,E=(p=A,g=Ja((d=t).objectStoreNames),{schema:{name:d.name,tables:g.map(function(S){return p.objectStore(S)}).map(function(S){var M=S.keyPath,T=S.autoIncrement,x=v(M),I={},T={name:S.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:M==null,compound:x,keyPath:M,autoIncrement:T,unique:!0,extractKey:ko(M)},indexes:Ja(S.indexNames).map(function(D){return S.index(D)}).map(function(F){var O=F.name,N=F.unique,q=F.multiEntry,F=F.keyPath,q={name:O,compound:v(F),keyPath:F,unique:N,multiEntry:q,extractKey:ko(F)};return I[ei(F)]=q}),getIndexByKeyPath:function(D){return I[ei(D)]}};return I[":id"]=T.primaryKey,M!=null&&(I[ei(M)]=T.primaryKey),T})},hasGetAll:0<g.length&&"getAll"in p.objectStore(g[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),A=E.schema,k=E.hasGetAll,E=A.tables.map(c),y={};return E.forEach(function(S){return y[S.name]=S}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(S){if(!y[S])throw new Error("Table '".concat(S,"' not found"));return y[S]},MIN_KEY:-1/0,MAX_KEY:$r(i),schema:A}}function Yl(t,i,o,a){var c=o.IDBKeyRange;return o.indexedDB,{dbcore:(a=Gl(i,c,a),t.dbcore.reduce(function(d,p){return p=p.create,s(s({},d),p(d))},a))}}function ts(t,a){var o=a.db,a=Yl(t._middlewares,o,t._deps,a);t.core=a.dbcore,t.tables.forEach(function(c){var d=c.name;t.core.schema.tables.some(function(p){return p.name===d})&&(c.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=c.core))})}function ns(t,i,o,a){o.forEach(function(c){var d=a[c];i.forEach(function(p){var g=function A(k,E){return ie(k,E)||(k=P(k))&&A(k,E)}(p,c);(!g||"value"in g&&g.value===void 0)&&(p===t.Transaction.prototype||p instanceof t.Transaction?J(p,c,{get:function(){return this.table(c)},set:function(A){Z(this,c,{value:A,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new t.Table(c,d))})})}function To(t,i){i.forEach(function(o){for(var a in o)o[a]instanceof t.Table&&delete o[a]})}function Xl(t,i){return t._cfg.version-i._cfg.version}function Zl(t,i,o,a){var c=t._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Mo("$meta",$a("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,c);d.create(o),d._completion.catch(a);var p=d._reject.bind(d),g=Y.transless||Y;Zt(function(){return Y.trans=d,Y.transless=g,i!==0?(ts(t,o),k=i,((A=d).storeNames.includes("$meta")?A.table("$meta").get("version").then(function(E){return E??k}):Q.resolve(k)).then(function(E){return S=E,M=d,x=o,I=[],E=(y=t)._versions,T=y._dbSchema=is(0,y.idbdb,x),(E=E.filter(function(D){return D._cfg.version>=S})).length!==0?(E.forEach(function(D){I.push(function(){var O=T,N=D._cfg.dbschema;ss(y,O,x),ss(y,N,x),T=y._dbSchema=N;var F=xo(O,N);F.add.forEach(function(z){Eo(x,z[0],z[1].primKey,z[1].indexes)}),F.change.forEach(function(z){if(z.recreate)throw new H.Upgrade("Not yet support for changing primary key");var K=x.objectStore(z.name);z.add.forEach(function(G){return rs(K,G)}),z.change.forEach(function(G){K.deleteIndex(G.name),rs(K,G)}),z.del.forEach(function(G){return K.deleteIndex(G)})});var q=D._cfg.contentUpgrade;if(q&&D._cfg.version>S){ts(y,x),M._memoizedTables={};var U=Ia(N);F.del.forEach(function(z){U[z]=O[z]}),To(y,[y.Transaction.prototype]),ns(y,[y.Transaction.prototype],f(U),U),M.schema=U;var j,L=io(q);return L&&nr(),F=Q.follow(function(){var z;(j=q(M))&&L&&(z=Ht.bind(null,null),j.then(z,z))}),j&&typeof j.then=="function"?Q.resolve(j):F.then(function(){return j})}}),I.push(function(O){var N,F,q=D._cfg.dbschema;N=q,F=O,[].slice.call(F.db.objectStoreNames).forEach(function(U){return N[U]==null&&F.db.deleteObjectStore(U)}),To(y,[y.Transaction.prototype]),ns(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),M.schema=y._dbSchema}),I.push(function(O){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===D._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(N){return N!=="$meta"})):O.objectStore("$meta").put(D._cfg.version,"version"))})}),function D(){return I.length?Q.resolve(I.shift()(M.idbtrans)).then(D):Q.resolve()}().then(function(){_a(T,x)})):Q.resolve();var y,S,M,x,I,T}).catch(p)):(f(c).forEach(function(E){Eo(o,E,c[E].primKey,c[E].indexes)}),ts(t,o),void Q.follow(function(){return t.on.populate.fire(d)}).catch(p));var A,k})}function Hl(t,i){_a(t._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var o=is(0,t.idbdb,i);ss(t,t._dbSchema,i);for(var a=0,c=xo(o,t._dbSchema).change;a<c.length;a++){var d=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var g=i.objectStore(p.name);p.add.forEach(function(A){Pt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(A.src)),rs(g,A)})}(c[a]);if(typeof d=="object")return d.value}}function xo(t,i){var o,a={del:[],add:[],change:[]};for(o in t)i[o]||a.del.push(o);for(o in i){var c=t[o],d=i[o];if(c){var p={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)p.recreate=!0,a.change.push(p);else{var g=c.idxByName,A=d.idxByName,k=void 0;for(k in g)A[k]||p.del.push(k);for(k in A){var E=g[k],y=A[k];E?E.src!==y.src&&p.change.push(y):p.add.push(y)}(0<p.del.length||0<p.add.length||0<p.change.length)&&a.change.push(p)}}else a.add.push([o,d])}return a}function Eo(t,i,o,a){var c=t.db.createObjectStore(i,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return a.forEach(function(d){return rs(c,d)}),c}function _a(t,i){f(t).forEach(function(o){i.db.objectStoreNames.contains(o)||(Pt&&console.debug("Dexie: Creating missing table",o),Eo(i,o,t[o].primKey,t[o].indexes))})}function rs(t,i){t.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function is(t,i,o){var a={};return Yt(i.objectStoreNames,0).forEach(function(c){for(var d=o.objectStore(c),p=Po(Ha(k=d.keyPath),k||"",!0,!1,!!d.autoIncrement,k&&typeof k!="string",!0),g=[],A=0;A<d.indexNames.length;++A){var E=d.index(d.indexNames[A]),k=E.keyPath,E=Po(E.name,k,!!E.unique,!!E.multiEntry,!1,k&&typeof k!="string",!1);g.push(E)}a[c]=Mo(c,p,g)}),a}function ss(t,i,o){for(var a=o.db.objectStoreNames,c=0;c<a.length;++c){var d=a[c],p=o.objectStore(d);t._hasGetAll="getAll"in p;for(var g=0;g<p.indexNames.length;++g){var A=p.indexNames[g],k=p.index(A).keyPath,E=typeof k=="string"?k:"["+Yt(k).join("+")+"]";!i[d]||(k=i[d].idxByName[E])&&(k.name=A,delete i[d].idxByName[E],i[d].idxByName[A]=k)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function $a(t){return t.split(",").map(function(i,o){var a=(i=i.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Po(a,c||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),v(c),o===0)})}var Jl=(os.prototype._parseStoresSpec=function(t,i){f(t).forEach(function(o){if(t[o]!==null){var a=$a(t[o]),c=a.shift();if(c.unique=!0,c.multi)throw new H.Schema("Primary key cannot be multi-valued");a.forEach(function(d){if(d.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),i[o]=Mo(o,c,a)}})},os.prototype.stores=function(o){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,o):o;var o=i._versions,a={},c={};return o.forEach(function(d){b(a,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(a,c)}),i._dbSchema=c,To(i,[i._allTables,i,i.Transaction.prototype]),ns(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],f(c),c),i._storeNames=f(c),this},os.prototype.upgrade=function(t){return this._cfg.contentUpgrade=oo(this._cfg.contentUpgrade||ae,t),this},os);function os(){}function Io(t,i){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new Bt(Hi,{addons:[],indexedDB:t,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function So(t){return t&&typeof t.databases=="function"}function Do(t){return Zt(function(){return Y.letThrough=!0,t()})}function Oo(t){return!("from"in t)}var Re=function(t,i){if(!this){var o=new Re;return t&&"d"in t&&b(o,t),o}b(this,arguments.length?{d:1,from:t,to:1<arguments.length?i:t}:{d:0})};function ti(t,i,o){var a=ne(i,o);if(!isNaN(a)){if(0<a)throw RangeError();if(Oo(t))return b(t,{from:i,to:o,d:1});var c=t.l,a=t.r;if(ne(o,t.from)<0)return c?ti(c,i,o):t.l={from:i,to:o,d:1,l:null,r:null},tu(t);if(0<ne(i,t.to))return a?ti(a,i,o):t.r={from:i,to:o,d:1,l:null,r:null},tu(t);ne(i,t.from)<0&&(t.from=i,t.l=null,t.d=a?a.d+1:1),0<ne(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,c&&!t.l&&ni(t,c),a&&o&&ni(t,a)}}function ni(t,i){Oo(i)||function o(a,A){var d=A.from,p=A.to,g=A.l,A=A.r;ti(a,d,p),g&&o(a,g),A&&o(a,A)}(t,i)}function eu(t,i){var o=as(i),a=o.next();if(a.done)return!1;for(var c=a.value,d=as(t),p=d.next(c.from),g=p.value;!a.done&&!p.done;){if(ne(g.from,c.to)<=0&&0<=ne(g.to,c.from))return!0;ne(c.from,g.from)<0?c=(a=o.next(g.from)).value:g=(p=d.next(c.from)).value}return!1}function as(t){var i=Oo(t)?null:{s:0,n:t};return{next:function(o){for(var a=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,a)for(;i.n.l&&ne(o,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!a||ne(o,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function tu(t){var i,o,a=(((i=t.r)===null||i===void 0?void 0:i.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),c=1<a?"r":a<-1?"l":"";c&&(i=c=="r"?"l":"r",o=s({},t),a=t[c],t.from=a.from,t.to=a.to,t[c]=a[c],o[c]=a[i],(t[i]=o).d=nu(o)),t.d=nu(t)}function nu(o){var i=o.r,o=o.l;return(i?o?Math.max(i.d,o.d):i.d:o?o.d:0)+1}function us(t,i){return f(i).forEach(function(o){t[o]?ni(t[o],i[o]):t[o]=function a(c){var d,p,g={};for(d in c)B(c,d)&&(p=c[d],g[d]=!p||typeof p!="object"||Da.has(p.constructor)?p:a(p));return g}(i[o])}),t}function No(t,i){return t.all||i.all||Object.keys(t).some(function(o){return i[o]&&eu(i[o],t[o])})}C(Re.prototype,((ot={add:function(t){return ni(this,t),this},addKey:function(t){return ti(this,t,t),this},addKeys:function(t){var i=this;return t.forEach(function(o){return ti(i,o,o)}),this},hasKey:function(t){var i=as(this).next(t).value;return i&&ne(i.from,t)<=0&&0<=ne(i.to,t)}})[ro]=function(){return as(this)},ot));var On={},Ro={},Bo=!1;function ls(t){us(Ro,t),Bo||(Bo=!0,setTimeout(function(){Bo=!1,Fo(Ro,!(Ro={}))},0))}function Fo(t,i){i===void 0&&(i=!1);var o=new Set;if(t.all)for(var a=0,c=Object.values(On);a<c.length;a++)ru(p=c[a],t,o,i);else for(var d in t){var p,g=/^idb\:\/\/(.*)\/(.*)\//.exec(d);g&&(d=g[1],g=g[2],(p=On["idb://".concat(d,"/").concat(g)])&&ru(p,t,o,i))}o.forEach(function(A){return A()})}function ru(t,i,o,a){for(var c=[],d=0,p=Object.entries(t.queries.query);d<p.length;d++){for(var g=p[d],A=g[0],k=[],E=0,y=g[1];E<y.length;E++){var S=y[E];No(i,S.obsSet)?S.subscribers.forEach(function(T){return o.add(T)}):a&&k.push(S)}a&&c.push([A,k])}if(a)for(var M=0,x=c;M<x.length;M++){var I=x[M],A=I[0],k=I[1];t.queries.query[A]=k}}function _l(t){var i=t._state,o=t._deps.indexedDB;if(i.isBeingOpened||t.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?pe(i.dbOpenError):t});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var a=i.openCanceller,c=Math.round(10*t.verno),d=!1;function p(){if(i.openCanceller!==a)throw new H.DatabaseClosed("db.open() was cancelled")}function g(){return new Q(function(S,M){if(p(),!o)throw new H.MissingAPI;var x=t.name,I=i.autoSchema||!c?o.open(x):o.open(x,c);if(!I)throw new H.MissingAPI;I.onerror=Mt(M),I.onblocked=he(t._fireOnBlocked),I.onupgradeneeded=he(function(T){var D;E=I.transaction,i.autoSchema&&!t._options.allowEmptyDB?(I.onerror=Jr,E.abort(),I.result.close(),(D=o.deleteDatabase(x)).onsuccess=D.onerror=he(function(){M(new H.NoSuchDatabase("Database ".concat(x," doesnt exist")))})):(E.onerror=Mt(M),T=T.oldVersion>Math.pow(2,62)?0:T.oldVersion,y=T<1,t.idbdb=I.result,d&&Hl(t,E),Zl(t,T/10,E,M))},M),I.onsuccess=he(function(){E=null;var T,D,O,N,F,q=t.idbdb=I.result,U=Yt(q.objectStoreNames);if(0<U.length)try{var j=q.transaction((N=U).length===1?N[0]:N,"readonly");if(i.autoSchema)D=q,O=j,(T=t).verno=D.version/10,O=T._dbSchema=is(0,D,O),T._storeNames=Yt(D.objectStoreNames,0),ns(T,[T._allTables],f(O),O);else if(ss(t,t._dbSchema,j),((F=xo(is(0,(F=t).idbdb,j),F._dbSchema)).add.length||F.change.some(function(L){return L.add.length||L.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),q.close(),c=q.version+1,d=!0,S(g());ts(t,j)}catch{}rr.push(t),q.onversionchange=he(function(L){i.vcFired=!0,t.on("versionchange").fire(L)}),q.onclose=he(function(L){t.on("close").fire(L)}),y&&(F=t._deps,j=x,q=F.indexedDB,F=F.IDBKeyRange,So(q)||j===Hi||Io(q,F).put({name:j}).catch(ae)),S()},M)}).catch(function(S){switch(S==null?void 0:S.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),g();break;case"VersionError":if(0<c)return c=0,g()}return Q.reject(S)})}var A,k=i.dbReadyResolve,E=null,y=!1;return Q.race([a,(typeof navigator>"u"?Q.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(S){function M(){return indexedDB.databases().finally(S)}A=setInterval(M,100),M()}).finally(function(){return clearInterval(A)}):Promise.resolve()).then(g)]).then(function(){return p(),i.onReadyBeingFired=[],Q.resolve(Do(function(){return t.on.ready.fire(t.vip)})).then(function S(){if(0<i.onReadyBeingFired.length){var M=i.onReadyBeingFired.reduce(oo,ae);return i.onReadyBeingFired=[],Q.resolve(Do(function(){return M(t.vip)})).then(S)}})}).finally(function(){i.openCanceller===a&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(S){i.dbOpenError=S;try{E&&E.abort()}catch{}return a===i.openCanceller&&t._close(),pe(S)}).finally(function(){i.openComplete=!0,k()}).then(function(){var S;return y&&(S={},t.tables.forEach(function(M){M.schema.indexes.forEach(function(x){x.name&&(S["idb://".concat(t.name,"/").concat(M.name,"/").concat(x.name)]=new Re(-1/0,[[[]]]))}),S["idb://".concat(t.name,"/").concat(M.name,"/")]=S["idb://".concat(t.name,"/").concat(M.name,"/:dels")]=new Re(-1/0,[[[]]])}),$t(_r).fire(S),Fo(S,!0)),t})}function Co(t){function i(d){return t.next(d)}var o=c(i),a=c(function(d){return t.throw(d)});function c(d){return function(A){var g=d(A),A=g.value;return g.done?A:A&&typeof A.then=="function"?A.then(o,a):v(A)?Promise.all(A).then(o,a):o(A)}}return c(i)()}function cs(t,i,o){for(var a=v(t)?t.slice():[t],c=0;c<o;++c)a.push(i);return a}var $l={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return s(s({},t),{table:function(i){var o=t.table(i),a=o.schema,c={},d=[];function p(y,S,M){var x=ei(y),I=c[x]=c[x]||[],T=y==null?0:typeof y=="string"?1:y.length,D=0<S,D=s(s({},M),{name:D?"".concat(x,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:D,keyTail:S,keyLength:T,extractKey:ko(y),unique:!D&&M.unique});return I.push(D),D.isPrimaryKey||d.push(D),1<T&&p(T===2?y[0]:y.slice(0,T-1),S+1,M),I.sort(function(O,N){return O.keyTail-N.keyTail}),D}i=p(a.primaryKey.keyPath,0,a.primaryKey),c[":id"]=[i];for(var g=0,A=a.indexes;g<A.length;g++){var k=A[g];p(k.keyPath,0,k)}function E(y){var S,M=y.query.index;return M.isVirtual?s(s({},y),{query:{index:M.lowLevelIndex,range:(S=y.query.range,M=M.keyTail,{type:S.type===1?2:S.type,lower:cs(S.lower,S.lowerOpen?t.MAX_KEY:t.MIN_KEY,M),lowerOpen:!0,upper:cs(S.upper,S.upperOpen?t.MIN_KEY:t.MAX_KEY,M),upperOpen:!0})}}):y}return s(s({},o),{schema:s(s({},a),{primaryKey:i,indexes:d,getIndexByKeyPath:function(y){return(y=c[ei(y)])&&y[0]}}),count:function(y){return o.count(E(y))},query:function(y){return o.query(E(y))},openCursor:function(y){var S=y.query.index,M=S.keyTail,x=S.isVirtual,I=S.keyLength;return x?o.openCursor(E(y)).then(function(D){return D&&T(D)}):o.openCursor(y);function T(D){return Object.create(D,{continue:{value:function(O){O!=null?D.continue(cs(O,y.reverse?t.MAX_KEY:t.MIN_KEY,M)):y.unique?D.continue(D.key.slice(0,I).concat(y.reverse?t.MIN_KEY:t.MAX_KEY,M)):D.continue()}},continuePrimaryKey:{value:function(O,N){D.continuePrimaryKey(cs(O,t.MAX_KEY,M),N)}},primaryKey:{get:function(){return D.primaryKey}},key:{get:function(){var O=D.key;return I===1?O[0]:O.slice(0,I)}},value:{get:function(){return D.value}}})}}})}})}};function Vo(t,i,o,a){return o=o||{},a=a||"",f(t).forEach(function(c){var d,p,g;B(i,c)?(d=t[c],p=i[c],typeof d=="object"&&typeof p=="object"&&d&&p?(g=no(d))!==no(p)?o[a+c]=i[c]:g==="Object"?Vo(d,p,o,a+c+"."):d!==p&&(o[a+c]=i[c]):d!==p&&(o[a+c]=i[c])):o[a+c]=void 0}),f(i).forEach(function(c){B(t,c)||(o[a+c]=i[c])}),o}function Wo(t,i){return i.type==="delete"?i.keys:i.keys||i.values.map(t.extractKey)}var ec={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return s(s({},t),{table:function(i){var o=t.table(i),a=o.schema.primaryKey;return s(s({},o),{mutate:function(c){var d=Y.trans,p=d.table(i).hook,g=p.deleting,A=p.creating,k=p.updating;switch(c.type){case"add":if(A.fire===ae)break;return d._promise("readwrite",function(){return E(c)},!0);case"put":if(A.fire===ae&&k.fire===ae)break;return d._promise("readwrite",function(){return E(c)},!0);case"delete":if(g.fire===ae)break;return d._promise("readwrite",function(){return E(c)},!0);case"deleteRange":if(g.fire===ae)break;return d._promise("readwrite",function(){return function y(S,M,x){return o.query({trans:S,values:!1,query:{index:a,range:M},limit:x}).then(function(I){var T=I.result;return E({type:"delete",keys:T,trans:S}).then(function(D){return 0<D.numFailures?Promise.reject(D.failures[0]):T.length<x?{failures:[],numFailures:0,lastResult:void 0}:y(S,s(s({},M),{lower:T[T.length-1],lowerOpen:!0}),x)})})}(c.trans,c.range,1e4)},!0)}return o.mutate(c);function E(y){var S,M,x,I=Y.trans,T=y.keys||Wo(a,y);if(!T)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?s(s({},y),{keys:T}):s({},y)).type!=="delete"&&(y.values=h([],y.values)),y.keys&&(y.keys=h([],y.keys)),S=o,x=T,((M=y).type==="add"?Promise.resolve([]):S.getMany({trans:M.trans,keys:x,cache:"immutable"})).then(function(D){var O=T.map(function(N,F){var q,U,j,L=D[F],z={onerror:null,onsuccess:null};return y.type==="delete"?g.fire.call(z,N,L,I):y.type==="add"||L===void 0?(q=A.fire.call(z,N,y.values[F],I),N==null&&q!=null&&(y.keys[F]=N=q,a.outbound||Je(y.values[F],a.keyPath,N))):(q=Vo(L,y.values[F]),(U=k.fire.call(z,q,N,L,I))&&(j=y.values[F],Object.keys(U).forEach(function(K){B(j,K)?j[K]=U[K]:Je(j,K,U[K])}))),z});return o.mutate(y).then(function(N){for(var F=N.failures,q=N.results,U=N.numFailures,N=N.lastResult,j=0;j<T.length;++j){var L=(q||T)[j],z=O[j];L==null?z.onerror&&z.onerror(F[j]):z.onsuccess&&z.onsuccess(y.type==="put"&&D[j]?y.values[j]:L)}return{failures:F,results:q,numFailures:U,lastResult:N}}).catch(function(N){return O.forEach(function(F){return F.onerror&&F.onerror(N)}),Promise.reject(N)})})}}})}})}};function iu(t,i,o){try{if(!i||i.keys.length<t.length)return null;for(var a=[],c=0,d=0;c<i.keys.length&&d<t.length;++c)ne(i.keys[c],t[d])===0&&(a.push(o?An(i.values[c]):i.values[c]),++d);return a.length===t.length?a:null}catch{return null}}var tc={stack:"dbcore",level:-1,create:function(t){return{table:function(i){var o=t.table(i);return s(s({},o),{getMany:function(a){if(!a.cache)return o.getMany(a);var c=iu(a.keys,a.trans._cache,a.cache==="clone");return c?Q.resolve(c):o.getMany(a).then(function(d){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?An(d):d},d})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),o.mutate(a)}})}}}};function su(t,i){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function ou(t,i){switch(t){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var nc={stack:"dbcore",level:0,name:"Observability",create:function(t){var i=t.schema.name,o=new Re(t.MIN_KEY,t.MAX_KEY);return s(s({},t),{transaction:function(a,c,d){if(Y.subscr&&c!=="readonly")throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Y.querier));return t.transaction(a,c,d)},table:function(a){var c=t.table(a),d=c.schema,p=d.primaryKey,y=d.indexes,g=p.extractKey,A=p.outbound,k=p.autoIncrement&&y.filter(function(M){return M.compound&&M.keyPath.includes(p.keyPath)}),E=s(s({},c),{mutate:function(M){function x(K){return K="idb://".concat(i,"/").concat(a,"/").concat(K),N[K]||(N[K]=new Re)}var I,T,D,O=M.trans,N=M.mutatedParts||(M.mutatedParts={}),F=x(""),q=x(":dels"),U=M.type,z=M.type==="deleteRange"?[M.range]:M.type==="delete"?[M.keys]:M.values.length<50?[Wo(p,M).filter(function(K){return K}),M.values]:[],j=z[0],L=z[1],z=M.trans._cache;return v(j)?(F.addKeys(j),(z=U==="delete"||j.length===L.length?iu(j,z):null)||q.addKeys(j),(z||L)&&(I=x,T=z,D=L,d.indexes.forEach(function(K){var G=I(K.name||"");function $(te){return te!=null?K.extractKey(te):null}function ee(te){return K.multiEntry&&v(te)?te.forEach(function($e){return G.addKey($e)}):G.addKey(te)}(T||D).forEach(function(te,Be){var _=T&&$(T[Be]),Be=D&&$(D[Be]);ne(_,Be)!==0&&(_!=null&&ee(_),Be!=null&&ee(Be))})}))):j?(L={from:(L=j.lower)!==null&&L!==void 0?L:t.MIN_KEY,to:(L=j.upper)!==null&&L!==void 0?L:t.MAX_KEY},q.add(L),F.add(L)):(F.add(o),q.add(o),d.indexes.forEach(function(K){return x(K.name).add(o)})),c.mutate(M).then(function(K){return!j||M.type!=="add"&&M.type!=="put"||(F.addKeys(K.results),k&&k.forEach(function(G){for(var $=M.values.map(function(_){return G.extractKey(_)}),ee=G.keyPath.findIndex(function(_){return _===p.keyPath}),te=0,$e=K.results.length;te<$e;++te)$[te][ee]=K.results[te];x(G.name).addKeys($)})),O.mutatedParts=us(O.mutatedParts||{},N),K})}}),y=function(x){var I=x.query,x=I.index,I=I.range;return[x,new Re((x=I.lower)!==null&&x!==void 0?x:t.MIN_KEY,(I=I.upper)!==null&&I!==void 0?I:t.MAX_KEY)]},S={get:function(M){return[p,new Re(M.key)]},getMany:function(M){return[p,new Re().addKeys(M.keys)]},count:y,query:y,openCursor:y};return f(S).forEach(function(M){E[M]=function(x){var I=Y.subscr,T=!!I,D=su(Y,c)&&ou(M,x)?x.obsSet={}:I;if(T){var O=function(L){return L="idb://".concat(i,"/").concat(a,"/").concat(L),D[L]||(D[L]=new Re)},N=O(""),F=O(":dels"),I=S[M](x),T=I[0],I=I[1];if((M==="query"&&T.isPrimaryKey&&!x.values?F:O(T.name||"")).add(I),!T.isPrimaryKey){if(M!=="count"){var q=M==="query"&&A&&x.values&&c.query(s(s({},x),{values:!1}));return c[M].apply(this,arguments).then(function(L){if(M==="query"){if(A&&x.values)return q.then(function($){return $=$.result,N.addKeys($),L});var z=x.values?L.result.map(g):L.result;(x.values?N:F).addKeys(z)}else if(M==="openCursor"){var K=L,G=x.values;return K&&Object.create(K,{key:{get:function(){return F.addKey(K.primaryKey),K.key}},primaryKey:{get:function(){var $=K.primaryKey;return F.addKey($),$}},value:{get:function(){return G&&N.addKey(K.primaryKey),K.value}}})}return L})}F.add(o)}}return c[M].apply(this,arguments)}}),E}})}};function au(t,i,o){if(o.numFailures===0)return i;if(i.type==="deleteRange")return null;var a=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return o.numFailures===a?null:(i=s({},i),v(i.keys)&&(i.keys=i.keys.filter(function(c,d){return!(d in o.failures)})),"values"in i&&v(i.values)&&(i.values=i.values.filter(function(c,d){return!(d in o.failures)})),i)}function qo(t,i){return o=t,((a=i).lower===void 0||(a.lowerOpen?0<ne(o,a.lower):0<=ne(o,a.lower)))&&(t=t,(i=i).upper===void 0||(i.upperOpen?ne(t,i.upper)<0:ne(t,i.upper)<=0));var o,a}function uu(t,i,S,a,c,d){if(!S||S.length===0)return t;var p=i.query.index,g=p.multiEntry,A=i.query.range,k=a.schema.primaryKey.extractKey,E=p.extractKey,y=(p.lowLevelIndex||p).extractKey,S=S.reduce(function(M,x){var I=M,T=[];if(x.type==="add"||x.type==="put")for(var D=new Re,O=x.values.length-1;0<=O;--O){var N,F=x.values[O],q=k(F);D.hasKey(q)||(N=E(F),(g&&v(N)?N.some(function(K){return qo(K,A)}):qo(N,A))&&(D.addKey(q),T.push(F)))}switch(x.type){case"add":var U=new Re().addKeys(i.values?M.map(function(G){return k(G)}):M),I=M.concat(i.values?T.filter(function(G){return G=k(G),!U.hasKey(G)&&(U.addKey(G),!0)}):T.map(function(G){return k(G)}).filter(function(G){return!U.hasKey(G)&&(U.addKey(G),!0)}));break;case"put":var j=new Re().addKeys(x.values.map(function(G){return k(G)}));I=M.filter(function(G){return!j.hasKey(i.values?k(G):G)}).concat(i.values?T:T.map(function(G){return k(G)}));break;case"delete":var L=new Re().addKeys(x.keys);I=M.filter(function(G){return!L.hasKey(i.values?k(G):G)});break;case"deleteRange":var z=x.range;I=M.filter(function(G){return!qo(k(G),z)})}return I},t);return S===t?t:(S.sort(function(M,x){return ne(y(M),y(x))||ne(k(M),k(x))}),i.limit&&i.limit<1/0&&(S.length>i.limit?S.length=i.limit:t.length===i.limit&&S.length<i.limit&&(c.dirty=!0)),d?Object.freeze(S):S)}function lu(t,i){return ne(t.lower,i.lower)===0&&ne(t.upper,i.upper)===0&&!!t.lowerOpen==!!i.lowerOpen&&!!t.upperOpen==!!i.upperOpen}function rc(t,i){return function(o,a,c,d){if(o===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=ne(o,a))===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}(t.lower,i.lower,t.lowerOpen,i.lowerOpen)<=0&&0<=function(o,a,c,d){if(o===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=ne(o,a))===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}(t.upper,i.upper,t.upperOpen,i.upperOpen)}function ic(t,i,o,a){t.subscribers.add(o),a.addEventListener("abort",function(){var c,d;t.subscribers.delete(o),t.subscribers.size===0&&(c=t,d=i,setTimeout(function(){c.subscribers.size===0&&Pn(d,c)},3e3))})}var sc={stack:"dbcore",level:0,name:"Cache",create:function(t){var i=t.schema.name;return s(s({},t),{transaction:function(o,a,c){var d,p,g=t.transaction(o,a,c);return a==="readwrite"&&(p=(d=new AbortController).signal,c=function(A){return function(){if(d.abort(),a==="readwrite"){for(var k=new Set,E=0,y=o;E<y.length;E++){var S=y[E],M=On["idb://".concat(i,"/").concat(S)];if(M){var x=t.table(S),I=M.optimisticOps.filter(function(G){return G.trans===g});if(g._explicit&&A&&g.mutatedParts)for(var T=0,D=Object.values(M.queries.query);T<D.length;T++)for(var O=0,N=(U=D[T]).slice();O<N.length;O++)No((j=N[O]).obsSet,g.mutatedParts)&&(Pn(U,j),j.subscribers.forEach(function(G){return k.add(G)}));else if(0<I.length){M.optimisticOps=M.optimisticOps.filter(function(G){return G.trans!==g});for(var F=0,q=Object.values(M.queries.query);F<q.length;F++)for(var U,j,L,z=0,K=(U=q[F]).slice();z<K.length;z++)(j=K[z]).res!=null&&g.mutatedParts&&(A&&!j.dirty?(L=Object.isFrozen(j.res),L=uu(j.res,j.req,I,x,j,L),j.dirty?(Pn(U,j),j.subscribers.forEach(function(G){return k.add(G)})):L!==j.res&&(j.res=L,j.promise=Q.resolve({result:L}))):(j.dirty&&Pn(U,j),j.subscribers.forEach(function(G){return k.add(G)})))}}}k.forEach(function(G){return G()})}}},g.addEventListener("abort",c(!1),{signal:p}),g.addEventListener("error",c(!1),{signal:p}),g.addEventListener("complete",c(!0),{signal:p})),g},table:function(o){var a=t.table(o),c=a.schema.primaryKey;return s(s({},a),{mutate:function(d){var p=Y.trans;if(c.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return a.mutate(d);var g=On["idb://".concat(i,"/").concat(o)];return g?(p=a.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||Wo(c,d).some(function(A){return A==null}))?(g.optimisticOps.push(d),d.mutatedParts&&ls(d.mutatedParts),p.then(function(A){0<A.numFailures&&(Pn(g.optimisticOps,d),(A=au(0,d,A))&&g.optimisticOps.push(A),d.mutatedParts&&ls(d.mutatedParts))}),p.catch(function(){Pn(g.optimisticOps,d),d.mutatedParts&&ls(d.mutatedParts)})):p.then(function(A){var k=au(0,s(s({},d),{values:d.values.map(function(E,y){var S;return A.failures[y]||(E=(S=c.keyPath)!==null&&S!==void 0&&S.includes(".")?An(E):s({},E),Je(E,c.keyPath,A.results[y])),E})}),A);g.optimisticOps.push(k),queueMicrotask(function(){return d.mutatedParts&&ls(d.mutatedParts)})}),p):a.mutate(d)},query:function(d){if(!su(Y,a)||!ou("query",d))return a.query(d);var p=((k=Y.trans)===null||k===void 0?void 0:k.db._options.cache)==="immutable",y=Y,g=y.requery,A=y.signal,k=function(x,I,T,D){var O=On["idb://".concat(x,"/").concat(I)];if(!O)return[];if(!(I=O.queries[T]))return[null,!1,O,null];var N=I[(D.query?D.query.index.name:null)||""];if(!N)return[null,!1,O,null];switch(T){case"query":var F=N.find(function(q){return q.req.limit===D.limit&&q.req.values===D.values&&lu(q.req.query.range,D.query.range)});return F?[F,!0,O,N]:[N.find(function(q){return("limit"in q.req?q.req.limit:1/0)>=D.limit&&(!D.values||q.req.values)&&rc(q.req.query.range,D.query.range)}),!1,O,N];case"count":return F=N.find(function(q){return lu(q.req.query.range,D.query.range)}),[F,!!F,O,N]}}(i,o,"query",d),E=k[0],y=k[1],S=k[2],M=k[3];return E&&y?E.obsSet=d.obsSet:(y=a.query(d).then(function(x){var I=x.result;if(E&&(E.res=I),p){for(var T=0,D=I.length;T<D;++T)Object.freeze(I[T]);Object.freeze(I)}else x.result=An(I);return x}).catch(function(x){return M&&E&&Pn(M,E),Promise.reject(x)}),E={obsSet:d.obsSet,promise:y,subscribers:new Set,type:"query",req:d,dirty:!1},M?M.push(E):(M=[E],(S=S||(On["idb://".concat(i,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=M)),ic(E,M,g,A),E.promise.then(function(x){return{result:uu(x.result,d,S==null?void 0:S.optimisticOps,a,E,p)}})}})}})}};function hs(t,i){return new Proxy(t,{get:function(o,a,c){return a==="db"?i:Reflect.get(o,a,c)}})}var Bt=(me.prototype.version=function(t){if(isNaN(t)||t<.1)throw new H.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var i=this._versions,o=i.filter(function(a){return a._cfg.version===t})[0];return o||(o=new this.Version(t),i.push(o),i.sort(Xl),o.stores({}),this._state.autoSchema=!1,o)},me.prototype._whenReady=function(t){var i=this;return this.idbdb&&(this._state.openComplete||Y.letThrough||this._vip)?t():new Q(function(o,a){if(i._state.openComplete)return a(new H.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void a(new H.DatabaseClosed);i.open().catch(ae)}i._state.dbReadyPromise.then(o,a)}).then(t)},me.prototype.use=function(t){var i=t.stack,o=t.create,a=t.level,c=t.name;return c&&this.unuse({stack:i,name:c}),t=this._middlewares[i]||(this._middlewares[i]=[]),t.push({stack:i,create:o,level:a??10,name:c}),t.sort(function(d,p){return d.level-p.level}),this},me.prototype.unuse=function(t){var i=t.stack,o=t.name,a=t.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return a?c.create!==a:!!o&&c.name!==o})),this},me.prototype.open=function(){var t=this;return In(Xt,function(){return _l(t)})},me.prototype._close=function(){var t=this._state,i=rr.indexOf(this);if(0<=i&&rr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new Q(function(o){t.dbReadyResolve=o}),t.openCanceller=new Q(function(o,a){t.cancelOpen=a}))},me.prototype.close=function(o){var i=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;i?(o.isBeingOpened&&o.cancelOpen(new H.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new H.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},me.prototype.delete=function(t){var i=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new Q(function(c,d){function p(){i.close(t);var g=i._deps.indexedDB.deleteDatabase(i.name);g.onsuccess=he(function(){var A,k,E;A=i._deps,k=i.name,E=A.indexedDB,A=A.IDBKeyRange,So(E)||k===Hi||Io(E,A).delete(k).catch(ae),c()}),g.onerror=Mt(d),g.onblocked=i._fireOnBlocked}if(o)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(p):p()})},me.prototype.backendDB=function(){return this.idbdb},me.prototype.isOpen=function(){return this.idbdb!==null},me.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},me.prototype.hasFailed=function(){return this._state.dbOpenError!==null},me.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(me.prototype,"tables",{get:function(){var t=this;return f(this._allTables).map(function(i){return t._allTables[i]})},enumerable:!1,configurable:!0}),me.prototype.transaction=function(){var t=(function(i,o,a){var c=arguments.length;if(c<2)throw new H.InvalidArgument("Too few arguments");for(var d=new Array(c-1);--c;)d[c-1]=arguments[c];return a=d.pop(),[i,Sa(d),a]}).apply(this,arguments);return this._transaction.apply(this,t)},me.prototype._transaction=function(t,i,o){var a=this,c=Y.trans;c&&c.db===this&&t.indexOf("!")===-1||(c=null);var d,p,g=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(p=i.map(function(k){if(k=k instanceof a.Table?k.name:k,typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),t=="r"||t===go)d=go;else{if(t!="rw"&&t!=vo)throw new H.InvalidArgument("Invalid transaction mode: "+t);d=vo}if(c){if(c.mode===go&&d===vo){if(!g)throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&p.forEach(function(k){if(c&&c.storeNames.indexOf(k)===-1){if(!g)throw new H.SubTransaction("Table "+k+" not included in parent transaction.");c=null}}),g&&c&&!c.active&&(c=null)}}catch(k){return c?c._promise(null,function(E,y){y(k)}):pe(k)}var A=(function k(E,y,S,M,x){return Q.resolve().then(function(){var I=Y.transless||Y,T=E._createTransaction(y,S,E._dbSchema,M);if(T.explicit=!0,I={trans:T,transless:I},M)T.idbtrans=M.idbtrans;else try{T.create(),T.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(N){return N.name===so.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return k(E,y,S,null,x)})):pe(N)}var D,O=io(x);return O&&nr(),I=Q.follow(function(){var N;(D=x.call(T,T))&&(O?(N=Ht.bind(null,null),D.then(N,N)):typeof D.next=="function"&&typeof D.throw=="function"&&(D=Co(D)))},I),(D&&typeof D.then=="function"?Q.resolve(D).then(function(N){return T.active?N:pe(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return D})).then(function(N){return M&&T._resolve(),T._completion.then(function(){return N})}).catch(function(N){return T._reject(N),pe(N)})})}).bind(null,this,d,p,c,o);return c?c._promise(d,A,"lock"):Y.trans?In(Y.transless,function(){return a._whenReady(A)}):this._whenReady(A)},me.prototype.table=function(t){if(!B(this._allTables,t))throw new H.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},me);function me(t,i){var o=this;this._middlewares={},this.verno=0;var a=me.dependencies;this._options=i=s({addons:me.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},a=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,d,p,g,A,k={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};k.dbReadyPromise=new Q(function(y){k.dbReadyResolve=y}),k.openCanceller=new Q(function(y,S){k.cancelOpen=S}),this._state=k,this.name=t,this.on=Xr(this,"populate","blocked","versionchange","close",{ready:[oo,ae]}),this.on.ready.subscribe=Hn(this.on.ready.subscribe,function(y){return function(S,M){me.vip(function(){var x,I=o._state;I.openComplete?(I.dbOpenError||Q.resolve().then(S),M&&y(S)):I.onReadyBeingFired?(I.onReadyBeingFired.push(S),M&&y(S)):(y(S),x=o,M||y(function T(){x.on.ready.unsubscribe(S),x.on.ready.unsubscribe(T)}))})}}),this.Collection=(c=this,Zr(Ll.prototype,function(D,T){this.db=c;var M=ja,x=null;if(T)try{M=T()}catch(O){x=O}var I=D._ctx,T=I.table,D=T.hook.reading.fire;this._ctx={table:T,index:I.index,isPrimKey:!I.index||T.schema.primKey.keyPath&&I.index===T.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:x,or:I.or,valueMapper:D!==Ur?D:null}})),this.Table=(d=this,Zr(za.prototype,function(y,S,M){this.db=d,this._tx=M,this.name=y,this.schema=S,this.hook=d._allTables[y]?d._allTables[y].hook:Xr(null,{creating:[Nl,ae],reading:[Ol,Ur],updating:[Bl,ae],deleting:[Rl,ae]})})),this.Transaction=(p=this,Zr(zl.prototype,function(y,S,M,x,I){var T=this;this.db=p,this.mode=y,this.storeNames=S,this.schema=M,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=Xr(this,"complete","error","abort"),this.parent=I||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Q(function(D,O){T._resolve=D,T._reject=O}),this._completion.then(function(){T.active=!1,T.on.complete.fire()},function(D){var O=T.active;return T.active=!1,T.on.error.fire(D),T.parent?T.parent._reject(D):O&&T.idbtrans&&T.idbtrans.abort(),pe(D)})})),this.Version=(g=this,Zr(Jl.prototype,function(y){this.db=g,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,Zr(Za.prototype,function(y,S,M){if(this.db=A,this._ctx={table:y,index:S===":id"?null:S,or:M},this._cmp=this._ascending=ne,this._descending=function(x,I){return ne(I,x)},this._max=function(x,I){return 0<ne(x,I)?x:I},this._min=function(x,I){return ne(x,I)<0?x:I},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=$r(i.IDBKeyRange),this._createTransaction=function(y,S,M,x){return new o.Transaction(y,S,M,o._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(y){o.on("blocked").fire(y),rr.filter(function(S){return S.name===o.name&&S!==o&&!S._state.vcFired}).map(function(S){return S.on("versionchange").fire(y)})},this.use(tc),this.use(sc),this.use(nc),this.use($l),this.use(ec);var E=new Proxy(this,{get:function(y,S,M){if(S==="_vip")return!0;if(S==="table")return function(I){return hs(o.table(I),E)};var x=Reflect.get(y,S,M);return x instanceof za?hs(x,E):S==="tables"?x.map(function(I){return hs(I,E)}):S==="_createTransaction"?function(){return hs(x.apply(this,arguments),E)}:x}});this.vip=E,a.forEach(function(y){return y(o)})}var ds,ot=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",oc=(jo.prototype.subscribe=function(t,i,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:i,complete:o})},jo.prototype[ot]=function(){return this},jo);function jo(t){this._subscribe=t}try{ds={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{ds={indexedDB:null,IDBKeyRange:null}}function cu(t){var i,o=!1,a=new oc(function(c){var d=io(t),p,g=!1,A={},k={},E={get closed(){return g},unsubscribe:function(){g||(g=!0,p&&p.abort(),y&&$t.storagemutated.unsubscribe(M))}};c.start&&c.start(E);var y=!1,S=function(){return mo(x)},M=function(I){us(A,I),No(k,A)&&S()},x=function(){var I,T,D;!g&&ds.indexedDB&&(A={},I={},p&&p.abort(),p=new AbortController,D=function(O){var N=er();try{d&&nr();var F=Zt(t,O);return F=d?F.finally(Ht):F}finally{N&&tr()}}(T={subscr:I,signal:p.signal,requery:S,querier:t,trans:null}),Promise.resolve(D).then(function(O){o=!0,i=O,g||T.signal.aborted||(A={},function(N){for(var F in N)if(B(N,F))return;return 1}(k=I)||y||($t(_r,M),y=!0),mo(function(){return!g&&c.next&&c.next(O)}))},function(O){o=!1,["DatabaseClosedError","AbortError"].includes(O==null?void 0:O.name)||g||mo(function(){g||c.error&&c.error(O)})}))};return setTimeout(S,0),E});return a.hasValue=function(){return o},a.getValue=function(){return i},a}var Nn=Bt;function Lo(t){var i=en;try{en=!0,$t.storagemutated.fire(t),Fo(t,!0)}finally{en=i}}C(Nn,s(s({},Li),{delete:function(t){return new Nn(t,{addons:[]}).delete()},exists:function(t){return new Nn(t,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return i=Nn.dependencies,o=i.indexedDB,i=i.IDBKeyRange,(So(o)?Promise.resolve(o.databases()).then(function(a){return a.map(function(c){return c.name}).filter(function(c){return c!==Hi})}):Io(o,i).toCollection().primaryKeys()).then(t)}catch{return pe(new H.MissingAPI)}var i,o},defineClass:function(){return function(t){b(this,t)}},ignoreTransaction:function(t){return Y.trans?In(Y.transless,t):t()},vip:Do,async:function(t){return function(){try{var i=Co(t.apply(this,arguments));return i&&typeof i.then=="function"?i:Q.resolve(i)}catch(o){return pe(o)}}},spawn:function(t,i,o){try{var a=Co(t.apply(o,i||[]));return a&&typeof a.then=="function"?a:Q.resolve(a)}catch(c){return pe(c)}},currentTransaction:{get:function(){return Y.trans||null}},waitFor:function(t,i){return i=Q.resolve(typeof t=="function"?Nn.ignoreTransaction(t):t).timeout(i||6e4),Y.trans?Y.trans.waitFor(i):i},Promise:Q,debug:{get:function(){return Pt},set:function(t){Ra(t)}},derive:X,extend:b,props:C,override:Hn,Events:Xr,on:$t,liveQuery:cu,extendObservabilitySet:us,getByKeyPath:Ue,setByKeyPath:Je,delByKeyPath:function(t,i){typeof i=="string"?Je(t,i,void 0):"length"in i&&[].map.call(i,function(o){Je(t,o,void 0)})},shallowClone:Ia,deepClone:An,getObjectDiff:Vo,cmp:ne,asap:dt,minKey:-1/0,addons:[],connections:rr,errnames:so,dependencies:ds,cache:On,semVer:"4.0.11",version:"4.0.11".split(".").map(function(t){return parseInt(t)}).reduce(function(t,i,o){return t+i/Math.pow(10,2*o)})})),Nn.maxKey=$r(Nn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&($t(_r,function(t){en||(t=new CustomEvent(Ao,{detail:t}),en=!0,dispatchEvent(t),en=!1)}),addEventListener(Ao,function(t){t=t.detail,en||Lo(t)}));var or,en=!1,hu=function(){};return typeof BroadcastChannel<"u"&&((hu=function(){(or=new BroadcastChannel(Ao)).onmessage=function(t){return t.data&&Lo(t.data)}})(),typeof or.unref=="function"&&or.unref(),$t(_r,function(t){en||or.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Bt.disableBfCache&&t.persisted){Pt&&console.debug("Dexie: handling persisted pagehide"),or!=null&&or.close();for(var i=0,o=rr;i<o.length;i++)o[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Bt.disableBfCache&&t.persisted&&(Pt&&console.debug("Dexie: handling persisted pageshow"),hu(),Lo({all:new Re(-1/0,[[]])}))})),Q.rejectionMapper=function(t,i){return!t||t instanceof _n||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Na[t.name]?t:(i=new Na[t.name](i||t.message,t),"stack"in t&&J(i,"stack",{get:function(){return this.inner.stack}}),i)},Ra(Pt),s(Bt,Object.freeze({__proto__:null,Dexie:Bt,liveQuery:cu,Entity:La,cmp:ne,PropModification:Hr,replacePrefix:function(t,i){return new Hr({replacePrefix:[t,i]})},add:function(t){return new Hr({add:t})},remove:function(t){return new Hr({remove:t})},default:Bt,RangeSet:Re,mergeRanges:ni,rangesOverlap:eu}),{default:Bt}),Bt})}(Ma)),Ma.exports}var Ch=Fh();const ka=Rh(Ch),Nu=Symbol.for("Dexie"),_s=globalThis[Nu]||(globalThis[Nu]=ka);if(ka.semVer!==_s.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ka.semVer} and ${_s.semVer}`);const{liveQuery:Xh,mergeRanges:Zh,rangesOverlap:Hh,RangeSet:Jh,cmp:_h,Entity:$h,PropModification:ed,replacePrefix:td,add:nd,remove:rd}=_s;class Vh extends _s{constructor(){super("AudioSampleDB"),V(this,"samples"),this.version(1).stores({samples:"id, url, dateAdded, isDefaultInitSample, isFromDefaultLib"}),this.samples=this.table("samples")}}const $s=new Vh;async function Wh(l,e,n,s=0,h=0){try{if(await $s.samples.get(l))return console.warn(`Sample with ID ${l} already exists. Cancelled.`),l;const u=n.numberOfChannels,f=n.length,v=new Float32Array(u*f);for(let B=0;B<u;B++){const C=n.getChannelData(B);v.set(C,B*f)}const b=v.buffer,P={duration:n.duration,sampleRate:n.sampleRate,channels:u},R={id:l,url:e,audioData:b,dateAdded:new Date,metadata:P,isDefaultInitSample:s,isFromDefaultLib:h};return await $s.samples.put(R),l}catch(u){throw console.error("Failed to store audio sample:",u),new Error(`Failed to store audio sample: ${u instanceof Error?u.message:String(u)}`)}}const qh="data:video/webm;base64,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";async function wl(){const l=await fetch(qh);if(!l.ok)throw new Error(`Failed to fetch init sample: ${l.statusText}`);const e=await l.arrayBuffer(),n=new(window.AudioContext||window.webkitAudioContext)({sampleRate:Vu.sampleRate}),s=await n.decodeAudioData(e);return await n.close(),s}const jh="../assets/",Lh="init_sample.wav";async function Kh(){try{await $s.open(),await Uh()}catch(l){console.error("Error opening IndexedDB:",l)}}async function Uh(){try{const l="default-init-sample",e=`${jh}${Lh}`;if(await $s.samples.get(l))return;console.info("Init sample not in idb, fetching from source url..");const n=await wl();if(!n||n.length<=0){console.warn("Failed to decode init sample");return}const s=await Wh(l,e,n,1,1);console.info(`Storing init sample in idb, stored sample ID: ${s}`)}catch(l){console.warn("Error ensuring init sample in IndexedDB:",l)}}async function id(l,e=16,n=bn(),s){if(await Qu(),st(n,"Audio context is not available"),!(await Oh(n)).success)throw new Error("AudioWorklet is required but not supported on this browser. Please use a modern desktop browser (Chrome, Firefox, Edge) or update your mobile browser.");let h;if(l instanceof AudioBuffer)h=l;else if(l instanceof ArrayBuffer)try{h=await n.decodeAudioData(l)}catch(f){throw console.error("Failed to decode sample audiodata when creating SamplePlayer:",f),f}else await Kh(),h=await wl();const u=new kh(n,e,h,s);return await u.init(),u}async function zh(){const l=await navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0}),e=new MediaStream(l.getAudioTracks());return l.getVideoTracks().forEach(n=>n.stop()),e}const Xe={IDLE:"IDLE",ARMED:"ARMED",RECORDING:"RECORDING",STOPPED:"STOPPED"},Al={mimeType:"audio/webm"},Qh={mediaRecorderOptions:Al,useThreshold:!0,startThreshold:-30,autoStop:!1,stopThreshold:-40,silenceTimeoutMs:1e3,preprocess:!1,preprocessOptions:{}};var Ke,qe,ct,Dr,Qt,ge,Un,mt,zn,Qn,ve,Gn,dn,Xn,Me,Pl,Ml,eo,_o,Ru,Bu,Wi,kl,Tl,Fu,Ta;class Gh{constructor(e){w(this,Me),V(this,"nodeId"),V(this,"nodeType","recorder"),w(this,Ke),w(this,qe,null),w(this,ct,null),w(this,Dr),w(this,Qt,null),w(this,ge,Xe.IDLE),w(this,Un,null),w(this,mt,null),w(this,zn,null),w(this,Qn,null),w(this,ve,null),w(this,Gn,"microphone"),w(this,dn,null),w(this,Xn,null),this.nodeId=Dt(this.nodeType,this),m(this,Ke,e),m(this,Dr,wn(this.nodeId))}async init(){return console.warn("Recorder: init() method is deprecated and will be removed in a future version."),this}async start(e){r(this,Ke).state==="suspended"&&await r(this,Ke).resume(),r(this,qe)&&(r(this,qe).getTracks().forEach(h=>h.stop()),m(this,qe,null));let n={...Qh,...e};r(this,Gn)==="browser"&&(e==null?void 0:e.startThreshold)===void 0&&(n.startThreshold=-60),m(this,ve,n);let s;if(r(this,Gn)==="resample"?(s=await Fi(()=>W(this,Me,Pl).call(this)),st(!s.error,`Failed to create resample stream: ${s.error}`,s)):r(this,ve)&&r(this,Gn)==="browser"?(s=await Fi(async()=>(r(this,Ke).state==="suspended"&&await r(this,Ke).resume(),zh())),st(!s.error,`Failed to get browser audio: ${s.error}`,s)):(s=await Fi(()=>Gc()),st(!s.error,`Failed to get microphone: ${s.error}`,s)),m(this,qe,s.data),m(this,ct,new MediaRecorder(r(this,qe),r(this,ve)?r(this,ve).mediaRecorderOptions:Al)),!r(this,ct))throw new Error("Recorder not initialized");if(r(this,ge)===Xe.RECORDING)return this;try{return!r(this,ve)||!r(this,ve).useThreshold?W(this,Me,eo).call(this):W(this,Me,Ml).call(this),this}catch(h){throw console.error("Error starting recording:",h),h}}forceStart(){return r(this,ge)!==Xe.ARMED||!this.initialized?(console.warn("Recorder must be initialized and armed before calling forceStart. Current state:",r(this,ge)),!1):r(this,ve)?(r(this,ve).autoStop=!1,W(this,Me,eo).call(this),!0):(console.error("Recorder config is null, cannot force start"),!1)}setInputSource(e){m(this,Gn,e)}async stop(){var e;if(!r(this,ct))throw new Error("Recorder not initialized");if(r(this,ge)===Xe.ARMED)throw W(this,Me,Wi).call(this),m(this,ge,Xe.STOPPED),console.info(`Recorder state: ${r(this,ge)}`),this.sendMessage("record:cancelled",{}),new Error("Recording was armed but never triggered");if(r(this,ge)!==Xe.RECORDING)throw new Error("Not recording");W(this,Me,Wi).call(this);const n=await W(this,Me,kl).call(this);let s=await W(this,Me,Tl).call(this,n),h;return(e=r(this,ve))!=null&&e.preprocess&&(h=await Zu(r(this,Ke),s,r(this,ve).preprocessOptions),s=h.audiobuffer),r(this,Qt)&&await r(this,Qt).loadSample(s),m(this,ge,Xe.STOPPED),console.info(`Recorder state: ${r(this,ge)}`),this.sendMessage("record:stop",{duration:s.duration}),r(this,qe)&&(r(this,qe).getTracks().forEach(u=>u.stop()),r(this,Gn)==="browser"&&r(this,qe).getTracks().forEach(u=>u.stop())),m(this,qe,null),m(this,ct,null),W(this,Me,Ta).call(this),s}onMessage(e,n){return r(this,Dr).onMessage(e,n)}sendMessage(e,n){r(this,Dr).sendMessage(e,n),e.startsWith("record:")&&r(this,Dr).sendMessage("state-change",{state:r(this,ge),event:e,...n})}connect(e){return m(this,Qt,e),this}connectResampleInputSource(e){return m(this,Xn,e),this}disconnect(){m(this,Qt,null)}dispose(){var e;W(this,Me,Wi).call(this),W(this,Me,Ta).call(this),(e=r(this,qe))==null||e.getTracks().forEach(n=>n.stop()),m(this,qe,null),m(this,ct,null),m(this,ge,Xe.IDLE),m(this,ve,null),Ot(this.nodeId)}get isArmed(){return r(this,ge)===Xe.ARMED}get isRecording(){return r(this,ge)===Xe.RECORDING}get state(){return r(this,ge)}get initialized(){return r(this,ct)!==null&&r(this,qe)!==null}get now(){return r(this,Ke).currentTime}get destination(){return r(this,Qt)}}Ke=new WeakMap,qe=new WeakMap,ct=new WeakMap,Dr=new WeakMap,Qt=new WeakMap,ge=new WeakMap,Un=new WeakMap,mt=new WeakMap,zn=new WeakMap,Qn=new WeakMap,ve=new WeakMap,Gn=new WeakMap,dn=new WeakMap,Xn=new WeakMap,Me=new WeakSet,Pl=async function(){if(!r(this,Xn))throw new Error("No SamplePlayer connected for resampling");return m(this,dn,r(this,Ke).createMediaStreamDestination()),r(this,Xn).output.connect(r(this,dn)),r(this,dn).stream},Ml=function(){if(!W(this,Me,Fu).call(this,r(this,ve).startThreshold)){console.warn(`Threshold ${r(this,ve).startThreshold}dB out of range (-60 to 0)`);return}m(this,ge,Xe.ARMED),console.info("Recorder state: ARMED"),this.sendMessage("record:armed",{threshold:r(this,ve).startThreshold,destination:r(this,Qt)}),W(this,Me,_o).call(this)},eo=function(){var l;r(this,ct).start(),m(this,ge,Xe.RECORDING),console.info(`Recorder state: ${r(this,ge)}`),this.sendMessage("record:start",{destination:r(this,Qt)}),(l=r(this,ve))!=null&&l.autoStop&&W(this,Me,_o).call(this)},_o=async function(){m(this,Un,r(this,Ke).createMediaStreamSource(r(this,qe))),m(this,mt,r(this,Ke).createAnalyser()),r(this,mt).fftSize=1024,r(this,Un).connect(r(this,mt));const l=new Float32Array(r(this,mt).fftSize);r(this,Ke).state==="suspended"&&await r(this,Ke).resume();const e=async()=>{if(!r(this,mt))return;r(this,mt).getFloatTimeDomainData(l);const n=Math.max(...l.map(Math.abs)),s=n>1e-7?20*Math.log10(n):-100;if(r(this,ge)===Xe.ARMED)W(this,Me,Ru).call(this,s);else if(r(this,ge)===Xe.RECORDING)W(this,Me,Bu).call(this,s);else{W(this,Me,Wi).call(this);return}m(this,zn,requestAnimationFrame(e))};m(this,zn,requestAnimationFrame(e))},Ru=function(l){l>=r(this,ve).startThreshold&&W(this,Me,eo).call(this)},Bu=function(l){if(!r(this,ve).autoStop)return;const e=performance.now();l<r(this,ve).stopThreshold?r(this,Qn)===null?m(this,Qn,e):e-r(this,Qn)>=r(this,ve).silenceTimeoutMs&&(this.sendMessage("record:stopping",{}),this.stop().catch(n=>console.error("Error auto-stopping:",n))):m(this,Qn,null)},Wi=function(){r(this,zn)!==null&&(cancelAnimationFrame(r(this,zn)),m(this,zn,null)),r(this,Un)&&(r(this,Un).disconnect(),m(this,Un,null)),r(this,mt)&&(r(this,mt).disconnect(),m(this,mt,null)),m(this,Qn,null)},kl=function(){return new Promise(l=>{var e,n,s;((e=r(this,ct))==null?void 0:e.state)!=="inactive"&&((n=r(this,ct))==null||n.addEventListener("dataavailable",h=>l(h.data),{once:!0}),(s=r(this,ct))==null||s.stop())})},Tl=async function(l){const e=await l.arrayBuffer();return await r(this,Ke).decodeAudioData(e)},Fu=function(l){return l>-60&&l<0},Ta=function(){r(this,dn)&&r(this,Xn)&&(r(this,Xn).output.disconnect(r(this,dn)),m(this,dn,null))};async function sd(l){const e=l||bn();return new Gh(e)}export{Yh as W,sd as o,id as s};
//# sourceMappingURL=audiolib-_fK8BHlE.js.map
