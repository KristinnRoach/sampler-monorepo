import{d as A,c as v,t as w,g as e,a as S,b as y,e as xe,f as ye,i as h,m as Se,h as x,s as gt,F as bt,o as pt,j as ft,u as ut,r as mt}from"./vendor-C80h2yJ1.js";import{b as $t}from"./audio-components-Dvtm6xp8.js";import{D as _t}from"./vendor-dexie-CRVYvTkI.js";import"./audiolib-CXv9_aZP.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const t of l)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(l){const t={};return l.integrity&&(t.integrity=l.integrity),l.referrerPolicy&&(t.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?t.credentials="include":l.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(l){if(l.ep)return;l.ep=!0;const t=s(l);fetch(l.href,t)}})();const vt=(n,o)=>document.querySelectorAll(n),ht=n=>{const s=[".env-group, .sample-group, .mix-group",".filter-group,  .feedback-group",".loop-group, .trim-group, .misc-group, .lfo-group",".toggle-group, .keyboard-group"][n-1];if(!s)return;const i=vt(s);if(i.length===0)return;const l=Array.from(i).every(t=>t.classList.contains("collapsed"));i.forEach(t=>t.classList.toggle("collapsed",!l))};function wt(){document.addEventListener("click",n=>{var l;const o=n.target;if(!(o instanceof Element))return;const s=o.closest(".expandable-legend");s&&((l=s.closest(".control-group"))==null||l.classList.toggle("collapsed"));const i=o.closest(".row-collapse-icon");if(i){const t=i.getAttribute("data-row"),r=Number.parseInt(t??"",10);Number.isFinite(r)&&r>0&&ht(r)}})}class kt extends _t{constructor(){super("SampleDatabase"),this.version(1).stores({samples:"++id, name, createdAt"})}}const D=new kt;var xt=w('<save-button title="Save current sample">',!0,!1,!1);function St(n){const o=n.length,s=n.numberOfChannels,i=n.sampleRate,l=new ArrayBuffer(44+o*s*2),t=new DataView(l),r=(a,d)=>{for(let g=0;g<d.length;g++)t.setUint8(a+g,d.charCodeAt(g))};r(0,"RIFF"),t.setUint32(4,36+o*s*2,!0),r(8,"WAVE"),r(12,"fmt "),t.setUint32(16,16,!0),t.setUint16(20,1,!0),t.setUint16(22,s,!0),t.setUint32(24,i,!0),t.setUint32(28,i*s*2,!0),t.setUint16(32,s*2,!0),t.setUint16(34,16,!0),r(36,"data"),t.setUint32(40,o*s*2,!0);let f=44;for(let a=0;a<o;a++)for(let d=0;d<s;d++){const g=Math.max(-1,Math.min(1,n.getChannelData(d)[a]));t.setInt16(f,g<0?g*32768:g*32767,!0),f+=2}return l}const yt=n=>{const[o,s]=v(!1),i=async()=>{if(n.audioBuffer){s(!0);try{const l=prompt("Enter sample name:")||`Sample_${Date.now()}`,t=St(n.audioBuffer),r={name:l,audioData:t,sampleRate:n.audioBuffer.sampleRate,channels:n.audioBuffer.numberOfChannels,createdAt:new Date};await D.samples.add(r),console.log("Sample saved successfully!")}catch(l){console.error("Save failed:",l)}finally{s(!1)}}};return(()=>{var l=xt();return l.$$click=i,l._$owner=e(),S(t=>{var r=`${n.class?n.class:""} save-button ${n.isOpen?"open":""}`,f=n.disabled||o();return r!==t.e&&y(l,t.e=r),f!==t.t&&(l.disabled=t.t=f),t},{e:void 0,t:void 0}),l})()};A(["click"]);var Ct=w("<div><div class=sidebar-header><h3>Saved Samples</h3><button class=close-button>Ã—</button></div><div class=sidebar-content>"),Lt=w("<div>Loading..."),Et=w('<div class=sample-item><div class=sample-info><div class=sample-name></div><div class=sample-date></div></div><button class=delete-button><svg width=16 height=16 viewBox="0 0 24 24"fill=currentColor><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z">'),At=w("<div class=no-samples>No saved samples");const Ot=n=>{const[o,s]=v([]),[i,l]=v(!1),t=async()=>{l(!0);try{const a=await D.samples.orderBy("createdAt").reverse().toArray();s(a)}catch(a){console.error("Failed to load samples:",a)}finally{l(!1)}},r=async(a,d)=>{if(d.stopPropagation(),!!confirm(`Delete "${a.name}"?`))try{await D.samples.delete(a.id),console.log("Sample deleted:",a.name),t()}catch(g){console.error("Failed to delete sample:",g)}};xe(()=>{n.isOpen&&t()}),xe(()=>{const a=d=>{d.key==="Escape"&&n.isOpen&&n.onClose()};n.isOpen&&(document.addEventListener("keydown",a),pt(()=>{document.removeEventListener("keydown",a)}))});const f=()=>n.isOpen;return(()=>{var a=Ct(),d=a.firstChild,g=d.firstChild,p=g.nextSibling,c=d.nextSibling;return ye(p,"click",n.onClose),h(c,(()=>{var b=Se(()=>!!i());return()=>b()?Lt():x(bt,{get each(){return o()},children:u=>(()=>{var m=Et(),k=m.firstChild,C=k.firstChild,O=C.nextSibling,L=k.nextSibling;return m.$$click=()=>n.onSampleSelect(u),h(C,()=>u.name),h(O,()=>{var _;return(_=u.createdAt)==null?void 0:_.toLocaleDateString()}),L.$$click=_=>r(u,_),S(()=>gt(L,"title",`Delete ${u.name}`)),m})()})})(),null),h(c,(()=>{var b=Se(()=>o().length===0&&!i());return()=>b()&&At()})(),null),S(()=>y(a,`sidebar ${f()?"sidebar-open":"sidebar-closed"}`)),a})()};A(["click"]);var Dt=w('<button title="View saved samples"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z">');const Bt=n=>(()=>{var o=Dt();return ye(o,"click",n.onclick),S(()=>y(o,`${n.class?n.class:""} sidebar-toggle ${n.isOpen?"open":""}`)),o})();A(["click"]);var Ft=w(`<div id=page-wrapper class=page-wrapper><div class=pre-sidebar-buttons><tempo-knob target-node-id=test-sampler label=" "></tempo-knob></div><div id=sampler-container><sampler-element node-id=test-sampler debug-mode=false></sampler-element><fieldset class="control-group env-group"><legend class=expandable-legend>Envelopes</legend><div class=expandable-content><envelope-switcher height=225px target-node-id=test-sampler></envelope-switcher></div></fieldset><fieldset class="control-group sample-group"><legend class=expandable-legend>Sample</legend><div class=expandable-content><div class=flex-col><record-button target-node-id=test-sampler show-status=false></record-button><input-select target-node-id=test-sampler></input-select></div><load-button target-node-id=test-sampler show-status=false></load-button><button class=reset-button title="Reset knobs"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 256 256"fill=none><path d="M139.141 232.184c78.736 0 127.946-85.236 88.579-153.424-39.369-68.187-137.789-68.187-177.158 0A102.125 102.125 0 0 0 43.71 93.1m62.258-5.371c-14.966 5.594-35.547 10.026-48.737 19.272-2.137 1.497-26.015 16.195-26.049 13.991C27.503 98.21 13.21 75.873 13.21 52.583"></path></svg></button></div></fieldset><fieldset class="control-group mix-group"><legend class=expandable-legend>Mix</legend><div class=expandable-content><volume-knob target-node-id=test-sampler></volume-knob><dry-wet-knob target-node-id=test-sampler></dry-wet-knob><reverb-send-knob label=RevSend target-node-id=test-sampler></reverb-send-knob><reverb-size-knob label=RevSize target-node-id=test-sampler></reverb-size-knob><delay-send-knob label=Delay target-node-id=test-sampler></delay-send-knob><delay-time-knob label=Time target-node-id=test-sampler></delay-time-knob><delay-feedback-knob label=FB target-node-id=test-sampler></delay-feedback-knob></div></fieldset><fieldset class="control-group filter-group"><legend class=expandable-legend>Filters</legend><div class=expandable-content><highpass-filter-knob target-node-id=test-sampler></highpass-filter-knob><lowpass-filter-knob target-node-id=test-sampler></lowpass-filter-knob></div></fieldset><fieldset class="control-group misc-group"><legend class=expandable-legend>Misc</legend><div class=expandable-content><distortion-knob target-node-id=test-sampler></distortion-knob><am-modulation label=AM target-node-id=test-sampler></am-modulation></div></fieldset><fieldset class="control-group loop-group"><legend class=expandable-legend>Loop</legend><div class=expandable-content><loop-start-knob target-node-id=test-sampler label=Start></loop-start-knob><loop-duration-knob target-node-id=test-sampler label=Duration></loop-duration-knob><div class=flex-col><loop-duration-drift-knob target-node-id=test-sampler label=Drift></loop-duration-drift-knob><pan-drift-toggle target-node-id=test-sampler></pan-drift-toggle></div></div></fieldset><fieldset class="control-group trim-group"><legend class=expandable-legend>Trim</legend><div class=expandable-content><trim-start-knob target-node-id=test-sampler></trim-start-knob><trim-end-knob target-node-id=test-sampler></trim-end-knob></div></fieldset><fieldset class="control-group feedback-group"><legend class=expandable-legend>Feedback</legend><div class=expandable-content><div class=flex-col><feedback-knob target-node-id=test-sampler label=Amount></feedback-knob><feedback-mode-toggle target-node-id=test-sampler label></feedback-mode-toggle></div><div class=flex-row><div class=flex-col><feedback-pitch-knob target-node-id=test-sampler label=Pitch></feedback-pitch-knob><feedback-lpf-knob label=Lowpass class=fb-lpf-knob target-node-id=test-sampler></feedback-lpf-knob></div><feedback-decay-knob target-node-id=test-sampler label=Decay></feedback-decay-knob></div></div></fieldset><fieldset class="control-group lfo-group"><legend class=expandable-legend>LFO's</legend><div class=expandable-content><div class=flex-col><gain-lfo-rate-knob target-node-id=test-sampler label=Rate></gain-lfo-rate-knob><gain-lfo-sync-toggle target-node-id=test-sampler label></gain-lfo-sync-toggle></div><gain-lfo-depth-knob target-node-id=test-sampler label=Depth></gain-lfo-depth-knob><div class=flex-col><pitch-lfo-rate-knob target-node-id=test-sampler label=Rate></pitch-lfo-rate-knob><pitch-lfo-sync-toggle target-node-id=test-sampler label></pitch-lfo-sync-toggle></div><pitch-lfo-depth-knob target-node-id=test-sampler label=Depth></pitch-lfo-depth-knob></div></fieldset><fieldset class="control-group toggle-group"><legend class=expandable-legend>Toggles</legend><div class=expandable-content><midi-toggle target-node-id=test-sampler></midi-toggle><playback-direction-toggle target-node-id=test-sampler></playback-direction-toggle><loop-lock-toggle target-node-id=test-sampler></loop-lock-toggle><hold-lock-toggle target-node-id=test-sampler></hold-lock-toggle><pitch-toggle target-node-id=test-sampler></pitch-toggle><sampler-status target-node-id=test-sampler></sampler-status></div></fieldset><fieldset class="control-group keyboard-group"><legend class=expandable-legend>Keyboard</legend><computer-keyboard target-node-id=test-sampler></computer-keyboard><div class=expandable-content><piano-keyboard id=piano-keyboard class=piano-keyboard target-node-id=test-sampler width=700 height=80></piano-keyboard><div class=keyboard-controls><div class=flex-row><rootnote-select show-label=false target-node-id=test-sampler></rootnote-select><keymap-select show-label=false target-node-id=test-sampler></keymap-select></div><glide-knob target-node-id=test-sampler></glide-knob></div></div></fieldset><div class=row-collapse-icon data-row=1 style=grid-area:mix></div><div class=row-collapse-icon data-row=2 style=grid-area:feedback></div><div class=row-collapse-icon data-row=3 style=grid-area:lfo></div><div class=row-collapse-icon data-row=4 style=grid-area:keyboard>`,!0,!1,!1);const Rt=()=>{const[n,o]=v("desktop");let s,i=null;const[l,t]=v(null),[r,f]=v(!1),[a,d]=v(!1),g=async p=>{try{if(!i)return;const c=p.audioData;await i.loadSample(c,void 0,{skipPreProcessing:!0}),d(!1)}catch(c){console.error("Failed to load sample:",c)}};return ft(()=>{const p=()=>{if(s){i=s.getSamplePlayer();const b=(i==null?void 0:i.audiobuffer)||null;t(b),f(!0)}},c=()=>{const b=window.innerWidth;b<800?o("mobile"):b<1200?o("tablet"):o("desktop")};return document.addEventListener("sample-loaded",p),window.addEventListener("resize",c),c(),wt(),()=>{document.removeEventListener("sample-loaded",p),window.removeEventListener("resize",c)}}),(()=>{var p=Ft(),c=p.firstChild,b=c.firstChild,u=c.nextSibling,m=u.firstChild,k=m.nextSibling,C=k.firstChild,O=C.nextSibling,L=O.firstChild,_=k.nextSibling,Ce=_.firstChild,Le=Ce.nextSibling,B=Le.firstChild,F=B.firstChild,Ee=F.nextSibling,R=B.nextSibling,M=R.nextSibling,U=_.nextSibling,Ae=U.firstChild,Oe=Ae.nextSibling,H=Oe.firstChild,P=H.nextSibling,N=P.nextSibling,V=N.nextSibling,I=V.nextSibling,T=I.nextSibling,De=T.nextSibling,z=U.nextSibling,Be=z.firstChild,Fe=Be.nextSibling,q=Fe.firstChild,Re=q.nextSibling,K=z.nextSibling,Me=K.firstChild,Ue=Me.nextSibling,W=Ue.firstChild,He=W.nextSibling,Z=K.nextSibling,Pe=Z.firstChild,Ne=Pe.nextSibling,j=Ne.firstChild,G=j.nextSibling,Ve=G.nextSibling,J=Ve.firstChild,Ie=J.nextSibling,Q=Z.nextSibling,Te=Q.firstChild,ze=Te.nextSibling,X=ze.firstChild,qe=X.nextSibling,Y=Q.nextSibling,Ke=Y.firstChild,We=Ke.nextSibling,ee=We.firstChild,te=ee.firstChild,Ze=te.nextSibling,je=ee.nextSibling,le=je.firstChild,ne=le.firstChild,Ge=ne.nextSibling,Je=le.nextSibling,oe=Y.nextSibling,Qe=oe.firstChild,Xe=Qe.nextSibling,ae=Xe.firstChild,se=ae.firstChild,Ye=se.nextSibling,ie=ae.nextSibling,re=ie.nextSibling,de=re.firstChild,et=de.nextSibling,tt=re.nextSibling,ce=oe.nextSibling,lt=ce.firstChild,nt=lt.nextSibling,ge=nt.firstChild,be=ge.nextSibling,pe=be.nextSibling,fe=pe.nextSibling,ue=fe.nextSibling,ot=ue.nextSibling,at=ce.nextSibling,st=at.firstChild,me=st.nextSibling,it=me.nextSibling,$e=it.firstChild,rt=$e.nextSibling,_e=rt.firstChild,ve=_e.firstChild,dt=ve.nextSibling,ct=_e.nextSibling;h(c,x(Bt,{onclick:()=>d(!a()),get isOpen(){return a()},class:"left-side-button"}),b),h(c,x(yt,{get audioBuffer(){return l()},get disabled(){return!r()},get isOpen(){return a()},class:"left-side-button"}),b),b._$owner=e(),h(p,x(Ot,{get isOpen(){return a()},onClose:()=>d(!1),onSampleSelect:g}),u);var he=s;return typeof he=="function"?ut(he,m):s=m,m._$owner=e(),L._$owner=e(),F._$owner=e(),Ee._$owner=e(),R._$owner=e(),M.$$click=()=>{document.querySelectorAll("knob-element").forEach(E=>{E.resetToDefault()})},H._$owner=e(),P._$owner=e(),N._$owner=e(),V._$owner=e(),I._$owner=e(),T._$owner=e(),De._$owner=e(),q._$owner=e(),Re._$owner=e(),W._$owner=e(),He._$owner=e(),j._$owner=e(),G._$owner=e(),J._$owner=e(),Ie._$owner=e(),X._$owner=e(),qe._$owner=e(),te._$owner=e(),Ze._$owner=e(),ne._$owner=e(),Ge._$owner=e(),Je._$owner=e(),se._$owner=e(),Ye._$owner=e(),ie._$owner=e(),de._$owner=e(),et._$owner=e(),tt._$owner=e(),ge._$owner=e(),be._$owner=e(),pe._$owner=e(),fe._$owner=e(),ue._$owner=e(),ot._$owner=e(),me._$owner=e(),$e._$owner=e(),ve._$owner=e(),dt._$owner=e(),ct._$owner=e(),S($=>{var E=`aside-tempo-knob ${a()?"open":""}`,we=`control-grid layout-${n()}`,ke=!r();return E!==$.e&&y(b,$.e=E),we!==$.t&&y(u,$.t=we),ke!==$.a&&(M.disabled=$.a=ke),$},{e:void 0,t:void 0,a:void 0}),p})()};A(["click"]);$t();const Mt=document.getElementById("root");mt(()=>x(Rt,{}),Mt);
//# sourceMappingURL=index-BgEJvBvj.js.map
